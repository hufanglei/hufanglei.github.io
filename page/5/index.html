<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"hufanglei.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12,"scrollpercent":true,"onmobile":false},"hljswrap":true,"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
<meta property="og:type" content="blog">
<meta property="og:title" content="个人博客">
<meta property="og:url" content="https://hufanglei.github.io/page/5/index.html">
<meta property="og:site_name" content="个人博客">
<meta property="og:description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="胡方雷">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://hufanglei.github.io/page/5/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/5/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>个人博客</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">个人博客</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">记录生活中的点点滴滴</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">398</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">105</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">594</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="胡方雷"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">胡方雷</p>
  <div class="site-description" itemprop="description">直到这一刻微笑着说话为止，我至少留下了一公升眼泪</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">594</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">105</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">398</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/hufanglei" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hufanglei" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://hufanglei.blog.csdn.net/" title="CSDN → https:&#x2F;&#x2F;hufanglei.blog.csdn.net" rel="noopener me" target="_blank"><i class="crosshairs fa-fw"></i>CSDN</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:690328661@qq.com" title="E-Mail → mailto:690328661@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1518938&auto=1&height=66"></iframe>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title">
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="http://www.alloyteam.com/nav/" title="http:&#x2F;&#x2F;www.alloyteam.com&#x2F;nav&#x2F;" rel="noopener" target="_blank">Web前端导航</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://www.uisdc.com/" title="http:&#x2F;&#x2F;www.uisdc.com&#x2F;" rel="noopener" target="_blank">优设</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://www.zhangxinxu.com/" title="http:&#x2F;&#x2F;www.zhangxinxu.com&#x2F;" rel="noopener" target="_blank">牛人文档</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://ife.baidu.com/" title="http:&#x2F;&#x2F;ife.baidu.com&#x2F;" rel="noopener" target="_blank">百度前端技术学院</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://wf.uisdc.com/cn/" title="http:&#x2F;&#x2F;wf.uisdc.com&#x2F;cn&#x2F;" rel="noopener" target="_blank">google前端开发基础</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2022/11/24/mysql%E8%BD%ACsqlite3%E5%AE%9E%E6%88%98+%E9%83%A8%E7%BD%B2sqlite3%E5%BA%94%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/11/24/mysql%E8%BD%ACsqlite3%E5%AE%9E%E6%88%98+%E9%83%A8%E7%BD%B2sqlite3%E5%BA%94%E7%94%A8/" class="post-title-link" itemprop="url">mysql转sqlite3实战+部署sqlite3应用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-11-24 13:26:49" itemprop="dateCreated datePublished" datetime="2022-11-24T13:26:49+08:00">2022-11-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java%E5%9F%BA%E7%A1%80-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93-mysql/" itemprop="url" rel="index"><span itemprop="name">java基础 Oracle数据库 mysql</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[TOC]</p>
<h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><blockquote>
<p>最近维护一个嵌入式设备的java应用，由于内存有限，需要压缩内存，考虑到之前用的是mysql，需要对mysql替换，使用轻量的sqlite3。今天就记录下走过的坑。</p>
</blockquote>
<h3 id="mysql脚本转sqlite3"><a href="#mysql脚本转sqlite3" class="headerlink" title="mysql脚本转sqlite3"></a>mysql脚本转sqlite3</h3><h3 id="1-新建个sqlite3的文件并使用navicat连接"><a href="#1-新建个sqlite3的文件并使用navicat连接" class="headerlink" title="1.新建个sqlite3的文件并使用navicat连接"></a>1.新建个sqlite3的文件并使用navicat连接</h3><p>选择新建，然后找个目录新建个 .db或者.sqlite的文件，建个连接。<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/7fb08f58729ae48edc2cbe2c130775e0_1737628660140.png" alt="在这里插入图片描述"></p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/08cd9856e2a284d3e11d4ee66f9b63db_1737628672105.png" alt="在这里插入图片描述"></p>
<h3 id="准备好mysql并连接上"><a href="#准备好mysql并连接上" class="headerlink" title="准备好mysql并连接上"></a>准备好mysql并连接上</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/1c3e02f05335c5f13b2fd850a7aface4_1737628672105.png" alt="在这里插入图片描述"><br>我的是这个egemtmt-init的mysql数据库</p>
<h3 id="使用navicat数据传输"><a href="#使用navicat数据传输" class="headerlink" title="使用navicat数据传输"></a>使用navicat数据传输</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/37678523b9ffb8bfc03d8443d9737521_1737628672105.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/e643f99c3d6868c4c92535218edbafe1_1737628672105.png" alt="在这里插入图片描述"></p>
<h3 id="传输完后，设置主键自增"><a href="#传输完后，设置主键自增" class="headerlink" title="传输完后，设置主键自增"></a>传输完后，设置主键自增</h3><p>这里有个问题，就是mysql原来主键自增的字段，传输给sqlite3数据库后发现主键没自增。需要检查下自增的字段,然后勾选上。<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/e88184d843805f7f2d2073278af93bac_1737628672105.png" alt="在这里插入图片描述"><br>最下面的自动递增勾选上。其他表一样。</p>
<h2 id="修改应用程序"><a href="#修改应用程序" class="headerlink" title="修改应用程序"></a>修改应用程序</h2><h3 id="1-添加sqlite3的驱动包"><a href="#1-添加sqlite3的驱动包" class="headerlink" title="1.添加sqlite3的驱动包"></a>1.添加sqlite3的驱动包</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- sqlite3 驱动包 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.xerial<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sqlite-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里没加版本，因为springboot自带版本，可以查看下:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/da8fba55b499767a45431e22884bbbb0_1737628682988.png" alt="在这里插入图片描述"><br>这里使用的是 <code>   &lt;sqlite-jdbc.version&gt;3.28.0&lt;/sqlite-jdbc.version&gt;</code>这个版本。</p>
<h3 id="2-修改sqlite3的jdbc连接配置文件"><a href="#2-修改sqlite3的jdbc连接配置文件" class="headerlink" title="2.修改sqlite3的jdbc连接配置文件"></a>2.修改sqlite3的jdbc连接配置文件</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/08c7d0a26807e42bdd73fdde91221ae7_1737628682988.png" alt="在这里插入图片描述"><br>用的若依框架，这里直接设置驱动和url，不需要设置用户名和密码</p>
<h3 id="3-全局替换Date类型字段为String类型"><a href="#3-全局替换Date类型字段为String类型" class="headerlink" title="3.全局替换Date类型字段为String类型"></a>3.全局替换Date类型字段为String类型</h3><p>将代码中的所有的Date类型替换为String类型。因为sqlite3数据库没有时间类型，数据库存储的是TEXT类型。<br>以下面的代码举例:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/2d719fab081886b6446d8aab0cdcbbc8_1737628682988.png" alt="在这里插入图片描述"></p>
<h3 id="4-全局替换-sql文件中的-date（）等函数"><a href="#4-全局替换-sql文件中的-date（）等函数" class="headerlink" title="4.全局替换 sql文件中的 date（）等函数"></a>4.全局替换 sql文件中的 date（）等函数</h3><p>本人使用的是mybatis，在xml中的一些sql带有sysdate()等一些时间函数转成：<code>datetime(&#39;now&#39;,&#39;localtime&#39;)</code>,<img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/2b39b7e73d9277f4a6b4ad53b5bac447_1737628682988.png" alt="在这里插入图片描述"><br>不加now显示的不是当地时间，因为我们是东八区，所以应该显示这个时间。</p>
<h3 id="5-检查其他工具或者类型不匹配的问题"><a href="#5-检查其他工具或者类型不匹配的问题" class="headerlink" title="5.检查其他工具或者类型不匹配的问题"></a>5.检查其他工具或者类型不匹配的问题</h3><p>有些时间转换的 比如计算时间的间隔，由date转为string再计算。这里不举例了。报错的话，自己再具体解决。</p>
<h2 id="将sqlite3的数据库导出成sql文件2"><a href="#将sqlite3的数据库导出成sql文件2" class="headerlink" title="将sqlite3的数据库导出成sql文件2"></a>将sqlite3的数据库导出成sql文件2</h2><p>在sqlite3命令行中。2种方式进入sqlite3终端。</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/ec99d2238f2c1369165da010bde97efe_1737628682988.png" alt="在这里插入图片描述"></p>
<p>我使用第一种：</p>
<p>进入sqlite3的数据库文件夹下:</p>
<p><code>sqlite3 edgemgmt3.db .dump &gt; edgemgmt.sql</code></p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/8e6507ae5e19660f0f702e0e9ee913b3_1737628695701.png" alt="在这里插入图片描述"></p>
<p>导出数据为sql文件:</p>
<blockquote>
<p>您可以在命令提示符中使用 SQLite .dump 点命令来导出完整的数据库在一个文本文件中，如下所示：</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/739e1e3e6559a642b173409950e8d6fd_1737628695701.png" alt="在这里插入图片描述"></p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/91a23d18dbafa9b58c08fd823390acc4_1737628695701.png" alt="在这里插入图片描述"><br>可以看到一大堆的表<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/316e17ad4b7356c8f11398b9b987cd31_1737628695701.png" alt="在这里插入图片描述"></p>
<h2 id="在服务器上安装sqlite3环境并导入sql文件"><a href="#在服务器上安装sqlite3环境并导入sql文件" class="headerlink" title="在服务器上安装sqlite3环境并导入sql文件"></a>在服务器上安装sqlite3环境并导入sql文件</h2><p><code>sqlite3 edgemgmt3.db &lt; edgemgmt-sqlite3.sql</code></p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><h2 id="用navicat或者命令去查看即可。"><a href="#用navicat或者命令去查看即可。" class="headerlink" title="用navicat或者命令去查看即可。"></a>用navicat或者命令去查看即可。</h2><p>开通了个微信公众号：<br>搜索： 怒放de每一天<br>后续可能不定时推送相关文章，期待和大家一起成长！！</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/f793673c0dac276d34b33e56aa4eafaa_1737631899169.png" alt="在这里插入图片描述"></p>
<hr>
<p>大功告成!!</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2022/11/24/java%E7%BB%98%E5%88%B6%E6%A0%87%E6%B3%A8%E6%A1%86%EF%BC%8C%E6%B3%A8%E5%86%8C%E5%AD%97%E4%BD%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/11/24/java%E7%BB%98%E5%88%B6%E6%A0%87%E6%B3%A8%E6%A1%86%EF%BC%8C%E6%B3%A8%E5%86%8C%E5%AD%97%E4%BD%93/" class="post-title-link" itemprop="url">java绘制标注框，注册字体</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-11-24 09:59:39" itemprop="dateCreated datePublished" datetime="2022-11-24T09:59:39+08:00">2022-11-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java%E5%9F%BA%E7%A1%80-spring%E5%AE%B6%E6%97%8F/" itemprop="url" rel="index"><span itemprop="name">java基础 spring家族</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>10k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>9 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[TOC]</p>
<h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><blockquote>
<p>有个项目需要在java的后台将AI算法的标识框，置信度值，画到上传的报警图片上。以前都在算法部分画，但是效率有点低，所以传过来原始的图片（也会用来训练用）和标识的位置信息移到前端或者java应用端画，但是我这边又有推送给第三方平台的业务，不得不在java端画了。 （“前些天发现了一个巨牛的人工智能学习网站，通俗易懂，风趣幽默，忍不住分享一下给大家。<a target="_blank" rel="noopener" href="https://www.captainai.net/i690">人工智能入门到精通</a>。”）因此，今天介绍下我这边是如何实现的：</p>
</blockquote>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>测试： 可以使用openCV，但是这个玩意因为引入之后发现jar包太大了，不得不放弃了，使用java自带的画笔<code>Graphics2D</code>去实现，画出来后保存到本地查看效果。<br>生产： 生产上，不需要保存本地了，直接将原始图片画完标识框等信息，返回base64推送给第三方接口就可了。</p>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><h3 id="1-注册字体"><a href="#1-注册字体" class="headerlink" title="1.注册字体"></a>1.注册字体</h3><p>这个纯属经验，以前遇到windows上可以使用微软雅黑，linux不可以的情况，一种方式是将windows的字体放入linux系统上，但是对于已经部署的项目来说不是很友好，另一种方式是将微软雅黑字体放入java项目的resource文件下，然后注册进去，我是用的这种方式：<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/ce358c806ff52410c1cd08599437f048_1737628705643.png" alt="在这里插入图片描述"><br>可以在这个<a target="_blank" rel="noopener" href="https://www.3w2n.com/download/1447.html">网站</a>现在微软雅黑字体，重命名即可。<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/a51ff7bbe90e2d91cbaa67ab65fde2fd_1737628705643.png" alt="在这里插入图片描述"><br>代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InitFontUtil</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册字体</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Object&gt; <span class="title function_">getGraphicsFontAndEnv</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">GraphicsEnvironment</span> <span class="variable">localGraphicsEnvironment</span> <span class="operator">=</span> GraphicsEnvironment.getLocalGraphicsEnvironment();</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">Font</span> <span class="variable">font</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Font</span> <span class="variable">font30</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="comment">//        if(isWindows())&#123;</span></span><br><span class="line"><span class="comment">//            String typeface = &quot;Microsoft YaHe&quot;;</span></span><br><span class="line"><span class="comment">//            return  new Font(typeface, Font.BOLD, 24);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//            if (localGraphicsEnvironment.getAvailableFontFamilyNames() == null || localGraphicsEnvironment.getAvailableFontFamilyNames().length == 0) &#123;</span></span><br><span class="line">            font = Font.createFont(Font.TRUETYPE_FONT, InitFontUtil.class.getResourceAsStream(<span class="string">&quot;/msyhbd.ttf&quot;</span>));</span><br><span class="line">            font30 = Font.createFont(Font.TRUETYPE_FONT, InitFontUtil.class.getResourceAsStream(<span class="string">&quot;/msyhbd.ttf&quot;</span>));</span><br><span class="line">            font = font.deriveFont(Font.BOLD, <span class="number">24f</span>);</span><br><span class="line">            font30 = font30.deriveFont(Font.BOLD, <span class="number">30f</span>);</span><br><span class="line">            localGraphicsEnvironment.registerFont(font);</span><br><span class="line">            localGraphicsEnvironment.registerFont(font30);</span><br><span class="line">            map.put(<span class="string">&quot;font24&quot;</span>, font);</span><br><span class="line">            map.put(<span class="string">&quot;font30&quot;</span>, font30);</span><br><span class="line">            map.put(<span class="string">&quot;env&quot;</span>, localGraphicsEnvironment);</span><br><span class="line"><span class="comment">//            &#125; else &#123;</span></span><br><span class="line"><span class="comment">//                if (!isWindows()) &#123;</span></span><br><span class="line"><span class="comment">//                    Font[] allFonts = localGraphicsEnvironment.getAllFonts();</span></span><br><span class="line"><span class="comment">//                    if (allFonts != null &amp;&amp; allFonts.length &gt; 0) &#123;</span></span><br><span class="line"><span class="comment">//                        Font nowFont = allFonts[0];</span></span><br><span class="line"><span class="comment">//                        return nowFont;</span></span><br><span class="line"><span class="comment">//                    &#125;</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (FontFormatException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 是否是windows系统</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isWindows</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> System.getProperty(<span class="string">&quot;os.name&quot;</span>).toUpperCase().indexOf(<span class="string">&quot;WINDOWS&quot;</span>) &gt;= <span class="number">0</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-绘制标注框保存文本"><a href="#2-绘制标注框保存文本" class="headerlink" title="2.绘制标注框保存文本"></a>2.绘制标注框保存文本</h3><p>PositionDto 标注框位置信息实体</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.edgemgmt.system.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PositionDto</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal x;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal w;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal h;</span><br><span class="line">    <span class="keyword">private</span> String txt;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal y;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal conf;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> BigDecimal <span class="title function_">getX</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setX</span><span class="params">(BigDecimal x)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> BigDecimal <span class="title function_">getW</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> w;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setW</span><span class="params">(BigDecimal w)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.w = w;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> BigDecimal <span class="title function_">getH</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> h;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setH</span><span class="params">(BigDecimal h)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.h = h;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTxt</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> txt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTxt</span><span class="params">(String txt)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.txt = txt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> BigDecimal <span class="title function_">getY</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setY</span><span class="params">(BigDecimal y)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> BigDecimal <span class="title function_">getConf</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> conf;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setConf</span><span class="params">(BigDecimal conf)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.conf = conf;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;PositionDto&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;x=&quot;</span> + x +</span><br><span class="line">                <span class="string">&quot;, w=&quot;</span> + w +</span><br><span class="line">                <span class="string">&quot;, h=&quot;</span> + h +</span><br><span class="line">                <span class="string">&quot;, txt=&#x27;&quot;</span> + txt + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, y=&quot;</span> + y +</span><br><span class="line">                <span class="string">&quot;, conf=&quot;</span> + conf +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ImageBase64Utils  画框的工具类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.edgemgmt.system.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.TypeReference;</span><br><span class="line"><span class="keyword">import</span> com.edgemgmt.system.domain.PositionDto;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.codec.binary.Base64;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> sun.font.FontDesignMetrics;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Type;</span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> //img = cv2.rectangle(</span></span><br><span class="line"><span class="comment">        //        img,</span></span><br><span class="line"><span class="comment">        //        (int(x * width), int(y * height)),</span></span><br><span class="line"><span class="comment">        //        (int(x * width + w * width), int(y * height + h * height)),</span></span><br><span class="line"><span class="comment">        //        (0, 0, 255),</span></span><br><span class="line"><span class="comment">        //        5</span></span><br><span class="line"><span class="comment">        //      )</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImageBase64Utils</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(ImageBase64Utils.class);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">frefix</span> <span class="operator">=</span> <span class="string">&quot;png&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">typeface</span> <span class="operator">=</span> <span class="string">&quot;Microsoft YaHei&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//[&#123;&quot;txt&quot;:&quot;异常烟火&quot;,&quot;w&quot;:0.18281249701976776,&quot;h&quot;:0.3125,&quot;x&quot;:0.08124999701976776,&quot;y&quot;:0.42934781312942505,&quot;conf&quot;:0.8802329301834106&#125;]</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\002.jpg&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;[&#123;\&quot;txt\&quot;:\&quot;人员打电话\&quot;,\&quot;w\&quot;:0.03072916716337204,\&quot;h\&quot;:0.08796296268701553,\&quot;x\&quot;:0.5708333253860474,\&quot;y\&quot;:0.39629629254341125,\&quot;conf\&quot;:0.7689861059188843&#125;,&#123;\&quot;txt\&quot;:\&quot;人员打电话\&quot;,\&quot;w\&quot;:0.05104166641831398,\&quot;h\&quot;:0.10555555671453476,\&quot;x\&quot;:0.5510416626930237,\&quot;y\&quot;:0.3444444537162781,\&quot;conf\&quot;:0.8071668148040771&#125;]&quot;</span>;</span><br><span class="line">       <span class="comment">//String s1 = &quot;[&#123;\&quot;txt\&quot;:\&quot;未戴口罩\&quot;,\&quot;w\&quot;:0.07187499850988388,\&quot;h\&quot;:0.17499999701976776,\&quot;x\&quot;:0.6848958134651184,\&quot;y\&quot;:0.19722221791744232,\&quot;conf\&quot;:0.8080925941467285&#125;]&quot;;</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> getBase64FromFile(file, s);</span><br><span class="line">        log.info(s1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getBase64FromFile</span><span class="params">(File file, String positionJsonStr)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">BufferedImage</span> <span class="variable">bimg</span> <span class="operator">=</span> ImageIO.read(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file));</span><br><span class="line">            <span class="comment">//大小</span></span><br><span class="line">            <span class="type">long</span> <span class="variable">size</span> <span class="operator">=</span> file.length() / <span class="number">1024</span>;</span><br><span class="line">            <span class="comment">// 宽度</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> bimg.getWidth();</span><br><span class="line">            <span class="comment">// 高度</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> bimg.getHeight();</span><br><span class="line">            <span class="type">Graphics2D</span> <span class="variable">g2d</span> <span class="operator">=</span> getG2d(bimg);</span><br><span class="line">            log.info(<span class="string">&quot;图片大小：&#123;&#125; kb；图片宽度：&#123;&#125; 像素；图片高度：&#123;&#125; 像素&quot;</span>, size, width, height);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> convertBase64FromImage(bimg, width, height, g2d, positionJsonStr);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//BufferedImage 转base64</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getBase64FromImage</span><span class="params">(BufferedImage img)</span> &#123;</span><br><span class="line">        <span class="type">ByteArrayOutputStream</span> <span class="variable">stream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 设置图片的格式</span></span><br><span class="line">            ImageIO.write(img, <span class="string">&quot;jpg&quot;</span>, stream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">byte</span>[] bytes = Base64.encodeBase64(stream.toByteArray());</span><br><span class="line">        <span class="type">String</span> <span class="variable">base64</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;data:image/jpeg;base64,&quot;</span> + base64;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">convertBase64FromImage</span><span class="params">(BufferedImage bimg, <span class="type">int</span> width, <span class="type">int</span> height, Graphics2D g2d, String s)</span> &#123;</span><br><span class="line">        <span class="type">Type</span> <span class="variable">type</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TypeReference</span>&lt;List&lt;PositionDto&gt;&gt;() &#123;</span><br><span class="line">        &#125;.getType();</span><br><span class="line">        List&lt;PositionDto&gt; list = JSON.parseObject(s, type);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">            <span class="type">PositionDto</span> <span class="variable">item</span> <span class="operator">=</span> list.get(i);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//获取 标注框的 起点（x，y）</span></span><br><span class="line">            <span class="type">BigDecimal</span> <span class="variable">boxX</span> <span class="operator">=</span> item.getX().multiply(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(width));</span><br><span class="line">            <span class="type">BigDecimal</span> <span class="variable">boxY</span> <span class="operator">=</span> item.getY().multiply(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(height));</span><br><span class="line">            <span class="comment">//获取 标注框的 宽度和高度</span></span><br><span class="line">            <span class="type">BigDecimal</span> <span class="variable">boxWidth</span> <span class="operator">=</span> (item.getW()).multiply(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(width));</span><br><span class="line">            <span class="type">BigDecimal</span> <span class="variable">boxHeight</span> <span class="operator">=</span> (item.getH()).multiply(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(height));</span><br><span class="line">            <span class="comment">// 标注框设置宽度</span></span><br><span class="line">            g2d.setStroke(<span class="keyword">new</span> <span class="title class_">BasicStroke</span>(<span class="number">5</span>));</span><br><span class="line">            g2d.setColor(Color.RED);</span><br><span class="line">            <span class="comment">//绘制标注框</span></span><br><span class="line">            g2d.drawRect(boxX.intValue(), boxY.intValue(), boxWidth.intValue(), boxHeight.intValue() - <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//绘制文字背景</span></span><br><span class="line">            <span class="comment">//            //获取文字 起点 （x,y）</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">fontBgX</span> <span class="operator">=</span> boxX.intValue();</span><br><span class="line">            <span class="type">int</span> <span class="variable">fontBgY</span> <span class="operator">=</span> boxY.intValue() - <span class="number">3</span>;</span><br><span class="line"><span class="comment">//            Font font = new Font(typeface, Font.BOLD, 30);</span></span><br><span class="line">            Map&lt;String, Object&gt; graphicsFontAndEnv = InitFontUtil.getGraphicsFontAndEnv();</span><br><span class="line">            <span class="type">Font</span> <span class="variable">font</span> <span class="operator">=</span> (Font) graphicsFontAndEnv.get(<span class="string">&quot;font30&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> item.getConf().setScale(<span class="number">2</span>, BigDecimal.ROUND_DOWN).toString();</span><br><span class="line">            <span class="type">FontDesignMetrics</span> <span class="variable">metrics</span> <span class="operator">=</span> FontDesignMetrics.getMetrics(font);</span><br><span class="line">            <span class="type">int</span> <span class="variable">contentWidth</span> <span class="operator">=</span> getWordWidth(font, content);<span class="comment">//计算文字的宽</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">contentHeight</span> <span class="operator">=</span> metrics.getHeight();<span class="comment">//计算高</span></span><br><span class="line"></span><br><span class="line">            g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);</span><br><span class="line">            g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER));</span><br><span class="line">            <span class="comment">//设置背影为黑色</span></span><br><span class="line">            g2d.setColor(Color.BLACK);</span><br><span class="line">            g2d.fillRect(fontBgX, fontBgY - <span class="number">30</span>, contentWidth, <span class="number">30</span>);</span><br><span class="line">            <span class="comment">//绘制文字的底框</span></span><br><span class="line">            g2d.setFont(font);</span><br><span class="line">            g2d.setColor(Color.WHITE);</span><br><span class="line">            g2d.drawString(content, fontBgX, fontBgY - <span class="number">3</span>);<span class="comment">//图片上写文字</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 释放对象</span></span><br><span class="line">        g2d.dispose();</span><br><span class="line">        <span class="type">String</span> <span class="variable">base64FromImage</span> <span class="operator">=</span> getBase64FromImage(bimg);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> upload(bimg);</span><br><span class="line">            writeToLocal(<span class="string">&quot;D://test&quot;</span> + <span class="number">4</span> + <span class="string">&quot;.png&quot;</span>, inputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> base64FromImage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//字体的一段字符串的宽</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getWordWidth</span><span class="params">(Font font, String content)</span> &#123;</span><br><span class="line">        <span class="type">FontDesignMetrics</span> <span class="variable">metrics</span> <span class="operator">=</span> FontDesignMetrics.getMetrics(font);</span><br><span class="line">        <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; content.length(); i++) &#123;</span><br><span class="line">            width += metrics.charWidth(content.charAt(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> width;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">writeToLocal</span><span class="params">(String destination, InputStream input)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">int</span> index;</span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">downloadFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(destination);</span><br><span class="line">        <span class="keyword">while</span> ((index = input.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            downloadFile.write(bytes, <span class="number">0</span>, index);</span><br><span class="line">            downloadFile.flush();</span><br><span class="line">        &#125;</span><br><span class="line">        downloadFile.close();</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> InputStream <span class="title function_">upload</span><span class="params">(BufferedImage bimg)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ByteArrayOutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">        <span class="comment">//保存新图片</span></span><br><span class="line">        ImageIO.write(bimg, frefix, os);</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(os.toByteArray());</span><br><span class="line">        <span class="keyword">return</span> is;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Graphics2D <span class="title function_">getG2d</span><span class="params">(BufferedImage bimg)</span> &#123;</span><br><span class="line">        <span class="comment">//得到Graphics2D 对象</span></span><br><span class="line">        <span class="type">Graphics2D</span> <span class="variable">g2d</span> <span class="operator">=</span> (Graphics2D) bimg.getGraphics();</span><br><span class="line">        <span class="comment">// 抗锯齿</span></span><br><span class="line">        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);</span><br><span class="line">        <span class="keyword">return</span> g2d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>这个类有3个作用</p>
<ul>
<li>绘制标注框，字体背景图和字体。</li>
<li>写入绘制后的图片到本地</li>
<li>将绘制后的图片转成base64</li>
</ul>
<h3 id="3-效果如下"><a href="#3-效果如下" class="headerlink" title="3.效果如下:"></a>3.效果如下:</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/ceba2e73ebddbb4716d31a3902bcba28_1737628705643.png" alt="在这里插入图片描述"><br> 控制台也打印了base64字符，以后前端可以直接用base64显示图片：<br> <img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/60881639f1c72add97cb14d40068ad8e_1737628705643.png" alt="在这里插入图片描述"></p>
<hr>
<p>自此，java就实现了标注框的功能。<br>在需要调用的地方直接这样调用即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//画框的base64赋值</span></span><br><span class="line"><span class="comment">//原始图片 sysEventRecord.getPicUrl()</span></span><br><span class="line"><span class="comment">//标注框的位置信息 sysEventRecord.getPosition() </span></span><br><span class="line">sysEventRecordVo.setPicUrlBase64(ImageBase64Utils.getBase64FromFile(<span class="keyword">new</span> <span class="title class_">File</span>(sysEventRecord.getPicUrl()), sysEventRecord.getPosition()));</span><br></pre></td></tr></table></figure>




<hr>
<p>开通了个微信公众号：<br>搜索： 怒放de每一天<br>后续可能不定时推送相关文章，期待和大家一起成长！！</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/f793673c0dac276d34b33e56aa4eafaa_1737631899169.png" alt="在这里插入图片描述"></p>
<hr>
<p>大功告成!!</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2022/11/15/%E6%9F%A5%E7%9C%8Bdocker%20run%20%E6%97%B6%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/11/15/%E6%9F%A5%E7%9C%8Bdocker%20run%20%E6%97%B6%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">查看docker run 时启动命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-11-15 10:10:25" itemprop="dateCreated datePublished" datetime="2022-11-15T10:10:25+08:00">2022-11-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>317</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[TOC]</p>
<h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><blockquote>
<p>以前遇到过一个问题，之前用的docker run启动的命令，但是后来忘了有没有挂载了，虽然可以通过history命令找到，但是时间很久了的话，不会显示。不过，可以<code>使用unlike命令</code>，反推出之前的docker run具体 参数。</p>
</blockquote>
<h2 id="步骤一-安装unlike命令"><a href="#步骤一-安装unlike命令" class="headerlink" title="步骤一:  安装unlike命令"></a>步骤一:  安装unlike命令</h2><blockquote>
<p>我用的是centos7环境<br>本身不带<code>unlike</code>命令好像是python的库，可以用python去装下。<br>执行下面的命令安装unlike<br><code>pip install runlike</code></p>
</blockquote>
<h2 id="步骤二-查看容器id"><a href="#步骤二-查看容器id" class="headerlink" title="步骤二: 查看容器id"></a>步骤二: 查看容器id</h2><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/7a41d38bc70fe9e5258bfb7239f9612d_1737628717192.png" alt="在这里插入图片描述"><br>后面我以mysql容器为例</p>
<h2 id="步骤三-执行-runlike-p-容器id"><a href="#步骤三-执行-runlike-p-容器id" class="headerlink" title="步骤三: 执行 runlike -p 容器id"></a>步骤三: 执行 runlike -p 容器id</h2><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/40aa28ec6a895343afd2d6d66d8f551b_1737628717192.jpeg" alt="在这里插入图片描述"><br>执行完<br><code>runlike -p 7594376f0366</code><br>命令后，可以看到之前挂载的容器卷和暴露的端口等已经显示了奥。</p>
<hr>
<p>大功告成！！</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2022/10/19/SpringBoot%EF%BC%9ANetty-SocketIO%20+%20VUE%EF%BC%9ASocketIO%E5%AE%9E%E7%8E%B0%E5%89%8D%E5%90%8E%E7%AB%AF%E5%AE%9E%E6%97%B6%E5%8F%8C%E5%90%91%E9%80%9A%E4%BF%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/10/19/SpringBoot%EF%BC%9ANetty-SocketIO%20+%20VUE%EF%BC%9ASocketIO%E5%AE%9E%E7%8E%B0%E5%89%8D%E5%90%8E%E7%AB%AF%E5%AE%9E%E6%97%B6%E5%8F%8C%E5%90%91%E9%80%9A%E4%BF%A1/" class="post-title-link" itemprop="url">SpringBoot：Netty-SocketIO + VUE：SocketIO实现前后端实时双向通信</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-10-19 09:38:10" itemprop="dateCreated datePublished" datetime="2022-10-19T09:38:10+08:00">2022-10-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/spring%E5%AE%B6%E6%97%8F/" itemprop="url" rel="index"><span itemprop="name">spring家族</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>8.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>7 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>



<p>@[TOC]</p>
<blockquote>
<p>转载:<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/nannan7777/article/details/115676900">https://blog.csdn.net/nannan7777/article/details/115676900</a></p>
</blockquote>
<h2 id="一、WebSocket简介"><a href="#一、WebSocket简介" class="headerlink" title="一、WebSocket简介"></a>一、WebSocket简介</h2><p>WebSocket是HTML5新增的一种全双工通信协议，客户端和服务端基于TCP握手连接成功后，两者之间就可以建立持久性的连接，实现双向数据传输。</p>
<p>传统HTTP和WebSocket的不同点：<br>HTTP是单向数据流，客户端向服务端发送请求，服务端响应并返回数据；<br>WebSocket连接后可以实现客户端和服务端双向数据传递。<br>由于是新的协议，HTTP的url使用”http&#x2F;&#x2F;“或”https&#x2F;&#x2F;“开头；WebSocket的url使用”ws&#x2F;&#x2F;“开头。</p>
<p>传统HTTP和WebSocket的相同点：<br>都需要建立TCP连接，都是属于七层协议中的应用层协议。</p>
<p>传统通过HTTP请求模拟双向数据传递的方式是http+Polling(轮询)和http+Long Polling(长轮询)。轮询(Polling)就是客户端定时发送get&#x2F;post请求向服务端请求数据，这种方式能满足一定的需求，但是存在一些问题，例如如果服务端没有新数据，客户端请求到的数据都是旧数据，这样不仅浪费了带宽资源，而且占用CPU内存。</p>
<p>LongPolling(长轮询)就是在Polling上的一些改进，即如果服务端没有新数据返回给客户端，服务端会把当前的这个服务请求保持住(hold)，当有新数据时则返回新数据，如果超过一定时间服务端仍没有新数据，则服务端返回超时请求，客户端接收到超时请求，然后在发送服务请求，一直循环执行。</p>
<p>虽然一定程度解决了带宽资源和CPU内存浪费情况，但是当服务端数据更新很快，这和轮询（Polling）没有本质上的区别，而且http数据包的头部数据量往往很大（通常有400多个字节），但是真正被服务器需要的数据却很少（有时只有10个字节左右），这样的数据包在网络上周期性的传输，难免对网络带宽是一种浪费。在高并发的情况下，这对服务器是一个很大的挑战。综合上面轮询的种种问题，WebSocket全双工通信成为一种很好的解决策略。</p>
<h2 id="二、Netty-SocketIO-服务端Demo"><a href="#二、Netty-SocketIO-服务端Demo" class="headerlink" title="二、Netty-SocketIO 服务端Demo"></a>二、Netty-SocketIO 服务端Demo</h2><p>实际应用中，如果需要WebSocket进行双向数据通信，SocketIO是一个非常好的选择。它是用JavaScript语言实现的WebSocket框架，简单易用，稳定可靠。SocketIO不是WebSocket，它只是将WebSocket和轮询 （Polling）机制以及其它的实时通信方式封装成了通用的接口，并且在服务端实现了这些实时机制的相应代码。也就是说，WebSocket仅仅是SocketIO实现实时通信的一个子集。</p>
<p>常用的方式是前端使用SocketIO，后端使用node.js实现SocketIO的接口。但由于目前服务端使用JAVA，所以我使用的是Netty-SocketIO开源库，基于Netty网络库编写的WebSocket实现。</p>
<p>下面是从项目工程中提炼出的Netty-SocketIO服务端Demo：</p>
<p>首先在pom.xml中添加相应的依赖库：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.corundumstudio.socketio<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>netty-socketio<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.socket<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>socket.io-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="1、添加配置类SocketIOServer"><a href="#1、添加配置类SocketIOServer" class="headerlink" title="1、添加配置类SocketIOServer"></a>1、添加配置类SocketIOServer</h3><p>添加SocketIO配置类NettySocketConfig.java，用于填写nettysocket的相关配置信息， 注册netty-socketio服务端，相关代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> nssc.simulation.DataTransmission.socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.corundumstudio.socketio.SocketIOServer;</span><br><span class="line"><span class="keyword">import</span> com.corundumstudio.socketio.annotation.SpringAnnotationScanner;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NettySocketConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SocketIOServer <span class="title function_">socketIOServer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 创建Socket，并设置监听端口</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        com.corundumstudio.socketio.<span class="type">Configuration</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">com</span>.corundumstudio.socketio.Configuration();</span><br><span class="line">        <span class="comment">// 设置主机名，默认是0.0.0.0</span></span><br><span class="line">        <span class="comment">// config.setHostname(&quot;localhost&quot;);</span></span><br><span class="line">        <span class="comment">// 设置监听端口</span></span><br><span class="line">        config.setPort(<span class="number">9090</span>);</span><br><span class="line">        <span class="comment">// 协议升级超时时间（毫秒）, 默认10000, HTTP握手升级为ws协议超时时间</span></span><br><span class="line">        config.setUpgradeTimeout(<span class="number">10000</span>);</span><br><span class="line">        <span class="comment">// Ping消息间隔（毫秒）, 默认25000, 客户端向服务器发送一条心跳消息间隔</span></span><br><span class="line">        config.setPingInterval(<span class="number">60000</span>);</span><br><span class="line">        <span class="comment">// Ping消息超时时间（毫秒）, 默认60000, 这个时间间隔内没有接收到心跳消息就会发送超时事件</span></span><br><span class="line">        config.setPingTimeout(<span class="number">180000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="type">SocketIOServer</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SocketIOServer</span>(config);</span><br><span class="line">        <span class="keyword">return</span> server;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SpringAnnotationScanner <span class="title function_">springAnnotationScanner</span><span class="params">(SocketIOServer socketServer)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SpringAnnotationScanner</span>(socketServer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="2、添加消息结构类MessageInfo"><a href="#2、添加消息结构类MessageInfo" class="headerlink" title="2、添加消息结构类MessageInfo"></a>2、添加消息结构类MessageInfo</h3><p>添加消息结构类MessageInfo.java，用于接收前台用户信息，相关代码如下：<br>消息类型按需自己设计，这里我定义的是byte[]字节数组。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> nssc.simulation.DataTransmission.socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.ToString;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageInfoStructure</span> &#123;</span><br><span class="line">    <span class="comment">//消息类型</span></span><br><span class="line">    <span class="keyword">private</span> String msgType;</span><br><span class="line">    <span class="comment">//消息内容</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] msgContent;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMsgType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> msgType;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMsgType</span><span class="params">(String msgType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.msgType = msgType;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] getMsgContent() &#123;</span><br><span class="line">        <span class="keyword">return</span> msgContent;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMsgContent</span><span class="params">(<span class="type">byte</span>[] msgContent)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.msgContent = msgContent;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3、添加消息处理类MessageEventHandler"><a href="#3、添加消息处理类MessageEventHandler" class="headerlink" title="3、添加消息处理类MessageEventHandler"></a>3、添加消息处理类MessageEventHandler</h3><p>添加消息处理类MessageEventHandler.Java，用于前后端消息事件的交互，相关代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> nssc.simulation.DataTransmission.socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.corundumstudio.socketio.AckRequest;</span><br><span class="line"><span class="keyword">import</span> com.corundumstudio.socketio.HandshakeData;</span><br><span class="line"><span class="keyword">import</span> com.corundumstudio.socketio.SocketIOClient;</span><br><span class="line"><span class="keyword">import</span> com.corundumstudio.socketio.annotation.OnConnect;</span><br><span class="line"><span class="keyword">import</span> com.corundumstudio.socketio.annotation.OnDisconnect;</span><br><span class="line"><span class="keyword">import</span> com.corundumstudio.socketio.annotation.OnEvent;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> nssc.simulation.EmulationDataTransmission.udp.UdpCommonSendSave;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentMap;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NettySocketEventHandler</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ConcurrentMap&lt;String, SocketIOClient&gt; socketIOClientMap =</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//socket事件消息接收入口</span></span><br><span class="line">    <span class="meta">@OnEvent(value = &quot;message_event&quot;)</span> <span class="comment">//value值与前端自行商定</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onEvent</span><span class="params">(SocketIOClient client, AckRequest ackRequest, MessageInfoStructure data)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//根据msgType类别进行数据类型判断,</span></span><br><span class="line">        <span class="keyword">if</span> (data.getMsgType().equals(<span class="string">&quot;XXXXXData&quot;</span>))&#123; <span class="comment">//数据类型标识</span></span><br><span class="line">            client.sendEvent(<span class="string">&quot;message_event&quot;</span>, <span class="string">&quot;已成功接收数据&quot;</span>); <span class="comment">//向前端发送接收数据成功标识</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">//data.getMsgContent()获取前端推送数据</span></span><br><span class="line">            <span class="comment">//......这里可填写接收数据后的相关业务逻辑代码</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//socket添加@OnDisconnect事件，客户端断开连接时调用，刷新客户端信息</span></span><br><span class="line">    <span class="meta">@OnDisconnect</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDisconnect</span><span class="params">(SocketIOClient client)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;--------------------客户端已断开连接--------------------&quot;</span>);</span><br><span class="line">        client.disconnect();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//socket添加connect事件，当客户端发起连接时调用</span></span><br><span class="line">    <span class="meta">@OnConnect</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onConnect</span><span class="params">(SocketIOClient client)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (client != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">HandshakeData</span> <span class="variable">client_mac</span> <span class="operator">=</span> client.getHandshakeData();</span><br><span class="line">            <span class="type">String</span> <span class="variable">mac</span> <span class="operator">=</span> client_mac.getUrl();</span><br><span class="line">            <span class="comment">//存储SocketIOClient，用于向不同客户端发送消息</span></span><br><span class="line">            socketIOClientMap.put(mac, client);</span><br><span class="line"></span><br><span class="line">            log.info(<span class="string">&quot;--------------------客户端连接成功---------------------&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.error(<span class="string">&quot;客户端为空&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 广播消息 函数可在其他类中调用</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sendBroadcast</span><span class="params">(<span class="type">byte</span>[] data)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (SocketIOClient client : socketIOClientMap.values()) &#123; <span class="comment">//向已连接的所有客户端发送数据,map实现客户端的存储</span></span><br><span class="line">            <span class="keyword">if</span> (client.isChannelOpen()) &#123;</span><br><span class="line">                client.sendEvent(<span class="string">&quot;message_event&quot;</span>, data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4、添加启动类ServerRunner"><a href="#4、添加启动类ServerRunner" class="headerlink" title="4、添加启动类ServerRunner"></a>4、添加启动类ServerRunner</h3><p>在项目服务启动的时候启动socket.io服务, 新增启动类ServerRunner.java，相关代码如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package nssc.simulation.DataTransmission.socket;</span><br><span class="line"></span><br><span class="line">import com.corundumstudio.socketio.SocketIOServer;</span><br><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.boot.CommandLineRunner;</span><br><span class="line">import org.springframework.core.annotation.Order;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">@Order(value=1)</span><br><span class="line">@Slf4j</span><br><span class="line">public class NettySocketRunnable implements CommandLineRunner &#123;</span><br><span class="line">    private final SocketIOServer server;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    public NettySocketRunnable(SocketIOServer server) &#123;</span><br><span class="line">        this.server = server;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run(String... args) throws Exception &#123;</span><br><span class="line">        log.info(&quot;--------------------前端socket.io通信启动成功！---------------------&quot;);</span><br><span class="line">        server.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="三、SocketIO-客户端Demo"><a href="#三、SocketIO-客户端Demo" class="headerlink" title="三、SocketIO 客户端Demo"></a>三、SocketIO 客户端Demo</h2><p>客户端Demo这里参考了Github上的官方开源库SocketIO，按照项目所需功能可以后续进行修改，相关资源链接为：<a target="_blank" rel="noopener" href="https://download.csdn.net/download/nannan7777/16663466">https://download.csdn.net/download/nannan7777/16663466</a><br>其主要功能代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;js/socket.io/socket.io.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;js/moment.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;http://code.jquery.com/jquery-1.10.1.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 前端js的 socket.emit(&quot;事件名&quot;,&quot;参数数据&quot;)方法，是触发后端自定义消息事件的时候使用的,</span></span><br><span class="line"><span class="comment">* 前端js的 socket.on(&quot;事件名&quot;,匿名函数(服务器向客户端发送的数据))为监听服务器端的事件</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"></span><br><span class="line"><span class="type">var</span> <span class="variable">socket</span> <span class="operator">=</span>  io.connect(<span class="string">&#x27;http://localhost:9092&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听服务器连接事件</span></span><br><span class="line">socket.on(<span class="string">&#x27;connect&#x27;</span>, function() &#123;</span><br><span class="line">	output(<span class="string">&#x27;&lt;span class=&quot;connect-msg&quot;&gt;Client has connected to the server!&lt;/span&gt;&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//监听服务器端发送消息事件</span></span><br><span class="line">socket.on(<span class="string">&#x27;message_event&#x27;</span>, function(data) &#123; </span><br><span class="line">  message(data)</span><br><span class="line">  <span class="comment">//console.log(&quot;服务器发送的消息是：&quot;+data); </span></span><br><span class="line">&#125;); </span><br><span class="line"><span class="comment">//监听服务器关闭服务事件</span></span><br><span class="line">socket.on(<span class="string">&#x27;disconnect&#x27;</span>, function() &#123;</span><br><span class="line">	output(<span class="string">&#x27;&lt;span class=&quot;disconnect-msg&quot;&gt;The client has disconnected!&lt;/span&gt;&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">              function <span class="title function_">sendDisconnect</span><span class="params">()</span> &#123;</span><br><span class="line">                      socket.disconnect();</span><br><span class="line">              &#125;</span><br><span class="line"><span class="comment">//点击发送消息触发 </span></span><br><span class="line">function <span class="title function_">sendMessage</span><span class="params">()</span> &#123;</span><br><span class="line">                      <span class="type">var</span> <span class="variable">message</span> <span class="operator">=</span> $(<span class="string">&#x27;#msg&#x27;</span>).val();</span><br><span class="line">                      $(<span class="string">&#x27;#msg&#x27;</span>).val(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">                      <span class="type">var</span> <span class="variable">jsonObject</span> <span class="operator">=</span> &#123;userName: userName,</span><br><span class="line">                                        message: message&#125;;</span><br><span class="line">                      socket.emit(<span class="string">&#x27;chatevent&#x27;</span>, jsonObject);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/0c750e684f984ea63635c3c66a996fc6_1737628717192.png" alt="在这里插入图片描述"></p>
<p>至此，SpringBoot：Netty-SocketIO + VUE：SocketIO实现前后端实时双向通信的示例功能已总结完毕。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2022/09/22/canvas%E4%BB%8E%E5%9F%BA%E7%A1%80%E4%BA%86%E8%A7%A3%20--%20%E5%88%B0%E7%AE%97%E6%B3%95%E6%A0%87%E6%B3%A8%E6%A1%86%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/22/canvas%E4%BB%8E%E5%9F%BA%E7%A1%80%E4%BA%86%E8%A7%A3%20--%20%E5%88%B0%E7%AE%97%E6%B3%95%E6%A0%87%E6%B3%A8%E6%A1%86%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">canvas从基础了解 -- 到算法标注框实现</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-09-22 16:23:55" itemprop="dateCreated datePublished" datetime="2022-09-22T16:23:55+08:00">2022-09-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>12k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>11 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[TOC]</p>
<h2 id="canvas必备基础"><a href="#canvas必备基础" class="headerlink" title="canvas必备基础"></a>canvas必备基础</h2><p>推荐2个好的学习canvas的地址，一个是mdn的官网，另一个是阮一峰的canvas相关大作。</p>
<p>现在主要针对上面的资料说几点：</p>
<h2 id="canvas的本质"><a href="#canvas的本质" class="headerlink" title="canvas的本质"></a>canvas的本质</h2><p><code>&lt;canvas&gt;</code>元素用于生成图像。它本身就像一个画布，JavaScript 通过操作它的 API，在上面生成图像。它的底层是一个个像素，基本上<canvas>是一个可以用 JavaScript 操作的位图（bitmap）。</p>
<p>它与 SVG 图像的区别在于，<canvas>是脚本调用各种方法生成图像，SVG 则是一个 XML 文件，通过各种子元素生成图像。</p>
<h2 id="绘制图形"><a href="#绘制图形" class="headerlink" title="绘制图形"></a>绘制图形</h2><h3 id="绘制矩形"><a href="#绘制矩形" class="headerlink" title="绘制矩形"></a>绘制矩形</h3><p>下面展示<br>    &#x2F;&#x2F;<canvas> 只支持两种形式的图形绘制：矩形和路径（由一系列点连成的线段）<br>    &#x2F;&#x2F; 绘制一个填充的矩形<br>    &#x2F;&#x2F; fillRect(x, y, width, height)<br>    &#x2F;&#x2F;绘制一个矩形的边框<br>    &#x2F;&#x2F; strokeRect(x, y, width, height)<br>    &#x2F;&#x2F; 绘制一个矩形的边框<br>    &#x2F;&#x2F; 清除指定矩形区域，让清除部分完全透明。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: gray;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span> <span class="attr">width</span>=<span class="string">&quot;450&quot;</span> <span class="attr">height</span>=<span class="string">&quot;450&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;application/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//&lt;canvas&gt; 只支持两种形式的图形绘制：矩形和路径（由一系列点连成的线段）</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 绘制一个填充的矩形</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// fillRect(x, y, width, height)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//绘制一个矩形的边框</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// strokeRect(x, y, width, height)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 绘制一个矩形的边框</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 清除指定矩形区域，让清除部分完全透明。</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// clearRect(x, y, width, height)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (canvas.<span class="property">getContext</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="property">fillStyle</span> = <span class="string">&quot;rgb(200,0,0)&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 绘制一个填充的矩形。</span></span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">fillRect</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">55</span>, <span class="number">50</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(0, 0, 200, 0.5)&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 绘制一个矩形的边框</span></span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">strokeRect</span>(<span class="number">130</span>, <span class="number">130</span>, <span class="number">155</span>, <span class="number">150</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//绘制一个空白的矩形</span></span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="property">fillStyle</span> = <span class="string">&#x27;red&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">clearRect</span>(<span class="number">45</span>, <span class="number">45</span>, <span class="number">60</span>, <span class="number">60</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/ff375b5d0568e13eb0b4f7cc3660130e_1737628728337.png" alt="在这里插入图片描述"></p>
<h3 id="绘制三角形"><a href="#绘制三角形" class="headerlink" title="绘制三角形"></a>绘制三角形</h3><p>常用的api<br>以下方法和属性用来绘制路径。</p>
<p>&#96;CanvasRenderingContext2D.beginPath()：开始绘制路径。<br>CanvasRenderingContext2D.closePath()：结束路径，返回到当前路径的起始点，会从当前点到起始点绘制一条直线。如果图形已经封闭，或者只有一个点，那么此方法不会产生任何效果。</p>
<p>CanvasRenderingContext2D.moveTo()：设置路径的起点，即将一个新路径的起始点移动到(x，y)坐标。<br>CanvasRenderingContext2D.lineTo()：使用直线从当前点连接到(x, y)坐标。<br>CanvasRenderingContext2D.fill()：在路径内部填充颜色（默认为黑色）。<br>CanvasRenderingContext2D.stroke()：路径线条着色（默认为黑色）。<br>CanvasRenderingContext2D.fillStyle：指定路径填充的颜色和样式（默认为黑色）。<br>CanvasRenderingContext2D.strokeStyle：指定路径线条的颜色和样式（默认为黑色）。&#96;</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>绘制三角形<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">&quot;draw();&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span> <span class="attr">width</span>=<span class="string">&quot;150&quot;</span> <span class="attr">height</span>=<span class="string">&quot;150&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;application/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (canvas.<span class="property">getContext</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//设置路径的起点，即将一个新路径的起始点移动到(x，y)坐标。</span></span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">moveTo</span>(<span class="number">75</span>, <span class="number">50</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//使用直线从当前点连接到(x, y)坐标。</span></span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">lineTo</span>(<span class="number">100</span>, <span class="number">75</span>);</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">lineTo</span>(<span class="number">100</span>, <span class="number">25</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//在路径内部填充颜色（默认为黑色）</span></span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/8c36852dda87b2c65b92bfba4b5936f9_1737628741036.png" alt="在这里插入图片描述"></p>
<h3 id="绘制圆形"><a href="#绘制圆形" class="headerlink" title="绘制圆形"></a>绘制圆形</h3><p>CanvasRenderingContext2D.arc()：通过指定圆心和半径绘制弧形。<br>CanvasRenderingContext2D.arcTo()：通过指定两根切线和半径绘制弧形。<br>CanvasRenderingContext2D.arc()主要用来绘制圆形或扇形。<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/2fa5f70dc1d1a18418db3cd79a46bdf3_1737628741036.png" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">用arc函数绘制不同的圆弧</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;game&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line"></span><br><span class="line">ctx.<span class="property">filSytle</span> = <span class="string">&quot;rgba(200,200,100,0.6)&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//绘制下半圆</span></span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">beginPath</span>();</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">arc</span>(<span class="number">100</span>,<span class="number">110</span>,<span class="number">50</span>,<span class="number">0</span>,<span class="title class_">Math</span>.<span class="property">PI</span>);</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">closePath</span>();</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">fill</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//绘制上半圆</span></span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">beginPath</span>();</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">arc</span>(<span class="number">100</span>,<span class="number">90</span>,<span class="number">50</span>,<span class="number">0</span>,<span class="title class_">Math</span>.<span class="property">PI</span>,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">closePath</span>();</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">fill</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//绘制左半圆</span></span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">beginPath</span>();</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">arc</span>(<span class="number">230</span>,<span class="number">100</span>,<span class="number">50</span>, <span class="title class_">Math</span>.<span class="property">PI</span>/<span class="number">2</span>,<span class="title class_">Math</span>.<span class="property">PI</span>*<span class="number">3</span>/<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">closePath</span>();</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">fill</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//绘制右半圆</span></span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">beginPath</span>();</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">arc</span>(<span class="number">250</span>, <span class="number">100</span>, <span class="number">50</span> , <span class="title class_">Math</span>.<span class="property">PI</span>*<span class="number">3</span>/<span class="number">2</span>, <span class="title class_">Math</span>.<span class="property">PI</span>/<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">closePath</span>();</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">fill</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘制一个接近于圆的形状</span></span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">beginPath</span>();</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">arc</span>(<span class="number">180</span>, <span class="number">240</span>, <span class="number">50</span> , <span class="title class_">Math</span>.<span class="property">PI</span>*<span class="number">7</span>/<span class="number">6</span>, <span class="title class_">Math</span>.<span class="property">PI</span>*<span class="number">2</span>/<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">closePath</span>();</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">fill</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘制一段小圆弧</span></span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">beginPath</span>();</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">arc</span>(<span class="number">150</span>, <span class="number">250</span>, <span class="number">50</span> , <span class="title class_">Math</span>.<span class="property">PI</span>*<span class="number">7</span>/<span class="number">6</span>, <span class="title class_">Math</span>.<span class="property">PI</span>*<span class="number">2</span>/<span class="number">3</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">closePath</span>();</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">fill</span>();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/26a3cd9b6d0a4bcb25d0ab37ee810a09_1737628741036.png" alt="在这里插入图片描述"></p>
<p>推荐这篇文字介绍的arc参数很详细:<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_29543187/article/details/117211626">Canvas的arc函数绘制圆和图形</a></p>
<h2 id="绘制图像CanvasRenderingContext2D-drawImage"><a href="#绘制图像CanvasRenderingContext2D-drawImage" class="headerlink" title="绘制图像CanvasRenderingContext2D.drawImage()"></a>绘制图像CanvasRenderingContext2D.drawImage()</h2><p>Canvas API 允许将图像文件写入画布，做法是读取图片后，使用drawImage()方法将这张图片放上画布。</p>
<p>CanvasRenderingContext2D.drawImage()有三种使用格式。</p>
<p>ctx.drawImage(image, dx, dy);<br>ctx.drawImage(image, dx, dy, dWidth, dHeight);<br>ctx.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);</p>
<hr>
<p>image：图像元素<br>sx：图像内部的横坐标，用于映射到画布的放置点上。<br>sy：图像内部的纵坐标，用于映射到画布的放置点上。<br>sWidth：图像在画布上的宽度，会产生缩放效果。如果未指定，则图像不会缩放，按照实际大小占据画布的宽度。<br>sHeight：图像在画布上的高度，会产生缩放效果。如果未指定，则图像不会缩放，按照实际大小占据画布的高度。<br>dx：画布内部的横坐标，用于放置图像的左上角<br>dy：画布内部的纵坐标，用于放置图像的右上角<br>dWidth：图像在画布内部的宽度，会产生缩放效果。<br>dHeight：图像在画布内部的高度，会产生缩放效果。</p>
<hr>
<h3 id="图片从顶点铺到画布上"><a href="#图片从顶点铺到画布上" class="headerlink" title="图片从顶点铺到画布上"></a>图片从顶点铺到画布上</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>图像处理<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    ctx.drawImage(image, dx, dy);--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    ctx.drawImage(image, dx, dy, dWidth, dHeight);--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    ctx.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;myCanvas&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// var canvas = document.getElementById(&#x27;myCanvas&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// var ctx = canvas.getContext(&#x27;2d&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// var img = new Image();</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// img.src = &#x27;https://img-home.csdnimg.cn/images/20220921102650.png&#x27;;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// img.onload = function () &#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     ctx.drawImage(img, 0, 0);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// &#125;;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myCanvas&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> image = <span class="keyword">new</span> <span class="title class_">Image</span>(<span class="number">60</span>, <span class="number">45</span>);</span></span><br><span class="line"><span class="language-javascript">    image.<span class="property">onload</span> = drawImageActualSize;</span></span><br><span class="line"><span class="language-javascript">    image.<span class="property">src</span> = <span class="string">&#x27;../images/2.png&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">drawImageActualSize</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        canvas.<span class="property">width</span> = <span class="variable language_">this</span>.<span class="property">naturalWidth</span>;</span></span><br><span class="line"><span class="language-javascript">        canvas.<span class="property">height</span> = <span class="variable language_">this</span>.<span class="property">naturalHeight</span>;</span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">drawImage</span>(<span class="variable language_">this</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">naturalWidth</span>, <span class="variable language_">this</span>.<span class="property">naturalHeight</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/f602daa01f7b1b26214cd91413768fce_1737628741036.png" alt="在这里插入图片描述"></p>
<h3 id="图片从设置（x，y）开始铺到画布上"><a href="#图片从设置（x，y）开始铺到画布上" class="headerlink" title="图片从设置（x，y）开始铺到画布上"></a>图片从设置（x，y）开始铺到画布上</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>practice9-DrawImage<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    *&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span>&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">canvas</span>&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#333333</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">&quot;draw()&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> <span class="attr">height</span>=<span class="string">&quot;600&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> ctx = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;canvas&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (canvas.<span class="property">getContext</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//定义图片</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span></span><br><span class="line"><span class="language-javascript">      img.<span class="property">src</span> = <span class="string">&#x27;../images/2.png&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//确保图片被加载完成</span></span></span><br><span class="line"><span class="language-javascript">      img.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//使用drawImage绘制到画布上面</span></span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">drawImage</span>(<span class="variable language_">this</span>,<span class="number">5</span>,<span class="number">5</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">alert</span>(<span class="string">&#x27;请更新浏览器！！！&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/ff150e13cfbf5656971925d87c607604_1737628741036.png" alt="在这里插入图片描述"></p>
<h3 id="图像定制大小-铺到画布上"><a href="#图像定制大小-铺到画布上" class="headerlink" title="图像定制大小 铺到画布上"></a>图像定制大小 铺到画布上</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>practice9-DrawImage<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    *&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span>&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">canvas</span>&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#333333</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">&quot;draw()&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> <span class="attr">height</span>=<span class="string">&quot;600&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--用法二：定图像的宽度和高度，将图像放大或者缩小--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--context.drawImage(img,x,y,width,height);--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> ctx = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;canvas&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (canvas.<span class="property">getContext</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//定义图片</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span></span><br><span class="line"><span class="language-javascript">      img.<span class="property">src</span> = <span class="string">&#x27;../images/2.png&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//确保图片被加载完成</span></span></span><br><span class="line"><span class="language-javascript">      img.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//使用drawImage绘制到画布上面</span></span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">drawImage</span>(<span class="variable language_">this</span>,<span class="number">50</span>,<span class="number">50</span>,<span class="number">300</span>,<span class="number">300</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">alert</span>(<span class="string">&#x27;请更新浏览器！！！&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/60044e3d614b731ed0465d4d9acb7424_1737628751683.png" alt="在这里插入图片描述"><br>画布是800x600.<br>ctx.drawImage(this,50,50,300,300);图像从(50,50)坐标开始铺图像只显示宽300高300.</p>
<h3 id="绘制图像时候，画布和图像都在动"><a href="#绘制图像时候，画布和图像都在动" class="headerlink" title="绘制图像时候，画布和图像都在动"></a>绘制图像时候，画布和图像都在动</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/ade155ea0cc27ff35a22f64cdddf6ab2_1737628751683.png" alt="在这里插入图片描述"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>practice9-DrawImage<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        *&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">canvas</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#333333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">&quot;draw()&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> <span class="attr">height</span>=<span class="string">&quot;600&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> ctx = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;canvas&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (canvas.<span class="property">getContext</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//定义图片</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span></span><br><span class="line"><span class="language-javascript">            img.<span class="property">src</span> = <span class="string">&#x27;../images/2.png&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//确保图片被加载完成</span></span></span><br><span class="line"><span class="language-javascript">            img.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//使用drawImage绘制到画布上面</span></span></span><br><span class="line"><span class="language-javascript">                ctx.<span class="title function_">drawImage</span>(<span class="variable language_">this</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">50</span>,<span class="number">50</span>,<span class="number">700</span>,<span class="number">500</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&#x27;请更新浏览器！！！&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/b945051f451b0dc714cf316b752b9bae_1737628751683.png" alt="在这里插入图片描述"></p>
<h2 id="绘制文字"><a href="#绘制文字" class="headerlink" title="绘制文字"></a>绘制文字</h2><p><code>CanvasRenderingContext2D.fillText(text, x, y [, maxWidth])</code><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/aa6eb4d365961b931320b41a1379d1e7_1737628751683.png" alt="在这里插入图片描述"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>绘制文字<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;myCanvas&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myCanvas&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//(填充的字符串，横坐标，纵坐标)</span></span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">fillText</span>(<span class="string">&#x27;Hello world&#x27;</span>, <span class="number">50</span>, <span class="number">50</span>);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/a35546bf828be49ee20ca84229d9a90a_1737628751683.png" alt="在这里插入图片描述"></p>
<hr>
<p>好了有了上面的知识后，就开始实战了。</p>
<h2 id="实战-canvas绘制图像并标注算法框"><a href="#实战-canvas绘制图像并标注算法框" class="headerlink" title="实战: canvas绘制图像并标注算法框"></a>实战: canvas绘制图像并标注算法框</h2><p>比如我这里有个算法:<br>格式为:</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var dtcoord <span class="operator">=</span> [&#123;<span class="params">x:</span> <span class="number">50</span>, <span class="params">y:</span> <span class="number">50</span>, <span class="params">w:</span> <span class="number">100</span>, <span class="params">h:</span> <span class="number">100</span>, <span class="params">txt:</span> <span class="string">&quot;抽烟&quot;</span>, <span class="params">conf:</span> <span class="string">&quot;0.38&quot;</span>&#125;,&#123;<span class="params">x:</span> <span class="number">100</span>, <span class="params">y:</span> <span class="number">200</span>, <span class="params">w:</span> <span class="number">120</span>, <span class="params">h:</span> <span class="number">100</span>, <span class="params">txt:</span> <span class="string">&quot;抽烟&quot;</span>, <span class="params">conf:</span> <span class="string">&quot;0.95&quot;</span>&#125;];</span><br><span class="line">var gtcoord <span class="operator">=</span> [&#123;<span class="params">x:</span> <span class="number">20</span>, <span class="params">y:</span> <span class="number">20</span>, <span class="params">w:</span> <span class="number">100</span>, <span class="params">h:</span> <span class="number">100</span>, <span class="params">txt:</span> <span class="string">&quot;未带安全帽&quot;</span>, <span class="params">conf:</span> <span class="string">&quot;0.93&quot;</span>&#125;,&#123;<span class="params">x:</span> <span class="number">260</span>, <span class="params">y:</span> <span class="number">260</span>, <span class="params">w:</span> <span class="number">100</span>, <span class="params">h:</span> <span class="number">100</span>, <span class="params">txt:</span> <span class="string">&quot;未带安全帽&quot;</span>, <span class="params">conf:</span> <span class="string">&quot;0.92&quot;</span>&#125;];</span><br></pre></td></tr></table></figure>
<p>要实现的效果为:</p>
<ul>
<li>红色框标注抽烟算法，</li>
<li>黄色框标注未带安全帽算法<img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/756562966949164c0687b396ef65e7c4_1737628762939.png" alt="在这里插入图片描述"><br>源码如下:</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-img&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;myCanvas&quot;</span> <span class="attr">width</span>=<span class="string">&quot;1280&quot;</span> <span class="attr">height</span>=<span class="string">&quot;650&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--原文链接：https://blog.csdn.net/weixin_43994675/article/details/119763634--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--推荐2个网站:https://www.bookstack.cn/read/webapi-tutorial/spilt.5.docs-websocket.md--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Using_images--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> dtcoord = [&#123;<span class="attr">x</span>: <span class="number">50</span>, <span class="attr">y</span>: <span class="number">50</span>, <span class="attr">w</span>: <span class="number">100</span>, <span class="attr">h</span>: <span class="number">100</span>, <span class="attr">txt</span>: <span class="string">&quot;抽烟&quot;</span>, <span class="attr">conf</span>: <span class="string">&quot;0.38&quot;</span>&#125;,&#123;<span class="attr">x</span>: <span class="number">100</span>, <span class="attr">y</span>: <span class="number">200</span>, <span class="attr">w</span>: <span class="number">120</span>, <span class="attr">h</span>: <span class="number">100</span>, <span class="attr">txt</span>: <span class="string">&quot;抽烟&quot;</span>, <span class="attr">conf</span>: <span class="string">&quot;0.95&quot;</span>&#125;];</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> gtcoord = [&#123;<span class="attr">x</span>: <span class="number">20</span>, <span class="attr">y</span>: <span class="number">20</span>, <span class="attr">w</span>: <span class="number">100</span>, <span class="attr">h</span>: <span class="number">100</span>, <span class="attr">txt</span>: <span class="string">&quot;未带安全帽&quot;</span>, <span class="attr">conf</span>: <span class="string">&quot;0.93&quot;</span>&#125;,&#123;<span class="attr">x</span>: <span class="number">260</span>, <span class="attr">y</span>: <span class="number">260</span>, <span class="attr">w</span>: <span class="number">100</span>, <span class="attr">h</span>: <span class="number">100</span>, <span class="attr">txt</span>: <span class="string">&quot;未带安全帽&quot;</span>, <span class="attr">conf</span>: <span class="string">&quot;0.92&quot;</span>&#125;];</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">queryCanvasInfo</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//获取canvas节点</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">queryCanvasInfo</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> c = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myCanvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> ctx = c.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//定义图片</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">createCanvasImg</span>(c, ctx, img, <span class="string">&quot;2.png&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//创建图片画布</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">createCanvasImg</span>(<span class="params">c, ctx, img, imgURL</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        img.<span class="property">src</span> = imgURL;</span></span><br><span class="line"><span class="language-javascript">        img.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//图片加载时</span></span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, c.<span class="property">width</span>, c.<span class="property">height</span>); <span class="comment">//清空这个范围的画布</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> a = img.<span class="property">width</span> / img.<span class="property">height</span>; <span class="comment">//计算原始图片的宽高比例</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(img.<span class="property">width</span>, img.<span class="property">height</span>, <span class="number">999</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (img.<span class="property">width</span> &gt; img.<span class="property">height</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//当图片宽度大于高度则写死宽度按高度调整比例</span></span></span><br><span class="line"><span class="language-javascript">                maxW = c.<span class="property">width</span>; <span class="comment">//最大宽度要等于画布的宽度</span></span></span><br><span class="line"><span class="language-javascript">                maxH = maxW / a;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//相反</span></span></span><br><span class="line"><span class="language-javascript">                (maxH = c.<span class="property">height</span>), (maxW = maxH * a);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            times = img.<span class="property">width</span> / maxW; <span class="comment">//计算原图与canvas的比例</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">canvasInfo</span>(maxW, maxH, img, ctx); <span class="comment">//重新绘制图片</span></span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//绘制图片</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">canvasInfo</span>(<span class="params">maxW, maxH, img, ctx</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> w = maxW, <span class="comment">//计算缩放的宽度</span></span></span><br><span class="line"><span class="language-javascript">            h = maxH; <span class="comment">//计算缩放的高度</span></span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">drawImage</span>(</span></span><br><span class="line"><span class="language-javascript">            img, <span class="comment">//图片实例</span></span></span><br><span class="line"><span class="language-javascript">            <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">0</span>, <span class="comment">//x轴y轴的边距</span></span></span><br><span class="line"><span class="language-javascript">            w,</span></span><br><span class="line"><span class="language-javascript">            h <span class="comment">//图片的宽高</span></span></span><br><span class="line"><span class="language-javascript">        );</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">canvasRect</span>(dtcoord, <span class="string">&quot;dt&quot;</span>, ctx);</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">canvasRect</span>(gtcoord, <span class="string">&quot;gt&quot;</span>, ctx);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//标注框绘制</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">canvasRect</span>(<span class="params">list, txt, ctx</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        list.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!item) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            x = <span class="title class_">Number</span>(item.<span class="property">x</span>) / times,</span></span><br><span class="line"><span class="language-javascript">                y = <span class="title class_">Number</span>(item.<span class="property">y</span>) / times,</span></span><br><span class="line"><span class="language-javascript">                w = <span class="title class_">Number</span>(item.<span class="property">w</span>) / times,</span></span><br><span class="line"><span class="language-javascript">                h = <span class="title class_">Number</span>(item.<span class="property">h</span>) / times;</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="property">lineWidth</span> = <span class="string">&quot;2&quot;</span>; <span class="comment">//框的粗细</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (txt == <span class="string">&quot;gt&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                ctx.<span class="property">strokeStyle</span> = <span class="string">&quot;yellow&quot;</span>; <span class="comment">//gt选中的标注框为红色</span></span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                ctx.<span class="property">strokeStyle</span> = <span class="string">&quot;red&quot;</span>; <span class="comment">//dt选中的标注框为红色</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2222</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//开始绘制</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(x, y, w, h)</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">strokeRect</span>(x, y, w, h);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//文本</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//CanvasRenderingContext2D.fillText(text, x, y [, maxWidth])</span></span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="property">fillStyle</span> = <span class="string">&#x27;#fff&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">fillText</span>(item.<span class="property">conf</span>, (x + w/<span class="number">2</span>) , y-<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ctx.beginPath();</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ctx.moveTo(x-, y);</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ctx.lineTo(x+w, y);</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ctx.lineTo(x+w, y+h);</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ctx.lineTo(x, y+h);</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ctx.fill()</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>本文主要介绍了canvas的基础知识，简单使用，最后来一个算法标注框的实现案例。</p>
<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2022/09/19/shell%E8%84%9A%E6%9C%AC%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98%EF%BC%88%E5%9B%9B%EF%BC%89-%20%E6%95%B0%E7%BB%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/19/shell%E8%84%9A%E6%9C%AC%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98%EF%BC%88%E5%9B%9B%EF%BC%89-%20%E6%95%B0%E7%BB%84/" class="post-title-link" itemprop="url">shell脚本入门到实战（四）- 数组</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-09-19 22:55:32" itemprop="dateCreated datePublished" datetime="2022-09-19T22:55:32+08:00">2022-09-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux-%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">linux 运维</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[TOC]</p>
<h2 id="1-shell格式化输出"><a href="#1-shell格式化输出" class="headerlink" title="1.shell格式化输出"></a>1.shell格式化输出</h2><h2 id="0-什么是数组"><a href="#0-什么是数组" class="headerlink" title="0.什么是数组"></a>0.什么是数组</h2><p>数组可以让用户一次赋予多个值，需要读取数据时只需通过索引调用就可以方便读出了。<br>shell中的数组分两种： 普通数组 和 关联数组。</p>
<h2 id="1-普通数组"><a href="#1-普通数组" class="headerlink" title="1.普通数组"></a>1.普通数组</h2><p>数组名称&#x3D;(元素1 元素2 元素3 …)</p>
<h3 id="①数组赋值方式"><a href="#①数组赋值方式" class="headerlink" title="①数组赋值方式"></a>①数组赋值方式</h3><h4 id="一次附一个值"><a href="#一次附一个值" class="headerlink" title="一次附一个值"></a>一次附一个值</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="operator">=</span>变量值</span><br><span class="line">array[<span class="number">0</span>]<span class="operator">=</span>v1</span><br><span class="line">array[<span class="number">1</span>]<span class="operator">=</span>v2</span><br><span class="line">array[<span class="number">3</span>]<span class="operator">=</span>v3</span><br></pre></td></tr></table></figure>
<h4 id="一次附多个值"><a href="#一次附多个值" class="headerlink" title="一次附多个值"></a>一次附多个值</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">array</span>=(var1 var2 var3 var4)</span><br><span class="line"><span class="attr">array1</span>=(`cat /etc/passwd`)			//将文件中每一行赋值给array1数组</span><br><span class="line"><span class="attr">array2</span>=(`ls /root`)</span><br><span class="line"><span class="attr">array3</span>=(harry amy jack <span class="string">&quot;Miss zhang&quot;</span>)</span><br><span class="line"><span class="attr">array4</span>=(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="string">&quot;hello world&quot;</span> [<span class="number">10</span>]=linux)</span><br></pre></td></tr></table></figure>
<h3 id="②数组取值"><a href="#②数组取值" class="headerlink" title="②数组取值"></a>②数组取值</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;array[i]&#125;</span>  i表示元素的索引</span><br><span class="line">使用@ 或 * 可以获取数组中的所有元素：</span><br><span class="line">获取第一个元素</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[0]&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[*]&#125;</span>	或 <span class="built_in">echo</span> <span class="variable">$&#123;array4[@]&#125;</span>	获取数组里的所有元素</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#array[*]&#125;</span>			获取数组里所有元素个数</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;!array[@]&#125;</span>    	获取数组元素的索引索引</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[@]:1:2&#125;</span>    访问指定的元素；1代表从索引为1的元素开始获取；2代表获取后面几个元素</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/4aa9eadca28f8d9b74bfabd3aeb6eab3_1737628762939.png" alt="在这里插入图片描述"></p>
<h2 id="2-关联数组语法"><a href="#2-关联数组语法" class="headerlink" title="2.关联数组语法"></a>2.关联数组语法</h2><h3 id="一次赋一个值"><a href="#一次赋一个值" class="headerlink" title="一次赋一个值"></a>一次赋一个值</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> -A ass_array1</span><br><span class="line"></span><br><span class="line">ass_array1[<span class="type">name</span>]=<span class="string">&#x27;basism&#x27;</span></span><br><span class="line">ass_array1[age]=<span class="number">18</span></span><br></pre></td></tr></table></figure>

<h3 id="一次附多个值-1"><a href="#一次附多个值-1" class="headerlink" title="一次附多个值"></a>一次附多个值</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> -A ass_array2</span><br><span class="line">ass_array2=([<span class="type">name</span>]=<span class="string">&#x27;ayitula&#x27;</span> [age]=<span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/06c7e6698a797fd02a5b1d39923d8fbe_1737628762939.png" alt="在这里插入图片描述"></p>
<h3 id="查看关联数组"><a href="#查看关联数组" class="headerlink" title="查看关联数组"></a>查看关联数组</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/6bf7139bdda960c404d05ce0367029ed_1737628762939.png" alt="在这里插入图片描述"></p>
<h3 id="关联数组取值"><a href="#关联数组取值" class="headerlink" title="关联数组取值"></a>关联数组取值</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">[root@localhost~]# </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$&#123;asso_array1[linux]&#125;</span></span></span><br><span class="line">one</span><br></pre></td></tr></table></figure>
<h2 id="3-普通数组和关联数据的区别"><a href="#3-普通数组和关联数据的区别" class="headerlink" title="3.普通数组和关联数据的区别"></a>3.普通数组和关联数据的区别</h2><p>普通数据的索引是数字： 0,1，2….<br>关联数组的索引是自定义的（<code>自我感觉：好像map啊</code>）</p>
<p>系列文章</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126883239?spm=1001.2014.3001.5502">shell脚本入门到实战（一）</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126918598?spm=1001.2014.3001.5502">shell脚本入门到实战（二）–shell输入和格式化输出</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126923001?spm=1001.2014.3001.5502">shell脚本入门到实战(三) - 变量</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126942721?spm=1001.2014.3001.5502">shell脚本入门到实战（四）- 数组</a></li>
</ul>
<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2022/09/18/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%8D%95%E4%BD%8D%E8%87%AA%E9%80%82%E5%BA%94%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/18/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%8D%95%E4%BD%8D%E8%87%AA%E9%80%82%E5%BA%94%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F/" class="post-title-link" itemprop="url">移动端单位自适应的两种方式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-09-18 23:05:31" itemprop="dateCreated datePublished" datetime="2022-09-18T23:05:31+08:00">2022-09-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>10k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>10 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[TOC]</p>
<blockquote>
<p>之前考虑过，怎么实现移动端随着屏幕尺寸的不同，高度，宽度，文字大小等能够自动适应，今天主要说2种，一种是结合js和css的方式，另一种是rem和vw混合使用实现的方式。</p>
</blockquote>
<h2 id="0-前置知识"><a href="#0-前置知识" class="headerlink" title="0.前置知识"></a>0.前置知识</h2><p>rem: 根据html和body的根元素的字体大小做对比，显示文字的比例单位<br>em: 根据父级元素的字体大小对比，显示文字的比例单位，这个不推荐使用，因为如果父级元素没有设置字体大小，得一步一步向上寻找。<br>vw: 视口的宽度 （  100vw&#x3D; 视口的高度屏幕尺寸显示的宽度）<br>vh: 视口的高度（100vh &#x3D; 屏幕尺寸显示的高度）<br>但是注意: 100vw不等于100%，同理，100vh也不等于100%。没有滚动条的时候： 100vw &#x3D;&#x3D; 100%，有滚动条时，100vw包含滚动条，则是100% 刨除滚动条剩余的空间，此时100vw &gt; 100%.100vh &gt; 100%.<br><code>px to rem</code>小插件，这个插件在vscode和idea中都有，可以自动根据根元素的字体px转换成对应的rem值，不用手动计算。</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/172685ebc1425971bb9c085f6c0fa06a_1737628762939.png" alt="在这里插入图片描述"></p>
<p>完整案例:实现个足球朋友圈的小案例。<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/2ed6f7008235e88c28ca4c677062864f_1737628774453.png" alt="在这里插入图片描述"></p>
<h2 id="1-js方式自动设置根元素文字大小，实现单位自适应。"><a href="#1-js方式自动设置根元素文字大小，实现单位自适应。" class="headerlink" title="1: js方式自动设置根元素文字大小，实现单位自适应。"></a>1: js方式自动设置根元素文字大小，实现单位自适应。</h2><p>关键思路和代码:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">//320是iphone4的css尺寸，这个尺寸取决于你的设计稿，css中根据20px进行换成对应的rem，根据窗口大小自动计算了根元素的fontSize，那css中就可以用多少rem来动态计算了。</span></span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">style</span>.<span class="property">fontSize</span> = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span> / <span class="number">320</span> * <span class="number">20</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>移动布局案例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;font/iconfont.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        * &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">header</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">2.2rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: green;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">header</span> <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">3rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">1.25rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">1.25rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">0.6rem</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">header</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0.6rem</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0.6rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#63d985</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">header</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">0.6rem</span> <span class="number">0.6rem</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#3dd066</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#a9e4b4</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">section</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: auto;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">section</span> <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: sticky;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: space-around;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">section</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">1.75rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">1.75rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-bottom</span>: <span class="number">0.05rem</span> solid <span class="number">#d9d9d9</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#8c8c8c</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">0.7rem</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">section</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-bottom</span>: <span class="number">0.1rem</span> solid green;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#14bf4d</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">section</span> <span class="selector-class">.list</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">flex-wrap</span>: wrap;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">section</span> <span class="selector-class">.list</span> &gt; <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">49%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">0.2rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">0.05rem</span> solid gray;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*align-items: center;*/</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">section</span> <span class="selector-class">.list</span> &gt; <span class="selector-tag">div</span> <span class="selector-tag">img</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">section</span> <span class="selector-class">.list</span> &gt; <span class="selector-tag">div</span> <span class="selector-tag">p</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">1.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">1.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">0.6rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-indent</span>: <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">footer</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">2.2rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#d5d547</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">footer</span> <span class="selector-tag">ul</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: space-around;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">footer</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: space-around;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">footer</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#08ca43</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">footer</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">i</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">1.05rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">1.05rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">0.6rem</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">footer</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">span</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">0.85rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">0.85rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">0.6rem</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">footer</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>)&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">footer</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) <span class="selector-tag">i</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">2.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">2.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">0.05rem</span> solid <span class="number">#dadada</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: -<span class="number">1.25rem</span> ;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: -<span class="number">0.4rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">1.5rem</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">2.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//320是iphone4的css尺寸，这个尺寸取决于你的设计稿</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">style</span>.<span class="property">fontSize</span> = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span> / <span class="number">320</span> * <span class="number">20</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>热点<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>关注<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>足球现场<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>足球生活<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>足球美女<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>大家好大家好<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>大家好大家好<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>大家好大家好<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>大家好大家好<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>大家好大家好<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>大家好大家好<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>大家好大家好<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-a-tongxunludianhuabu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-tongxun&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>发现<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-paizhao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-Account&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>我的<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-forward&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-vw版"><a href="#2-vw版" class="headerlink" title="2: vw版"></a>2: vw版</h2><p>思路: 先根据设计稿算出根元素的fontSize为多少vw，因为vw是自适应，这样根元素的字体就是动态变的，那其他css中的都是xxrem也会自动变化。<br>关键代码:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/*根据下面的设计稿尺寸，算出 html的fontsize是多少个vw，其余的还是用rem就行*/</span></span><br><span class="line">         <span class="comment">/*iphone4*/</span></span><br><span class="line">        <span class="comment">/*320px == 100 vw*/</span></span><br><span class="line">        <span class="comment">/*16px  === ? 5 vw*/</span></span><br><span class="line"> <span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123;</span><br><span class="line">           <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">           <span class="attribute">font-size</span>: <span class="number">5vw</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>全部代码:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;移动布局案例&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;font/iconfont.css&quot;&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        思路:</span><br><span class="line">        /*根据下面的设计稿尺寸，算出 html的fontsize是多少个vw，其余的还是用rem就行*/</span><br><span class="line">          /*iphone4*/</span><br><span class="line">         /*320px == 100 vw*/</span><br><span class="line">         /*16px  === ? 5 vw*/</span><br><span class="line"></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ul &#123;</span><br><span class="line">            list-style: none;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        html, body &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line">            font-size: 5vw;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body &#123;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-direction: column;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        header &#123;</span><br><span class="line">            height: 2.75rem;</span><br><span class="line">            background: green;</span><br><span class="line">            display: flex;</span><br><span class="line">            justify-content: center;</span><br><span class="line">            align-items: center;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        header div &#123;</span><br><span class="line">            width: 3.75rem;</span><br><span class="line">            height: 1.5625rem;</span><br><span class="line">            line-height: 1.5625rem;</span><br><span class="line">            text-align: center;</span><br><span class="line">            font-size: 0.75rem;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        header div:nth-child(1) &#123;</span><br><span class="line">            border-radius: 0.75rem 0 0 0.75rem;</span><br><span class="line">            background: #63d985;</span><br><span class="line">            color: #fff;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        header div:nth-child(2) &#123;</span><br><span class="line">            border-radius: 0 0.75rem 0.75rem 0;</span><br><span class="line">            background: #3dd066;</span><br><span class="line">            color: #a9e4b4;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        section &#123;</span><br><span class="line">            flex: 1;</span><br><span class="line">            overflow: auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        section ul &#123;</span><br><span class="line">            position: sticky;</span><br><span class="line">            top: 0;</span><br><span class="line">            display: flex;</span><br><span class="line">            justify-content: space-around;</span><br><span class="line">            background: #fff;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        section ul li &#123;</span><br><span class="line">            flex: 1;</span><br><span class="line">            text-align: center;</span><br><span class="line">            height: 2.1875rem;</span><br><span class="line">            line-height: 2.1875rem;</span><br><span class="line">            border-bottom: 0.0625rem solid #d9d9d9;</span><br><span class="line">            color: #8c8c8c;</span><br><span class="line">            font-size: 0.875rem;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        section ul li:hover &#123;</span><br><span class="line">            border-bottom: 0.125rem solid green;</span><br><span class="line">            color: #14bf4d;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        section .list &#123;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-wrap: wrap;</span><br><span class="line">            justify-content: space-between;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        section .list &gt; div &#123;</span><br><span class="line">            width: 49%;</span><br><span class="line">            margin-top: 0.25rem;</span><br><span class="line">            border: 0.0625rem solid gray;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-direction: column;</span><br><span class="line">            justify-content: center;</span><br><span class="line">            /*align-items: center;*/</span><br><span class="line">        &#125;</span><br><span class="line">        section .list &gt; div img&#123;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 100%;</span><br><span class="line">            flex: 1;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        section .list &gt; div p&#123;</span><br><span class="line">            height: 1.875rem;</span><br><span class="line">            line-height: 1.875rem;</span><br><span class="line">            font-size: 0.75rem;</span><br><span class="line">            text-indent: 0.625rem;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        footer &#123;</span><br><span class="line">            height: 2.75rem;</span><br><span class="line">            background: #fff;</span><br><span class="line">            color: #d5d547;</span><br><span class="line">        &#125;</span><br><span class="line">        footer ul&#123;</span><br><span class="line">            display: flex;</span><br><span class="line">            justify-content: space-around;</span><br><span class="line">            height: 100%;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        footer ul li&#123;</span><br><span class="line">            height: 100%;</span><br><span class="line">            flex: 1;</span><br><span class="line">            text-align: center;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-direction: column;</span><br><span class="line">            justify-content: space-around;</span><br><span class="line">        &#125;</span><br><span class="line">        footer ul li:hover&#123;</span><br><span class="line">            color: #08ca43;</span><br><span class="line">        &#125;</span><br><span class="line">        footer ul li i&#123;</span><br><span class="line">            height: 1.3125rem;</span><br><span class="line">            line-height: 1.3125rem;</span><br><span class="line">            font-size: 1rem !important;</span><br><span class="line">        &#125;</span><br><span class="line">        footer ul li span&#123;</span><br><span class="line">            height: 1.0625rem;</span><br><span class="line">            line-height: 1.0625rem;</span><br><span class="line">            font-size: 0.75rem;</span><br><span class="line">        &#125;</span><br><span class="line">        footer ul li:nth-child(3)&#123;</span><br><span class="line">            position: relative;</span><br><span class="line">        &#125;</span><br><span class="line">        footer ul li:nth-child(3) i&#123;</span><br><span class="line">            height: 3.125rem;</span><br><span class="line">            width: 3.125rem;</span><br><span class="line">            border: 0.0625rem solid #dadada;</span><br><span class="line">            border-radius: 50%;</span><br><span class="line">            position: absolute;</span><br><span class="line">            left: 50%;</span><br><span class="line">            margin-left: -1.5625rem ;</span><br><span class="line">            top: -0.5rem;</span><br><span class="line">            font-size: 1.875rem !important;</span><br><span class="line">            text-align: center;</span><br><span class="line">            line-height: 3.125rem;</span><br><span class="line">            background: #fff;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;header&gt;</span><br><span class="line">    &lt;div&gt;热点&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;关注&lt;/div&gt;</span><br><span class="line">&lt;/header&gt;</span><br><span class="line">&lt;section&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;足球现场&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;足球生活&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;足球美女&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;div class=&quot;list&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;img src=&quot;images/1.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;p&gt;大家好大家好&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;img src=&quot;images/1.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;p&gt;大家好大家好&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;img src=&quot;images/1.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;p&gt;大家好大家好&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;img src=&quot;images/1.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;p&gt;大家好大家好&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;img src=&quot;images/1.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;p&gt;大家好大家好&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;img src=&quot;images/1.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;p&gt;大家好大家好&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;img src=&quot;images/1.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;p&gt;大家好大家好&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/section&gt;</span><br><span class="line">&lt;footer&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-a-tongxunludianhuabu&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;span&gt;首页&lt;/span&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-tongxun&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;span&gt;发现&lt;/span&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-paizhao&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-Account&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;span&gt;我的&lt;/span&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-forward&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;span&gt;退出&lt;/span&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/footer&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>


<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2022/09/18/shell%E8%84%9A%E6%9C%AC%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98(%E4%B8%89)%20-%20%E5%8F%98%E9%87%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/18/shell%E8%84%9A%E6%9C%AC%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98(%E4%B8%89)%20-%20%E5%8F%98%E9%87%8F/" class="post-title-link" itemprop="url">shell脚本入门到实战(三) - 变量</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-09-18 21:51:01" itemprop="dateCreated datePublished" datetime="2022-09-18T21:51:01+08:00">2022-09-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux-%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">linux 运维</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[TOC]<br>系列文章</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126883239?spm=1001.2014.3001.5502">shell脚本入门到实战（一）</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126918598?spm=1001.2014.3001.5502">shell脚本入门到实战（二）–shell输入和格式化输出</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126923001?spm=1001.2014.3001.5502">shell脚本入门到实战(三) - 变量</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126942721?spm=1001.2014.3001.5502">shell脚本入门到实战（四）- 数组</a></li>
</ul>
<h2 id="1-shell格式化输出"><a href="#1-shell格式化输出" class="headerlink" title="1.shell格式化输出"></a>1.shell格式化输出</h2><h2 id="变量分类"><a href="#变量分类" class="headerlink" title="变量分类"></a>变量分类</h2><p>系统中的变量根据作用域及生命周期可以分为四类：本地变量、环境变量、全局变量、内置变量</p>
<p>1、本地变量<br>用户自定义的变量，定义在脚本或者当前终端中，脚本执行完毕或终端结束变量失效。</p>
<p>2、环境变量(<code>用户私有变量</code>)<br>定义在用户家目录下的.bashrc或.bash_profile文件中，用户私有变量，只能本用户使用。</p>
<p>3.全局变量<br>使用export命令将本地变量输出为当前shell中的环境变量<br>所有用户及shell都可以使用，可以在&#x2F;etc&#x2F;profile &#x2F;etc&#x2F;bashrc下永久定义.</p>
<h2 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h2><p>变量格式： 变量名&#x3D;值<br>注意:<code>=左右不能有空格</code><br><code>变量名命名规则</code>：</p>
<ul>
<li>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。</li>
<li>中间不能有空格，可以使用下划线（_）。</li>
<li>不能使用标点符号。</li>
<li>不能使用bash里的关键字（可用help命令查看保留关键字）。<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/386c3211f066c8a84bd3fab03cb26323_1737628774453.png" alt="在这里插入图片描述"></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">变量赋值，此种方法设置为本地变量</span><br><span class="line">[root@zutuanxue ~]# name=&quot;baism&quot;</span><br><span class="line">[root@zutuanxue ~]# school=&#x27;ayitula&#x27;</span><br><span class="line">[root@zutuanxue ~]# age=30</span><br><span class="line">[root@zutuanxue ~]# score=88.8</span><br></pre></td></tr></table></figure>


<h3 id="变量取值"><a href="#变量取值" class="headerlink" title="变量取值"></a>变量取值</h3><p>读取变量内容符: 读取方法：变量名</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">变量内容读出</span><br><span class="line">[root@zutuanxue ~]# echo $name</span><br><span class="line">baism</span><br><span class="line">[root@zutuanxue ~]# echo $school</span><br><span class="line">ayitula</span><br><span class="line">[root@zutuanxue ~]# echo $age</span><br><span class="line">30</span><br><span class="line">[root@zutuanxue ~]# echo $score</span><br><span class="line">88.8</span><br></pre></td></tr></table></figure>

<h3 id="取消变量-unset"><a href="#取消变量-unset" class="headerlink" title="取消变量 unset"></a>取消变量 unset</h3><p>取消当前环境中的变量，如果是变量设置是保存在文件中，下次重启又会恢复.<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/8a2c6eb2084d791b3bab1f83c2f9b259_1737628774453.png" alt="在这里插入图片描述"></p>
<h3 id="扩展知识"><a href="#扩展知识" class="headerlink" title="扩展知识"></a>扩展知识</h3><h4 id="1）取出一个目录下的目录和文件：dirname和-basename"><a href="#1）取出一个目录下的目录和文件：dirname和-basename" class="headerlink" title="1）取出一个目录下的目录和文件：dirname和 basename"></a>1）取出一个目录下的目录和文件：dirname和 basename</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">A=/root/Desktop/shell/mem.txt</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$A</span></span></span><br><span class="line">/root/Desktop/shell/mem.txt</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">dirname</span> <span class="variable">$A</span>   取出目录</span></span><br><span class="line">/root/Desktop/shell</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">basename</span> <span class="variable">$A</span>  取出文件</span></span><br><span class="line">mem.txt</span><br></pre></td></tr></table></figure>

<h4 id="2）变量”内容”的删除和替换"><a href="#2）变量”内容”的删除和替换" class="headerlink" title="2）变量”内容”的删除和替换"></a>2）变量”内容”的删除和替换</h4><p>一个“%”代表从右往左去掉一个&#x2F;key&#x2F;<br>两个“%%”代表从右往左最大去掉&#x2F;key&#x2F;<br>一个“#”代表从左往右去掉一个&#x2F;key&#x2F;<br>两个“##”代表从左往右最大去掉&#x2F;key&#x2F;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">url=www.taobao.com</span>  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$&#123;#url&#125;</span>   //14    获取变量的长度</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$&#123;url#*.&#125;</span>  //taobao.com     以分隔符.界限  *匹配所有</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$&#123;url##*.&#125;</span> //com</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$&#123;url%.*&#125;</span>  //www.taobao</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$&#123;url%%.*&#125;</span> //www</span></span><br></pre></td></tr></table></figure>

<p>系列文章</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126883239?spm=1001.2014.3001.5502">shell脚本入门到实战（一）</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126918598?spm=1001.2014.3001.5502">shell脚本入门到实战（二）–shell输入和格式化输出</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126923001?spm=1001.2014.3001.5502">shell脚本入门到实战(三) - 变量</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126942721?spm=1001.2014.3001.5502">shell脚本入门到实战（四）- 数组</a></li>
</ul>
<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2022/09/18/shell%E8%84%9A%E6%9C%AC%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89--shell%E8%BE%93%E5%85%A5%E5%92%8C%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/18/shell%E8%84%9A%E6%9C%AC%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89--shell%E8%BE%93%E5%85%A5%E5%92%8C%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/" class="post-title-link" itemprop="url">shell脚本入门到实战（二）--shell输入和格式化输出</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-09-18 17:06:54" itemprop="dateCreated datePublished" datetime="2022-09-18T17:06:54+08:00">2022-09-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">运维</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[TOC]</p>
<h2 id="1-shell格式化输出"><a href="#1-shell格式化输出" class="headerlink" title="1.shell格式化输出"></a>1.shell格式化输出</h2><p>一个程序需要0个或以上输入，1个或多个以上输出。</p>
<h3 id="2-echo"><a href="#2-echo" class="headerlink" title="2.echo"></a>2.echo</h3><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">语法:echo [-ne][字符串]</span><br><span class="line"></span><br><span class="line">补充说明:</span><br><span class="line">1、echo会将输入的字符串送往标准输出。</span><br><span class="line">2、输出的字符串间以空白字符隔开,并在最后加上换行号。</span><br><span class="line"></span><br><span class="line">OPTIONS：</span><br><span class="line">-n	不要在最后自动换行</span><br><span class="line">-e	若字符串中出现以下字符，则特别加以处理，而不会将它当成一般文字输出:</span><br><span class="line"></span><br><span class="line">转义字符</span><br><span class="line">\a	发出警告声;</span><br><span class="line">\b	删除前一个字符;</span><br><span class="line">\t	插入tab;</span><br><span class="line">\n	换行且光标移至行首;</span><br><span class="line"></span><br><span class="line">\c	最后不加上换行符号;</span><br><span class="line">\f	换行但光标仍旧停留在原来的位置;</span><br><span class="line">\r	光标移至行首，但不换行;</span><br><span class="line">\v	与\f相同;</span><br><span class="line">\		插入\字符;</span><br><span class="line">\0nnn	打印nnn(八进制)所代表的ASCII字符;  备注：数字0  不要理解成字母o</span><br><span class="line">\xNN  打印NN(十六进制)所代表的ASCII字符;</span><br><span class="line"></span><br><span class="line">-–help	显示帮助</span><br><span class="line">-–version显示版本信息</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">你的进制转换过关吗？</span><br><span class="line">[root@zutuanxue ~]<span class="punctuation">#</span> echo -e &quot;\0123&quot;   <span class="punctuation">#</span><span class="keyword">ot</span><span class="params">(123)</span> = 83  对应ascii表的S</span><br><span class="line">S</span><br><span class="line">[root@zutuanxue ~]<span class="punctuation">#</span> echo -e &quot;\x61&quot;   <span class="punctuation">#</span><span class="keyword">ox</span><span class="params">(61)</span> = 97  对应ascii表的a</span><br><span class="line">a</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost shell_04]# cat time.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">for time in `seq 9 -1 0`;do</span><br><span class="line">   echo -n  -e &quot;\b$time&quot;</span><br><span class="line">   sleep 1</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/4fd29e802678a8200dfb6d877721a190_1737628774453.png" alt="在这里插入图片描述"></p>
<h4 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@localhost shell_04]# bash fruits.sh</span><br><span class="line">                        Fruits Shop</span><br><span class="line">        1) Apple</span><br><span class="line">        2) Orange</span><br><span class="line">        3) Banana</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/4412b34e9d5db2944fd6edd2b7ccab2e_1737628774453.png" alt="在这里插入图片描述"></p>
<h4 id="带颜色输出"><a href="#带颜色输出" class="headerlink" title="带颜色输出"></a>带颜色输出</h4><p>格式如下：</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e <span class="string">&quot;<span class="char escape_">\03</span>3[字背景颜色；文字颜色m字符串<span class="char escape_">\03</span>3[0m&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">下面是相应的字和背景颜色，可以自己来尝试找出不同颜色搭配</span><br><span class="line"></span><br><span class="line">　　例</span><br><span class="line">　　echo -e “<span class="string">\033[31m</span> 红色字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[34m</span> 黄色字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[41;33m</span> 红底黄字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[41;37m</span> 红底白字 <span class="string">\033[0m”</span></span><br><span class="line">　　</span><br><span class="line">字颜色：<span class="number">30</span>—–<span class="number">37</span></span><br><span class="line">　　echo -e “<span class="string">\033[30m</span> 黑色字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[31m</span> 红色字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[32m</span> 绿色字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[33m</span> 黄色字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[34m</span> 蓝色字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[35m</span> 紫色字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[36m</span> 天蓝字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[37m</span> 白色字 <span class="string">\033[0m”</span></span><br><span class="line"></span><br><span class="line">　　</span><br><span class="line">字背景颜色范围：<span class="number">40</span>—–<span class="number">47</span></span><br><span class="line">　　echo -e “<span class="string">\033[40;37m</span> 黑底白字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[41;37m</span> 红底白字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[42;37m</span> 绿底白字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[43;37m</span> 黄底白字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[44;37m</span> 蓝底白字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[45;37m</span> 紫底白字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[46;37m</span> 天蓝底白字 <span class="string">\033[0m”</span></span><br><span class="line">　　echo -e “<span class="string">\033[47;30m</span> 白底黑字 <span class="string">\033[0m”</span></span><br><span class="line">　　</span><br><span class="line">最后面控制选项说明</span><br><span class="line">　　<span class="string">\033[0m</span> 关闭所有属性</span><br><span class="line">　　<span class="string">\033[1m</span> 设置高亮度</span><br><span class="line">　　<span class="string">\033[4m</span> 下划线</span><br><span class="line">　　<span class="string">\033[5m</span> 闪烁</span><br><span class="line">　　<span class="string">\033[7m</span> 反显</span><br><span class="line">　　<span class="string">\033[8m</span> 消隐</span><br><span class="line"></span><br><span class="line">　　<span class="string">\033[30m</span> — <span class="string">\33[37m</span> </span><br><span class="line"></span><br><span class="line">设置前景色</span><br><span class="line">　　<span class="string">\033[40m</span> — <span class="string">\33[47m</span> 设置背景色</span><br><span class="line">　　</span><br><span class="line">　　</span><br><span class="line">　　<span class="string">\033[nA</span> 光标上移n行</span><br><span class="line">　　<span class="string">\033[nB</span> 光标下移n行</span><br><span class="line">　　<span class="string">\033[nC</span> 光标右移n行</span><br><span class="line">　　<span class="string">\033[nD</span> 光标左移n行</span><br><span class="line">　　<span class="string">\033[y;xH设置光标位置</span></span><br><span class="line">　　<span class="string">\033[2J</span> 清屏</span><br><span class="line">　　<span class="string">\033[K</span> 清除从光标到行尾的内容</span><br><span class="line">　　<span class="string">\33[s</span> 保存光标位置</span><br><span class="line">　　<span class="string">\033[u</span> 恢复光标位置</span><br><span class="line">　　<span class="string">\033[?25l</span> 隐藏光标</span><br><span class="line">　　<span class="string">\033[?25h</span> 显示光标</span><br><span class="line">　　</span><br><span class="line">用法例子  光标下移三行　　</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/02eaa8226a696cb062654b8687e0f7c0_1737628785149.png" alt="在这里插入图片描述"><br>参考:<br><a target="_blank" rel="noopener" href="https://www.zutuanxue.com/home/4/6_22">https://www.zutuanxue.com/home/4/6_22</a></p>
<h2 id="2-shell脚本输入"><a href="#2-shell脚本输入" class="headerlink" title="2.shell脚本输入"></a>2.shell脚本输入</h2><h3 id="read命令"><a href="#read命令" class="headerlink" title="read命令"></a>read命令</h3><p>功能：默认接受键盘的输入，回车符代表输入结束<br>应用场景：人机交互<br>命令选项</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-p打印信息</span></span><br><span class="line"><span class="deletion">-t限定时间</span></span><br><span class="line"><span class="deletion">-s不回显</span></span><br><span class="line"><span class="deletion">-n输入字符个数</span></span><br></pre></td></tr></table></figure>

<p>案例1： 输入用户名和密码并显示</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost shell_05]# cat read_comand_study.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">clear</span><br><span class="line"></span><br><span class="line">echo -n -e &quot;Login: &quot;</span><br><span class="line">read acc</span><br><span class="line">echo -n -e &quot;Password: &quot;</span><br><span class="line">read pw</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">echo &quot;account: $acc     password: $pw&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>执行完脚本后:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/e42c55b86fa8f9389f7e16c87dda96e1_1737628785149.png" alt="在这里插入图片描述"><br>优化 ： -s 密码不显示<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/a9870d1b55dda57a579575c7caecb651_1737628785149.png" alt="在这里插入图片描述"><br>-t 超时等待<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/a7f3d95fc9847fe644f97945547a4ccb_1737628785149.png" alt="在这里插入图片描述"></p>
<p>-n 输入字符个数<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/7668fd8ec398335dc825ea7f7741a446_1737628785149.png" alt="在这里插入图片描述"><br>-p打印信息 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -n -e <span class="string">&quot;Login: &quot;</span></span><br><span class="line"><span class="built_in">read</span> acc</span><br></pre></td></tr></table></figure>
<p>这两行可以合并成一行的写法:</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;Login: &quot;</span> acc</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/c0c72f01b097d65d7a087bc208d73cae_1737628795644.png" alt="在这里插入图片描述"></p>
<p>案例:<br>1、根据linux文本界面登陆窗口输出信息，打印登陆提示信息<br>2、交互输入登陆账号<br>3、交互输入登陆密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/bash</span></span><br><span class="line">echo &quot;Centos Linux 7 （Core）&quot;</span><br><span class="line">echo -e &quot;kernel `uname -r` an `uname -m`\n&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">echo -n -e &quot;$HOSTNAME login: &quot;</span><br><span class="line">read acc</span><br><span class="line">read -p &quot;password: &quot;</span><br><span class="line">read pw</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/8b1ad6137dd922b2d1649c009f298aae_1737628795644.png" alt="在这里插入图片描述"></p>
<p>系列文章</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126883239?spm=1001.2014.3001.5502">shell脚本入门到实战（一）</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126918598?spm=1001.2014.3001.5502">shell脚本入门到实战（二）–shell输入和格式化输出</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126923001?spm=1001.2014.3001.5502">shell脚本入门到实战(三) - 变量</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126942721?spm=1001.2014.3001.5502">shell脚本入门到实战（四）- 数组</a></li>
</ul>
<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2022/09/18/shell%E8%84%9A%E6%9C%AC%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98%EF%BC%88%E4%B8%80%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/18/shell%E8%84%9A%E6%9C%AC%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98%EF%BC%88%E4%B8%80%EF%BC%89/" class="post-title-link" itemprop="url">shell脚本入门到实战（一）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-09-18 15:45:09" itemprop="dateCreated datePublished" datetime="2022-09-18T15:45:09+08:00">2022-09-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">运维</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[TOC]</p>
<h2 id="shell脚本的本质"><a href="#shell脚本的本质" class="headerlink" title="shell脚本的本质"></a>shell脚本的本质</h2><p><code>将完成一个任务的所有的命令安装执行的先后顺序，自上而下写入到一个文本文件中，然后给予执行权限。</code></p>
<h2 id="0-开胃菜-使用shell脚本实现自动化安装nginx"><a href="#0-开胃菜-使用shell脚本实现自动化安装nginx" class="headerlink" title="0.开胃菜:使用shell脚本实现自动化安装nginx"></a>0.开胃菜:使用shell脚本实现自动化安装nginx</h2><ul>
<li><ol>
<li>创建目录  <code>mkdir -p /opt/shell/nginx_shell</code></li>
</ol>
</li>
<li>2.新建<code>nginx_install.sh</code>文件并编辑为以下内容</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yum -y install wget gcc pcre-devel zlib-devel</span><br><span class="line">wget https://nginx.org/download/nginx-1.23.1.tar.gz</span><br><span class="line">tar xf nginx-1.23.1.tar.gz</span><br><span class="line">cd nginx-1.23.1</span><br><span class="line">./configure --prefix=/usr/local/nginx</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-j 4代表4个cpu去执行</span></span><br><span class="line">make -j 4</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<ul>
<li>3.设置文件的权限 <code>chmod 700 nginx_install.sh</code> 并执行 <code>./nginx_shell.sh</code></li>
<li><ol start="4">
<li>启动nginx<br>在	&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin目录下执行<code>./nginx</code></li>
</ol>
</li>
<li>4.开启防火墙后查看效果：<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/92714f09423c74c3baa99b5473da16ca_1737628795644.png" alt="在这里插入图片描述"><br>表示成功安装了。</li>
</ul>
<h2 id="1-什么是shell的解释环境，有哪几种"><a href="#1-什么是shell的解释环境，有哪几种" class="headerlink" title="1.什么是shell的解释环境，有哪几种?"></a>1.什么是shell的解释环境，有哪几种?</h2><p>shell脚本要添加解释头<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/3fcbc9ea98c3293cc783ee5fd03b2cf2_1737628795644.png" alt="在这里插入图片描述"><br>l<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42314860/article/details/116797519">inux中shell环境有哪些,Shell 环境</a></p>
<h2 id="2-shell脚本语法规范"><a href="#2-shell脚本语法规范" class="headerlink" title="2.shell脚本语法规范"></a>2.shell脚本语法规范</h2><h3 id="1-执行的脚本，注释不要用中文"><a href="#1-执行的脚本，注释不要用中文" class="headerlink" title="1.执行的脚本，注释不要用中文"></a>1.执行的脚本，注释不要用中文</h3><h3 id="2-必要注释"><a href="#2-必要注释" class="headerlink" title="2.必要注释"></a>2.必要注释</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Author: Hu Fanglei</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Created Time: 2022/09/18 11：04</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Script Description: first shell study script</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-n-不回车换行"><a href="#1-n-不回车换行" class="headerlink" title="1. -n 不回车换行"></a>1. -n 不回车换行</h3><p><code>echo -n &quot;Date is: &quot;; date +%F</code></p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/daff6732d5046de4a59e1293fa3f60c5_1737628795644.png" alt="在这里插入图片描述"></p>
<h3 id="2-不用-n实现同样的效果"><a href="#2-不用-n实现同样的效果" class="headerlink" title="2.不用-n实现同样的效果"></a>2.不用-n实现同样的效果</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/6afa631a33ab782a97a2074ac2d5b290_1737628807471.png" alt="在这里插入图片描述"></p>
<h3 id="3-单引号和双引号的区别"><a href="#3-单引号和双引号的区别" class="headerlink" title="3.单引号和双引号的区别"></a>3.单引号和双引号的区别</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/0216168e9eaef1c38add757d85bb37a8_1737628807471.png" alt="在这里插入图片描述"><br><code>单引号不解释变量，双引号解释变量。</code></p>
<h3 id="4-重定向"><a href="#4-重定向" class="headerlink" title="4.重定向"></a>4.重定向</h3><p>追加并覆盖<br>追加不覆盖<br>统计文件<br>统计内容<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/ed2e77c03479ceb058973318308ab753_1737628807471.png" alt="在这里插入图片描述"><br>硬盘挂载重定向<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/e8ce1de9a2a0a0ad6df01f546109148e_1737628807471.png" alt="在这里插入图片描述"></p>
<h3 id="5-数学运算"><a href="#5-数学运算" class="headerlink" title="5.数学运算"></a>5.数学运算</h3><ul>
<li>1.必须用空格<br>$？表示上一条是否成功<br>对的还是错的都给回收站<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/3a3603cd09536b4771d18602c1f56520_1737628807471.png" alt="在这里插入图片描述"><br>let的使用<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/0f25119629c33e1166261470bdf2135f_1737628817557.png" alt="在这里插入图片描述"><br>内存使用率<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/ca4e28cfa1a225da9daead3c274f04cf_1737628817557.png" alt="在这里插入图片描述"></li>
</ul>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/f9c0be60e45edffc753ba44078342516_1737628817557.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/cfcca4a00e69304d6ad6a6a3c4824a01_1737628817557.png" alt="在这里插入图片描述"><br>运算((  )) 双括号用来计算<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/b7682ebe0d79bf5848e76b778c8a1abe_1737628817557.png" alt="在这里插入图片描述"></p>
<h3 id="6-退出脚本"><a href="#6-退出脚本" class="headerlink" title="6.退出脚本"></a>6.退出脚本</h3><p>exit NUM 退出脚本，释放系统资源，NUM代表一个整数，代表返回值。<br>num的返回 1-255<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/14a1d9d33655fc50ac17aeff90581553_1737628827036.png" alt="在这里插入图片描述"></p>
<h3 id="7-反单引号的作用"><a href="#7-反单引号的作用" class="headerlink" title="7.反单引号的作用"></a>7.反单引号的作用</h3><p>shell中的反引号（<code> </code>）的作用<br>将反引号(<code> </code>)内的字符串当作shell命令来执行，返回值是命令的执行的结果，起到的是一个命令的替换作用。<br>案例:</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/196f65b9f426bf9307bf0e013e62386f_1737628827036.png" alt="在这里插入图片描述"></p>
<p>系列博文</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126883239?spm=1001.2014.3001.5502">shell脚本入门到实战（一）</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126918598?spm=1001.2014.3001.5502">shell脚本入门到实战（二）–shell输入和格式化输出</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126923001?spm=1001.2014.3001.5502">shell脚本入门到实战(三) - 变量</a></li>
<li><a target="_blank" rel="noopener" href="https://hufanglei.blog.csdn.net/article/details/126942721?spm=1001.2014.3001.5502">shell脚本入门到实战（四）- 数组</a></li>
</ul>
<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/60/">60</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">胡方雷</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">1.8m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">26:40</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/hufanglei" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
