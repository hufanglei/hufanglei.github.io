<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"hufanglei.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12,"scrollpercent":true,"onmobile":false},"hljswrap":true,"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
<meta property="og:type" content="blog">
<meta property="og:title" content="个人博客">
<meta property="og:url" content="https://hufanglei.github.io/page/49/index.html">
<meta property="og:site_name" content="个人博客">
<meta property="og:description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="胡方雷">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://hufanglei.github.io/page/49/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/49/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>个人博客</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">个人博客</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">记录生活中的点点滴滴</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">398</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">105</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">594</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="胡方雷"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">胡方雷</p>
  <div class="site-description" itemprop="description">直到这一刻微笑着说话为止，我至少留下了一公升眼泪</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">594</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">105</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">398</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/hufanglei" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hufanglei" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://hufanglei.blog.csdn.net/" title="CSDN → https:&#x2F;&#x2F;hufanglei.blog.csdn.net" rel="noopener me" target="_blank"><i class="crosshairs fa-fw"></i>CSDN</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:690328661@qq.com" title="E-Mail → mailto:690328661@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1518938&auto=1&height=66"></iframe>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title">
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="http://www.alloyteam.com/nav/" title="http:&#x2F;&#x2F;www.alloyteam.com&#x2F;nav&#x2F;" rel="noopener" target="_blank">Web前端导航</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://www.uisdc.com/" title="http:&#x2F;&#x2F;www.uisdc.com&#x2F;" rel="noopener" target="_blank">优设</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://www.zhangxinxu.com/" title="http:&#x2F;&#x2F;www.zhangxinxu.com&#x2F;" rel="noopener" target="_blank">牛人文档</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://ife.baidu.com/" title="http:&#x2F;&#x2F;ife.baidu.com&#x2F;" rel="noopener" target="_blank">百度前端技术学院</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://wf.uisdc.com/cn/" title="http:&#x2F;&#x2F;wf.uisdc.com&#x2F;cn&#x2F;" rel="noopener" target="_blank">google前端开发基础</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2019/06/08/java.lang.UnsatisfiedLinkError!org.apache.hadoop.util.NativeCrc32.nativeComputeChunkedSumsByteArray/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/06/08/java.lang.UnsatisfiedLinkError!org.apache.hadoop.util.NativeCrc32.nativeComputeChunkedSumsByteArray/" class="post-title-link" itemprop="url">java.lang.UnsatisfiedLinkError:org.apache.hadoop.util.NativeCrc32.nativeComputeChunkedSumsByteArray</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-08 20:09:16" itemprop="dateCreated datePublished" datetime="2019-06-08T20:09:16+08:00">2019-06-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>923</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[TOC]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 上传</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">putHDFS</span><span class="params">()</span> <span class="keyword">throws</span> IOException, URISyntaxException, InterruptedException &#123;</span><br><span class="line">      <span class="comment">//创建配置信息</span></span><br><span class="line">      <span class="type">Configuration</span> <span class="variable">conf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>();</span><br><span class="line">      <span class="comment">//设置部分的临时参数</span></span><br><span class="line">      conf.set(<span class="string">&quot;dfs.replication&quot;</span>, <span class="string">&quot;2&quot;</span>);</span><br><span class="line">      <span class="comment">//获取文件系统</span></span><br><span class="line">      <span class="type">FileSystem</span> <span class="variable">fs</span> <span class="operator">=</span> FileSystem.get(<span class="keyword">new</span> <span class="title class_">URI</span>(<span class="string">&quot;hdfs://bigdata121:9000&quot;</span>), conf, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">      <span class="comment">//要上传的本地文件上传的路径</span></span><br><span class="line">      <span class="type">Path</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Path</span>(<span class="string">&quot;F:\\input\\word.txt&quot;</span>);</span><br><span class="line">      <span class="comment">//输出的路径，iput复制到output</span></span><br><span class="line">      <span class="type">Path</span> <span class="variable">output</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Path</span>(<span class="string">&quot;hdfs://bigdata121:9000/word.txt&quot;</span>);</span><br><span class="line">      <span class="comment">//以拷贝的方式</span></span><br><span class="line">      fs.copyFromLocalFile(input, output);</span><br><span class="line">      fs.close();</span><br><span class="line">      System.out.println(<span class="string">&quot;上传成功！！&quot;</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>报错:<br>java.lang.UnsatisfiedLinkError:org.apache.hadoop.util.NativeCrc32.nativeComputeChunkedSumsByteArray.</p>
<h2 id="网上找了个资源，https-github-com-steveloughran-winutils我用的是hadoop2-8-4-但是我选择替换的是hadoop-dll是下面的-https-github-com-steveloughran-winutils-blob-master-hadoop-2-8-1-hadoop-dll-吧他放在-1-hadoop-hom-bin下-2-放在C-Windows-System32下"><a href="#网上找了个资源，https-github-com-steveloughran-winutils我用的是hadoop2-8-4-但是我选择替换的是hadoop-dll是下面的-https-github-com-steveloughran-winutils-blob-master-hadoop-2-8-1-hadoop-dll-吧他放在-1-hadoop-hom-bin下-2-放在C-Windows-System32下" class="headerlink" title="网上找了个资源，https://github.com/steveloughran/winutils我用的是hadoop2.8.4 但是我选择替换的是hadoop.dll是下面的 https://github.com/steveloughran/winutils/blob/master/hadoop-2.8.1/hadoop.dll 吧他放在 - 1.hadoop_hom&#x2F;bin下 - 2.放在C:\Windows\System32下"></a>网上找了个资源，<br><a target="_blank" rel="noopener" href="https://github.com/steveloughran/winutils">https://github.com/steveloughran/winutils</a><br>我用的是hadoop2.8.4 但是我选择替换的是hadoop.dll是<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/6369f0085832f32cbd98be641c5992c9_1737632270334.png" alt="在这里插入图片描述">下面的<br> <a target="_blank" rel="noopener" href="https://github.com/steveloughran/winutils/blob/master/hadoop-2.8.1/hadoop.dll">https://github.com/steveloughran/winutils/blob/master/hadoop-2.8.1/hadoop.dll</a><br> 吧他放在<br> - 1.hadoop_hom&#x2F;bin下<br> - 2.放在C:\Windows\System32下</h2><p>然后运行:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/3459a20dfb966ef7a43603dfeaebcb3a_1737632270334.png" alt="在这里插入图片描述"></p>
<hr>
<p>大功告成!!!</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2019/06/08/hadoop%E4%B9%8Bhdfs%E6%A6%82%E5%BF%B5(7)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/06/08/hadoop%E4%B9%8Bhdfs%E6%A6%82%E5%BF%B5(7)/" class="post-title-link" itemprop="url">hadoop之hdfs概念(7)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-08 10:45:53" itemprop="dateCreated datePublished" datetime="2019-06-08T10:45:53+08:00">2019-06-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@<a href="%E7%9B%AE%E5%BD%95">TOC</a></p>
<h1 id="HDFS"><a href="#HDFS" class="headerlink" title="HDFS"></a>HDFS</h1><h2 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h2><p>HDFS，它是一个文件系统，全称：Hadoop Distributed File System，用于存储文件通过目录树来定位文件；其次，它是分布式的，由很多服务器联合起来实现其功能，集群中的服务器有各自的角色。</p>
<h2 id="2-组成"><a href="#2-组成" class="headerlink" title="2.组成"></a>2.组成</h2><p>1）HDFS集群包括，NameNode和DataNode以及Secondary Namenode。<br>2）NameNode负责管理整个文件系统的元数据，以及每一个路径（文件）所对应的数据块信息。<br>3）DataNode 负责管理用户的文件数据块，每一个数据块都可以在多个datanode上存储多个副本。<br>4）Secondary NameNode用来监控HDFS状态的辅助后台程序，每隔一段时间获取HDFS元数据的快照。</p>
<h2 id="3-HDFS-文件块大小"><a href="#3-HDFS-文件块大小" class="headerlink" title="3.HDFS 文件块大小"></a>3.HDFS 文件块大小</h2><p>HDFS中的文件在物理上是分块存储（block），块的大小可以通过配置参数( dfs.blocksize)来规定，默认大小在hadoop2.x版本中是128M，老版本中是64M<br>HDFS的块比磁盘的块大，其目的是为了最小化寻址开销。如果块设置得足够大，从磁盘传输数据的时间会明显大于定位这个块开始位置所需的时间。因而，传输一个由多个块组成的文件的时间取决于磁盘传输速率。<br>如果寻址时间约为10ms，而传输速率为100MB&#x2F;s，为了使寻址时间仅占传输时间的1%，我们要将块大小设置约为100MB。默认的块大小128MB。<br>块的大小：</p>
<pre><code>10ms*100*100M/s = 100M
</code></pre>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/1af61868d01a1a9519a29bfea2f2b9bc_1737628100996.png" alt="在这里插入图片描述"></p>
<h2 id="4-命令"><a href="#4-命令" class="headerlink" title="4.命令"></a>4.命令</h2><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/2ba17a616d1c7879d42b2b5edf24b186_1737628100996.png" alt="在这里插入图片描述"><br>HFDS命令行操作<br>1）基本语法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/hadoop fs 具体命令</span><br></pre></td></tr></table></figure>
<p>2）参数大全<br>   bin&#x2F;hadoop fs</p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">Usage: hadoop fs <span class="comment">[generic options]</span></span><br><span class="line">	<span class="comment">[-appendToFile &lt;localsrc&gt; ... &lt;dst&gt;]</span></span><br><span class="line">	<span class="comment">[-cat <span class="comment">[-ignoreCrc]</span> &lt;src&gt; ...]</span></span><br><span class="line">	<span class="comment">[-checksum &lt;src&gt; ...]</span></span><br><span class="line">	<span class="comment">[-chgrp <span class="comment">[-R]</span> GROUP PATH...]</span></span><br><span class="line">	<span class="comment">[-chmod <span class="comment">[-R]</span> &lt;MODE<span class="comment">[,MODE]</span>... | OCTALMODE&gt; PATH...]</span></span><br><span class="line">	<span class="comment">[-chown <span class="comment">[-R]</span> <span class="comment">[OWNER]</span><span class="comment">[:<span class="comment">[GROUP]</span>]</span> PATH...]</span></span><br><span class="line">	<span class="comment">[-copyFromLocal <span class="comment">[-f]</span> <span class="comment">[-p]</span> <span class="comment">[-l]</span> <span class="comment">[-d]</span> &lt;localsrc&gt; ... &lt;dst&gt;]</span></span><br><span class="line">	<span class="comment">[-copyToLocal <span class="comment">[-f]</span> <span class="comment">[-p]</span> <span class="comment">[-ignoreCrc]</span> <span class="comment">[-crc]</span> &lt;src&gt; ... &lt;localdst&gt;]</span></span><br><span class="line">	<span class="comment">[-count <span class="comment">[-q]</span> <span class="comment">[-h]</span> <span class="comment">[-v]</span> <span class="comment">[-t <span class="comment">[&lt;storage type&gt;]</span>]</span> <span class="comment">[-u]</span> <span class="comment">[-x]</span> &lt;path&gt; ...]</span></span><br><span class="line">	<span class="comment">[-cp <span class="comment">[-f]</span> <span class="comment">[-p | -p<span class="comment">[topax]</span>]</span> <span class="comment">[-d]</span> &lt;src&gt; ... &lt;dst&gt;]</span></span><br><span class="line">	<span class="comment">[-createSnapshot &lt;snapshotDir&gt; <span class="comment">[&lt;snapshotName&gt;]</span>]</span></span><br><span class="line">	<span class="comment">[-deleteSnapshot &lt;snapshotDir&gt; &lt;snapshotName&gt;]</span></span><br><span class="line">	<span class="comment">[-df <span class="comment">[-h]</span> <span class="comment">[&lt;path&gt; ...]</span>]</span></span><br><span class="line">	<span class="comment">[-du <span class="comment">[-s]</span> <span class="comment">[-h]</span> <span class="comment">[-x]</span> &lt;path&gt; ...]</span></span><br><span class="line">	<span class="comment">[-expunge]</span></span><br><span class="line">	<span class="comment">[-find &lt;path&gt; ... &lt;expression&gt; ...]</span></span><br><span class="line">	<span class="comment">[-get <span class="comment">[-f]</span> <span class="comment">[-p]</span> <span class="comment">[-ignoreCrc]</span> <span class="comment">[-crc]</span> &lt;src&gt; ... &lt;localdst&gt;]</span></span><br><span class="line">	<span class="comment">[-getfacl <span class="comment">[-R]</span> &lt;path&gt;]</span></span><br><span class="line">	<span class="comment">[-getfattr <span class="comment">[-R]</span> &#123;-n name | -d&#125; <span class="comment">[-e en]</span> &lt;path&gt;]</span></span><br><span class="line">	<span class="comment">[-getmerge <span class="comment">[-nl]</span> <span class="comment">[-skip-empty-file]</span> &lt;src&gt; &lt;localdst&gt;]</span></span><br><span class="line">	<span class="comment">[-help <span class="comment">[cmd ...]</span>]</span></span><br><span class="line">	<span class="comment">[-ls <span class="comment">[-C]</span> <span class="comment">[-d]</span> <span class="comment">[-h]</span> <span class="comment">[-q]</span> <span class="comment">[-R]</span> <span class="comment">[-t]</span> <span class="comment">[-S]</span> <span class="comment">[-r]</span> <span class="comment">[-u]</span> <span class="comment">[&lt;path&gt; ...]</span>]</span></span><br><span class="line">	<span class="comment">[-mkdir <span class="comment">[-p]</span> &lt;path&gt; ...]</span></span><br><span class="line">	<span class="comment">[-moveFromLocal &lt;localsrc&gt; ... &lt;dst&gt;]</span></span><br><span class="line">	<span class="comment">[-moveToLocal &lt;src&gt; &lt;localdst&gt;]</span></span><br><span class="line">	<span class="comment">[-mv &lt;src&gt; ... &lt;dst&gt;]</span></span><br><span class="line">	<span class="comment">[-put <span class="comment">[-f]</span> <span class="comment">[-p]</span> <span class="comment">[-l]</span> <span class="comment">[-d]</span> &lt;localsrc&gt; ... &lt;dst&gt;]</span></span><br><span class="line">	<span class="comment">[-renameSnapshot &lt;snapshotDir&gt; &lt;oldName&gt; &lt;newName&gt;]</span></span><br><span class="line">	<span class="comment">[-rm <span class="comment">[-f]</span> <span class="comment">[-r|-R]</span> <span class="comment">[-skipTrash]</span> <span class="comment">[-safely]</span> &lt;src&gt; ...]</span></span><br><span class="line">	<span class="comment">[-rmdir <span class="comment">[--ignore-fail-on-non-empty]</span> &lt;dir&gt; ...]</span></span><br><span class="line">	<span class="comment">[-setfacl <span class="comment">[-R]</span> <span class="comment">[&#123;-b|-k&#125; &#123;-m|-x &lt;acl_spec&gt;&#125; &lt;path&gt;]</span>|<span class="comment">[--set &lt;acl_spec&gt; &lt;path&gt;]</span>]</span></span><br><span class="line">	<span class="comment">[-setfattr &#123;-n name <span class="comment">[-v value]</span> | -x name&#125; &lt;path&gt;]</span></span><br><span class="line">	<span class="comment">[-setrep <span class="comment">[-R]</span> <span class="comment">[-w]</span> &lt;rep&gt; &lt;path&gt; ...]</span></span><br><span class="line">	<span class="comment">[-stat <span class="comment">[format]</span> &lt;path&gt; ...]</span></span><br><span class="line">	<span class="comment">[-tail <span class="comment">[-f]</span> &lt;file&gt;]</span></span><br><span class="line">	<span class="comment">[-test -<span class="comment">[defsz]</span> &lt;path&gt;]</span></span><br><span class="line">	<span class="comment">[-text <span class="comment">[-ignoreCrc]</span> &lt;src&gt; ...]</span></span><br><span class="line">	<span class="comment">[-touchz &lt;path&gt; ...]</span></span><br><span class="line">	<span class="comment">[-truncate <span class="comment">[-w]</span> &lt;length&gt; &lt;path&gt; ...]</span></span><br><span class="line">	<span class="comment">[-usage <span class="comment">[cmd ...]</span>]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3）常用命令实操</p>
<h3 id="（1）-help：输出这个命令参数"><a href="#（1）-help：输出这个命令参数" class="headerlink" title="（1）-help：输出这个命令参数"></a>（1）-help：输出这个命令参数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/hdfs dfs -<span class="built_in">help</span> <span class="built_in">rm</span></span><br></pre></td></tr></table></figure>
<h3 id="（2）-ls-显示目录信息"><a href="#（2）-ls-显示目录信息" class="headerlink" title="（2）-ls: 显示目录信息"></a>（2）-ls: 显示目录信息</h3><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hadoop <span class="built_in">fs</span> -ls /</span><br><span class="line">hadoop <span class="built_in">fs</span> -lsr /</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-mkdir：在hdfs上创建目录"><a href="#3-mkdir：在hdfs上创建目录" class="headerlink" title="(3)-mkdir：在hdfs上创建目录"></a>(3)-mkdir：在hdfs上创建目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs  -<span class="built_in">mkdir</span>  -p  /hdfs路径</span><br></pre></td></tr></table></figure>
<h3 id="4-moveFromLocal从本地剪切粘贴到hdfs"><a href="#4-moveFromLocal从本地剪切粘贴到hdfs" class="headerlink" title="(4)-moveFromLocal从本地剪切粘贴到hdfs"></a>(4)-moveFromLocal从本地剪切粘贴到hdfs</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop  fs  -moveFromLocal  本地路径  /hdfs路径</span><br></pre></td></tr></table></figure>

<h3 id="5-–appendToFile-：追加一个文件到已经存在的文件末尾"><a href="#5-–appendToFile-：追加一个文件到已经存在的文件末尾" class="headerlink" title="(5)–appendToFile  ：追加一个文件到已经存在的文件末尾"></a>(5)–appendToFile  ：追加一个文件到已经存在的文件末尾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop  fs  -appendToFile  本地路径  /hdfs路径</span><br></pre></td></tr></table></figure>
<h3 id="6-cat-：显示文件内容"><a href="#6-cat-：显示文件内容" class="headerlink" title="(6)-cat ：显示文件内容"></a>(6)-cat ：显示文件内容</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -<span class="built_in">cat</span> /hdfs路径</span><br></pre></td></tr></table></figure>

<h3 id="7-tail-f：监控文件"><a href="#7-tail-f：监控文件" class="headerlink" title="(7)-tail -f：监控文件"></a>(7)-tail -f：监控文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop  fs  -<span class="built_in">tail</span> -f /hdfs路径</span><br></pre></td></tr></table></figure>
<h3 id="8-chmod、-chown：linux文件系统中的用法一样，修改文件所属权限"><a href="#8-chmod、-chown：linux文件系统中的用法一样，修改文件所属权限" class="headerlink" title="(8)-chmod、-chown：linux文件系统中的用法一样，修改文件所属权限"></a>(8)-chmod、-chown：linux文件系统中的用法一样，修改文件所属权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hadoop  fs  -<span class="built_in">chmod</span>  777  /hdfs路径</span><br><span class="line">hadoop  fs  -<span class="built_in">chown</span>  someuser:somegrp   /hdfs路径</span><br></pre></td></tr></table></figure>
<h3 id="（9）-cp-：从hdfs的一个路径拷贝到hdfs的另一个路径"><a href="#（9）-cp-：从hdfs的一个路径拷贝到hdfs的另一个路径" class="headerlink" title="（9）-cp ：从hdfs的一个路径拷贝到hdfs的另一个路径"></a>（9）-cp ：从hdfs的一个路径拷贝到hdfs的另一个路径</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hadoop</span>  fs  -cp  /hdfs路径<span class="number">1</span>  / hdfs路径<span class="number">2</span></span><br></pre></td></tr></table></figure>
<h3 id="（10）-mv：在hdfs目录中移动-重命名-文件"><a href="#（10）-mv：在hdfs目录中移动-重命名-文件" class="headerlink" title="（10）-mv：在hdfs目录中移动&#x2F;重命名 文件"></a>（10）-mv：在hdfs目录中移动&#x2F;重命名 文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop  fs  -<span class="built_in">mv</span>  /hdfs路径  / hdfs路径</span><br></pre></td></tr></table></figure>
<h3 id="（11）-get：等同于copyToLocal，就是从hdfs下载文件到本地"><a href="#（11）-get：等同于copyToLocal，就是从hdfs下载文件到本地" class="headerlink" title="（11）-get：等同于copyToLocal，就是从hdfs下载文件到本地"></a>（11）-get：等同于copyToLocal，就是从hdfs下载文件到本地</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -<span class="built_in">get</span> / hdfs路径 ./本地路径</span><br></pre></td></tr></table></figure>
<h3 id="（12）-getmerge-：合并下载多个文到linux本地，比如hdfs的目录-aaa-下有多个文件-log-1-log-2-log-3-…（注：是合成到Linux本地）"><a href="#（12）-getmerge-：合并下载多个文到linux本地，比如hdfs的目录-aaa-下有多个文件-log-1-log-2-log-3-…（注：是合成到Linux本地）" class="headerlink" title="（12）-getmerge  ：合并下载多个文到linux本地，比如hdfs的目录 &#x2F;aaa&#x2F;下有多个文件:log.1, log.2,log.3,…（注：是合成到Linux本地）"></a>（12）-getmerge  ：合并下载多个文到linux本地，比如hdfs的目录 &#x2F;aaa&#x2F;下有多个文件:log.1, log.2,log.3,…（注：是合成到Linux本地）</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -getmerge /aaa/<span class="built_in">log</span>.* ./<span class="built_in">log</span>.<span class="built_in">sum</span></span><br></pre></td></tr></table></figure>
<p>合成到不同的目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -getmerge /hdfs1路径 /hdfs2路径 /</span><br></pre></td></tr></table></figure>
<h3 id="（13）-put：等同于copyFromLocal"><a href="#（13）-put：等同于copyFromLocal" class="headerlink" title="（13）-put：等同于copyFromLocal"></a>（13）-put：等同于copyFromLocal</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop  fs  -<span class="keyword">put</span>  /本地路径  /hdfs路径</span><br></pre></td></tr></table></figure>
<h3 id="（14）-rm：删除文件或文件夹"><a href="#（14）-rm：删除文件或文件夹" class="headerlink" title="（14）-rm：删除文件或文件夹"></a>（14）-rm：删除文件或文件夹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -<span class="built_in">rm</span> -r /hdfs路径</span><br></pre></td></tr></table></figure>

<h3 id="（15）-df-：统计文件系统的可用空间信息"><a href="#（15）-df-：统计文件系统的可用空间信息" class="headerlink" title="（15）-df ：统计文件系统的可用空间信息"></a>（15）-df ：统计文件系统的可用空间信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -<span class="built_in">df</span> -h / hdfs路径</span><br></pre></td></tr></table></figure>

<h3 id="（16）-du统计文件夹的大小信息"><a href="#（16）-du统计文件夹的大小信息" class="headerlink" title="（16）-du统计文件夹的大小信息"></a>（16）-du统计文件夹的大小信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -<span class="built_in">du</span> -s -h / hdfs路径</span><br></pre></td></tr></table></figure>
<p>188.5 M  &#x2F;user&#x2F;hfl&#x2F;wcinput</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -<span class="built_in">du</span>  -h / hdfs路径</span><br></pre></td></tr></table></figure>
<p>188.5 M  &#x2F; hdfs路径<br>97       &#x2F; hdfs路径</p>
<h3 id="（17）-count：统计一个指定目录下的文件节点数量"><a href="#（17）-count：统计一个指定目录下的文件节点数量" class="headerlink" title="（17）-count：统计一个指定目录下的文件节点数量"></a>（17）-count：统计一个指定目录下的文件节点数量</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -<span class="keyword">count</span> <span class="regexp">/aaa/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -<span class="built_in">count</span> / hdfs路径</span><br></pre></td></tr></table></figure>
<p>   1            	2          197657784 &#x2F; hdfs路径<br>第一个参数嵌套文件层级； 第2个参数是 包含文件的总数</p>
<h3 id="（18）-setrep：设置hdfs中文件的副本数量：3是副本数，可改"><a href="#（18）-setrep：设置hdfs中文件的副本数量：3是副本数，可改" class="headerlink" title="（18）-setrep：设置hdfs中文件的副本数量：3是副本数，可改"></a>（18）-setrep：设置hdfs中文件的副本数量：3是副本数，可改</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hadoop</span> fs -setrep <span class="number">3</span> / hdfs路径</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/04ad5eb2fe724bc0e7264a01de6eb5e6_1737628100996.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>这里设置的副本数只是记录在namenode的元数据中，是否真的会有这么多副本，还得看datanode的数量。因为目前只有3台设备，最多也就3个副本，只有节点数的增加到10台时，副本数才能达到10。</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2019/06/07/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%AE%9E%E6%93%8D(6)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/06/07/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%AE%9E%E6%93%8D(6)/" class="post-title-link" itemprop="url">hadoop完全分布式环境搭建实操(6)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-07 17:35:32" itemprop="dateCreated datePublished" datetime="2019-06-07T17:35:32+08:00">2019-06-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@<a href="%E7%9B%AE%E5%BD%95">TOC</a></p>
<h1 id="完全分布式环境搭建实操"><a href="#完全分布式环境搭建实操" class="headerlink" title="完全分布式环境搭建实操"></a>完全分布式环境搭建实操</h1><h2 id="1-前提条件"><a href="#1-前提条件" class="headerlink" title="1.前提条件"></a>1.前提条件</h2><ul>
<li>默认你已经安装好了一台 伪分布式环境，我的是bigdata121</li>
<li>默认你已经看了前面的第5篇文章，完全分布式的规划和步骤，现在只讲实际操作</li>
</ul>
<h2 id="2-修改伪分布式环境的几个hadoop的配置文件"><a href="#2-修改伪分布式环境的几个hadoop的配置文件" class="headerlink" title="2.修改伪分布式环境的几个hadoop的配置文件"></a>2.修改伪分布式环境的几个hadoop的配置文件</h2><p>需要配置的文件<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/2ca076cb5ac12d2e5b4a9bcac3f4e322_1737628100996.png" alt="在这里插入图片描述"><br>bigdata121的配置文件</p>
<h3 id="core-site-xml（不需要改）"><a href="#core-site-xml（不需要改）" class="headerlink" title="core-site.xml（不需要改）"></a>core-site.xml（不需要改）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;!-- 指定HDFS中NameNode的地址 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">&lt;value&gt;hdfs://bigdata121:9000&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 指定hadoop运行时产生文件的存储目录 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">&lt;value&gt;/opt/mod/hadoop-2.8.4/data&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<p>这个文件不需要修改！！</p>
<h3 id="hdfs-site-xml（需要改）"><a href="#hdfs-site-xml（需要改）" class="headerlink" title="hdfs-site.xml（需要改）"></a>hdfs-site.xml（需要改）</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/d16b9ba0da18a4bb1c09a6499f83a4f5_1737628100996.png" alt="在这里插入图片描述"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;!--数据冗余数--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line">&lt;value&gt;1&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!--secondary的地址--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span><br><span class="line">&lt;value&gt;bigdata121:50090&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!--关闭权限--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;dfs.permissions&lt;/name&gt;</span><br><span class="line">&lt;value&gt;false&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<h3 id="hadoop-env-sh-不需要改"><a href="#hadoop-env-sh-不需要改" class="headerlink" title="hadoop-env.sh(不需要改)"></a>hadoop-env.sh(不需要改)</h3><p>原来配置的jdk看下，不需要改<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/13a2769b10b73f6707f23917a7ed30eb_1737628110892.png" alt="在这里插入图片描述"></p>
<h3 id="yarn-site-xml（需要改）"><a href="#yarn-site-xml（需要改）" class="headerlink" title="yarn-site.xml（需要改）"></a>yarn-site.xml（需要改）</h3><p>这里我们想让resouremanager和namendode不在一个机器上，我们把resouremanager放在bigdata122上，故改下，如果你想放在一个机器上，那就不用改了。<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/ccba3b5b6c86d7c9a60549e1a7f718a1_1737628110892.png" alt="在这里插入图片描述"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;!-- reducer获取数据的方式 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br><span class="line">&lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 指定YARN的ResourceManager的地址 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</span><br><span class="line">&lt;value&gt;bigdata122&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 日志聚集功能使能 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;</span><br><span class="line">&lt;value&gt;true&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 日志保留时间设置7天(秒) --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;</span><br><span class="line">&lt;value&gt;604800&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="mapred-site-xml-（可以修改）"><a href="#mapred-site-xml-（可以修改）" class="headerlink" title="mapred-site.xml （可以修改）"></a>mapred-site.xml （可以修改）</h3><p>如果想要yarn的主节点放在bigdata122,那就改下<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/8d7d6530055b56b9869cf3f65b3fca54_1737628110892.png" alt="在这里插入图片描述"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;!-- 指定mr运行在yarn上--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br><span class="line">&lt;value&gt;yarn&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!--历史服务器的地址--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;</span><br><span class="line">&lt;value&gt;bigdata121:10020&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!--历史服务器页面的地址--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;</span><br><span class="line">&lt;value&gt;bigdata121:19888&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line">               </span><br></pre></td></tr></table></figure>
<h3 id="yarn-env-sh、mapred-env-sh（不需要改）"><a href="#yarn-env-sh、mapred-env-sh（不需要改）" class="headerlink" title="yarn-env.sh、mapred-env.sh（不需要改）"></a>yarn-env.sh、mapred-env.sh（不需要改）</h3><ul>
<li>yarn-env.sh<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/1b82f156c911b337f0b97e8816525599_1737628110892.png" alt="在这里插入图片描述"></li>
<li>mapred-env.sh<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/3edb2dfa7647938a065d72379e34a448_1737628110892.png" alt="在这里插入图片描述"></li>
</ul>
<h3 id="slaves-需要修改"><a href="#slaves-需要修改" class="headerlink" title="slaves(需要修改)"></a>slaves(需要修改)</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/66fb3a13a8d6181d70097c6c85e2237e_1737628121975.png" alt="在这里插入图片描述"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bigdata121</span><br><span class="line">bigdata122</span><br><span class="line">bigdata123</span><br></pre></td></tr></table></figure>
<hr>
<p>自此，bigdtata121上的hadoop配置文件完成了。<br>现在我们用scp 吧这些配置发送到bigdata122和bigdata123上。</p>
<h2 id="3-克隆bigdata121的hadoop配置文件"><a href="#3-克隆bigdata121的hadoop配置文件" class="headerlink" title="3.克隆bigdata121的hadoop配置文件"></a>3.克隆bigdata121的hadoop配置文件</h2><ul>
<li>查看bigdata122的环境变量<br>cat &#x2F;etc&#x2F;profile<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/cb380266249b8b15959c527e9addb18a_1737628121975.png" alt="在这里插入图片描述"><br>没有问题。</li>
<li>保证&#x2F;opt&#x2F;mod下没有hadoop配置文件，我们一会吧bigdata121的scp过来<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/bfa1125ffbcd42a1fc7594535616da2b_1737628121975.png" alt="在这里插入图片描述"><br>有hadoop-2.8.4了，我之前拿来测试伪分布式来，干掉，删除。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@bigdata122 mod]# rm -rf hadoop-2.8.4/</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/1c821719ab186d9b367a44ef630f11b0_1737628121975.png" alt="在这里插入图片描述"><br>ok!</p>
<ul>
<li>同样查看bigdata123的环境变量，吧java环境变量和hadoop的给加上和工作目录&#x2F;opt&#x2F;mod完毕。</li>
</ul>
<h3 id="scp文件传输-重点"><a href="#scp文件传输-重点" class="headerlink" title="scp文件传输(重点)"></a>scp文件传输(重点)</h3><p>实现两台远程机器之间的文件传输（bigdata112主机文件拷贝到bigdata113主机上）<br>公式</p>
<blockquote>
<p>scp -r [文件] 用户@主机名:绝对路径<br>注：伪分布式是一台、完全分布是三台</p>
</blockquote>
<p>先切换到bigdata121的 &#x2F;opt&#x2F;mod下<br>依次执行2条命令:</p>
<h4 id="1-scp到bigdata122"><a href="#1-scp到bigdata122" class="headerlink" title="1.scp到bigdata122"></a>1.scp到bigdata122</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@bigdata121 mod]# scp -r hadoop-2.8.4/  root@bigdata122:/opt/mod</span><br></pre></td></tr></table></figure>
<h4 id="2-scp到bigdata123"><a href="#2-scp到bigdata123" class="headerlink" title="2.scp到bigdata123"></a>2.scp到bigdata123</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@bigdata121 mod]# scp -r hadoop-2.8.4/  root@bigdata123:/opt/mod</span><br></pre></td></tr></table></figure>
<h4 id="3-查看"><a href="#3-查看" class="headerlink" title="3.查看"></a>3.查看</h4><p>用hadoop version查看是否克隆成功。<img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/c335a0b2a1a28ff76c7392952e87f09e_1737628121975.png" alt="在这里插入图片描述"></p>
<hr>
<p>如上图，说明ok。</p>
<h2 id="4-格式化Namenode"><a href="#4-格式化Namenode" class="headerlink" title="4.格式化Namenode"></a>4.格式化Namenode</h2><p>在bigdata121上执行下面的命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs namenode -format</span><br></pre></td></tr></table></figure>
<blockquote>
<p>为什么要格式化？<br>NameNode主要被用来管理整个分布式文件系统的命名空间(实际上就是目录和文件)的元数据信息，同时为了保证数据的可靠性，还加入了操作日志，所以，NameNode会持久化这些数据(保存到本地的文件系统中)。对于第一次使用HDFS，在启动NameNode时，需要先执行-format命令，然后才能正常启动NameNode节点的服务。<br>格式化做了哪些事情？<br>在NameNode节点上，有两个最重要的路径，分别被用来存储元数据信息和操作日志，而这两个路径来自于配置文件，它们对应的属性分别是dfs.name.dir和dfs.name.edits.dir，同时，它们默认的路径均是&#x2F;tmp&#x2F;hadoop&#x2F;dfs&#x2F;name。<br>格式化时，NameNode会清空两个目录下的所有文件，之后，会在目录dfs.name.dir下创建文件hadoop.tmp.dir 这个配置，会让dfs.name.dir和dfs.name.edits.dir会让两个目录的文件生成在一个目录里</p>
</blockquote>
<h2 id="5-统一3台服务器的时间"><a href="#5-统一3台服务器的时间" class="headerlink" title="5.统一3台服务器的时间"></a>5.统一3台服务器的时间</h2><p>三台服务器同时执行下面的命令</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">date</span> -s <span class="number">20190608</span></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/e8e692d6e1f0079302b276c622f05d15_1737628131270.png" alt="在这里插入图片描述"><br>ok，时间设置完成。</p>
<h2 id="6-启动dfs"><a href="#6-启动dfs" class="headerlink" title="6.启动dfs"></a>6.启动dfs</h2><p>在bigdata121上执行(因为我们配置的namenode在bigdata121上)</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">start</span>-dfs.sh</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/bacdd15fca19a97c004f0e9f05b7ba43_1737628131270.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/89e2c34383c1c6f70e0cb1d2e81b1a83_1737628131270.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/1022b948690f0a28aa4e9cd813afd3ae_1737628131270.png" alt="在这里插入图片描述"><br>出现上面3个日志，则说明dfs已经启动了。</p>
<h2 id="7-启动yarn"><a href="#7-启动yarn" class="headerlink" title="7.启动yarn"></a>7.启动yarn</h2><p>在bigdata122上执行下面的命令(因为我们配置的yarn的主节点ResourceManager在bigdata122上)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start-yarn.sh</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/81fc0a8a0309b7d652e47e3d75fab3a0_1737628131270.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/aa29cd2d7639f0f8c0d789f981690bb5_1737628140311.png" alt="在这里插入图片描述"><br>和我们规划的一样，说明成功了!!<br>页面效果图<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/31494865b5b53efa8cf7f2b7f9bb055f_1737628140311.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/a0fb1168492232826671f3034c935880_1737628140311.png" alt="在这里插入图片描述"></p>
<h2 id="8-测试"><a href="#8-测试" class="headerlink" title="8.测试"></a>8.测试</h2><p>wordcount案例(就是一个mapreduce程序，统计文件的单词次数)的demo的位置:<br>在&#x2F;opt&#x2F;mod&#x2F;hadoop-2.8.4&#x2F;share&#x2F;hadoop&#x2F;mapreduce&#x2F;hadoop-mapreduce-examples-2.8.4.jar<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/2fe2af8b0b741f6670dc3aca39fd6db9_1737628140311.png" alt="在这里插入图片描述"></p>
<h4 id="写个测试文件"><a href="#写个测试文件" class="headerlink" title="写个测试文件:"></a>写个测试文件:</h4><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/401483c54a31f6555cc651b507d41e8c_1737628140311.png" alt="在这里插入图片描述"><br>cd 到&#x2F;opt&#x2F;mod下<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/1adb6abb1ab81fa92bb32fe5cb7a3aa6_1737628151330.png" alt="在这里插入图片描述"></p>
<h4 id="上传到test文件到dfs的根目录上去"><a href="#上传到test文件到dfs的根目录上去" class="headerlink" title="上传到test文件到dfs的根目录上去"></a>上传到test文件到dfs的根目录上去</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@bigdata121 mod]# hadoop fs -put /opt/mod/test /</span><br></pre></td></tr></table></figure>
<p>效果可以查看到:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/5ce4c6a9d67a92bb685e5063dfec5ff1_1737628151330.png" alt="在这里插入图片描述"></p>
<h4 id="执行wordcount程序"><a href="#执行wordcount程序" class="headerlink" title="执行wordcount程序"></a>执行wordcount程序</h4><p>把test执行下mr的wordcount程序，然后把结果放在dfs根目录的dfs下。<br>切换到&#x2F;opt&#x2F;mod&#x2F;hadoop-2.8.4&#x2F;share&#x2F;hadoop&#x2F;mapreduce下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@bigdata121 mapreduce]# hadoop jar hadoop-mapreduce-examples-2.8.4.jar wordcount /test  /out</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/68bfabed06064cb50602cb571e3abf6a_1737628151330.png" alt="在这里插入图片描述"></p>
<p>看下结果<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/c2896420d1496d53431587919bb1b749_1737628151330.png" alt="在这里插入图片描述"><br>点击箭头下载下来，用文件打开<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/ddaf2b69079a6a2aaab9e700028f9c62_1737628151330.png" alt="在这里插入图片描述"><br>或者用命令的方式:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/1c48f9cbb0691734360562dfd7ae87e7_1737628161214.png" alt="在这里插入图片描述"></p>
<hr>
<p>自此，hadoop完全分布式的环境搭建完成，大功告成！！</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2019/06/07/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E7%9F%A5%E8%AF%86%E5%87%86%E5%A4%87%EF%BC%885%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/06/07/hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E7%9F%A5%E8%AF%86%E5%87%86%E5%A4%87%EF%BC%885%EF%BC%89/" class="post-title-link" itemprop="url">hadoop完全分布式环境搭建知识准备（5）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-07 17:00:50" itemprop="dateCreated datePublished" datetime="2019-06-07T17:00:50+08:00">2019-06-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@<a href="%E7%9B%AE%E5%BD%95">TOC</a></p>
<h1 id="hadoop完全分布式环境搭建"><a href="#hadoop完全分布式环境搭建" class="headerlink" title="hadoop完全分布式环境搭建"></a>hadoop完全分布式环境搭建</h1><h2 id="1-集群规划"><a href="#1-集群规划" class="headerlink" title="1.集群规划"></a>1.集群规划</h2><table>
<thead>
<tr>
<th></th>
<th>bigdata121</th>
<th>bigdata122</th>
<th>bigdata123</th>
</tr>
</thead>
<tbody><tr>
<td>HDFS</td>
<td>NameNode                         SecondaryNameNode                                    DataNode</td>
<td>DataNode</td>
<td>DataNode</td>
</tr>
<tr>
<td>YARN</td>
<td>NodeManager</td>
<td>ResourceManager   NodeManager</td>
<td>NodeManager</td>
</tr>
<tr>
<td>准备3台虚拟机，bigdata121，bigdata122，bigdata123。</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>每台机器上需要部署的内容如上面的表格。</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="2-机器上需要配置的内容"><a href="#2-机器上需要配置的内容" class="headerlink" title="2.机器上需要配置的内容"></a>2.机器上需要配置的内容</h2><h3 id="1）3台虚拟机上-分别配置免密登录，不会的前面的文章有讲到"><a href="#1）3台虚拟机上-分别配置免密登录，不会的前面的文章有讲到" class="headerlink" title="1）3台虚拟机上 分别配置免密登录，不会的前面的文章有讲到"></a>1）3台虚拟机上 分别配置免密登录，不会的前面的文章有讲到</h3><h3 id="2）3台电脑上分别配置jdk和hadoop的环境变量，这个前面的文章也有提到"><a href="#2）3台电脑上分别配置jdk和hadoop的环境变量，这个前面的文章也有提到" class="headerlink" title="2）3台电脑上分别配置jdk和hadoop的环境变量，这个前面的文章也有提到"></a>2）3台电脑上分别配置jdk和hadoop的环境变量，这个前面的文章也有提到</h3><h3 id="3）每台电脑上需要分别配置hadoop解压包下的-etc下的配置文件"><a href="#3）每台电脑上需要分别配置hadoop解压包下的-etc下的配置文件" class="headerlink" title="3）每台电脑上需要分别配置hadoop解压包下的 etc下的配置文件"></a>3）每台电脑上需要分别配置hadoop解压包下的 etc下的配置文件</h3><p>但是每个机器上配置的略有不同。</p>
<h4 id="core-site-xml"><a href="#core-site-xml" class="headerlink" title="core-site.xml"></a>core-site.xml</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 指定HDFS中NameNode的地址 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">&lt;value&gt;hdfs://主机名1:9000&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 指定hadoop运行时产生文件的存储目录 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">&lt;value&gt;/opt/module/hadoop-2.X.X/data/tmp&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="hdfs-site-xml"><a href="#hdfs-site-xml" class="headerlink" title="hdfs-site.xml"></a>hdfs-site.xml</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--数据冗余数--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line">&lt;value&gt;3&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!--secondary的地址--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span><br><span class="line">&lt;value&gt;主机名1:50090&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!--关闭权限--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;dfs.permissions&lt;/name&gt;</span><br><span class="line">&lt;value&gt;false&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="hadoop-env-sh"><a href="#hadoop-env-sh" class="headerlink" title="hadoop-env.sh"></a>hadoop-env.sh</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">（分别在这些的文件中添加下面的路径）</span><br><span class="line">export JAVA_HOME=/opt/module/jdk1.8.0_144（注：是自己安装的路径）</span><br></pre></td></tr></table></figure>
<h4 id="yarn-site-xml"><a href="#yarn-site-xml" class="headerlink" title="yarn-site.xml"></a>yarn-site.xml</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- reducer获取数据的方式 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br><span class="line">&lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 指定YARN的ResourceManager的地址 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</span><br><span class="line">&lt;value&gt;主机名1&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- 日志聚集功能使能 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;</span><br><span class="line">&lt;value&gt;true&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- 日志保留时间设置7天(秒) --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;</span><br><span class="line">&lt;value&gt;604800&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="mapred-site-xml"><a href="#mapred-site-xml" class="headerlink" title="mapred-site.xml"></a>mapred-site.xml</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 指定mr运行在yarn上--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br><span class="line">&lt;value&gt;yarn&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!--历史服务器的地址--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;</span><br><span class="line">&lt;value&gt;主机名1:10020&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!--历史服务器页面的地址--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;</span><br><span class="line">&lt;value&gt;主机名1:19888&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="yarn-env-sh、mapred-env-sh"><a href="#yarn-env-sh、mapred-env-sh" class="headerlink" title="yarn-env.sh、mapred-env.sh"></a>yarn-env.sh、mapred-env.sh</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">（分别在这些的文件中添加下面的路径）</span><br><span class="line">export JAVA_HOME=/opt/module/jdk1.8.0_144（注：是自己安装的路径）</span><br></pre></td></tr></table></figure>
<h4 id="slaves"><a href="#slaves" class="headerlink" title="slaves"></a>slaves</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bigdata111、bigdata112、bigdata113（自己设置的主机名）</span><br></pre></td></tr></table></figure>
<h2 id="3-scp文件传输"><a href="#3-scp文件传输" class="headerlink" title="3.scp文件传输"></a>3.scp文件传输</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">实现两台远程机器之间的文件传输（bigdata122主机文件拷贝到bigdata123主机上）</span><br><span class="line">scp -r [文件] 用户@主机名：绝对路径</span><br></pre></td></tr></table></figure>
<h2 id="4-格式化Namenode"><a href="#4-格式化Namenode" class="headerlink" title="4.格式化Namenode"></a>4.格式化Namenode</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs namenode -format</span><br></pre></td></tr></table></figure>

<h2 id="5-启动集群得命令"><a href="#5-启动集群得命令" class="headerlink" title="5.启动集群得命令"></a>5.启动集群得命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Namenode的主节点：sbin/start-dfs.sh</span><br><span class="line">Yarn的主节点：sbin/stop-yarn.sh</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：Namenode和ResourceManger如果不是同一台机器，不能在NameNode上启动 yarn，应该在ResouceManager所在的机器上启动yarn。</p>
</blockquote>
<h2 id="6-测试自带官方wordcount案例"><a href="#6-测试自带官方wordcount案例" class="headerlink" title="6.测试自带官方wordcount案例"></a>6.测试自带官方wordcount案例</h2><h3 id="随意上传一个文本文件"><a href="#随意上传一个文本文件" class="headerlink" title="随意上传一个文本文件"></a>随意上传一个文本文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">上传命令：hadoop fs -put 文件名 /</span><br></pre></td></tr></table></figure>
<h3 id="执行命令："><a href="#执行命令：" class="headerlink" title="执行命令："></a>执行命令：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.X.X.jar wordcount /入 /出</span><br></pre></td></tr></table></figure>
<p>hadoop jar 路径的jar包 全类名 输入路径 输出路径 </p>
<h3 id="查看结果："><a href="#查看结果：" class="headerlink" title="查看结果："></a>查看结果：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -cat 路径</span><br></pre></td></tr></table></figure>
<h2 id="7-Hadoop启动和停止命令："><a href="#7-Hadoop启动和停止命令：" class="headerlink" title="7.Hadoop启动和停止命令："></a>7.Hadoop启动和停止命令：</h2><p>以下命令都在$HADOOP_HOME&#x2F;sbin下，如果直接使用，记得配置环境变量</p>
<table>
<thead>
<tr>
<th>启动&#x2F;停止历史服务器</th>
<th>mr-jobhistory-daemon.sh   start|stop historyserver</th>
</tr>
</thead>
<tbody><tr>
<td>启动&#x2F;停止总资源管理器</td>
<td>yarn-daemon.sh   start|stop resourcemanager</td>
</tr>
<tr>
<td>启动&#x2F;停止节点管理器</td>
<td>yarn-daemon.sh   start|stop nodemanager</td>
</tr>
<tr>
<td>启动&#x2F;停止 NN 和 DN</td>
<td>start|stop-dfs.sh</td>
</tr>
<tr>
<td>启动&#x2F;停止 RN 和 NM</td>
<td>start|stop-yarn.sh</td>
</tr>
<tr>
<td>启动&#x2F;停止 NN、DN、RN、NM</td>
<td>start|stop-all.sh</td>
</tr>
<tr>
<td>启动&#x2F;停止 NN</td>
<td>hadoop-daemon.sh   start|stop namenode</td>
</tr>
<tr>
<td>启动&#x2F;停止 DN</td>
<td>hadoop-daemon.sh   start|stop datanode</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2019/06/06/hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2(4%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/06/06/hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2(4%EF%BC%89/" class="post-title-link" itemprop="url">hadoop伪分布式部署(4）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-06 23:19:29" itemprop="dateCreated datePublished" datetime="2019-06-06T23:19:29+08:00">2019-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@<a href="%E7%9B%AE%E5%BD%95">TOC</a></p>
<h1 id="伪分布式部署"><a href="#伪分布式部署" class="headerlink" title="伪分布式部署"></a>伪分布式部署</h1><h2 id="1-规划和准备"><a href="#1-规划和准备" class="headerlink" title="1.规划和准备"></a>1.规划和准备</h2><ul>
<li>规划<br>咋规划啊，就一个电脑，但是部署的内容还是需要知道的，麻雀虽小，五脏俱全。每个hadoop环境，包含一个hdfs和一个yarn。<br>具体如下</li>
</ul>
<table>
<thead>
<tr>
<th>架构</th>
<th>bigdata111</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>HDFS</td>
<td>NameNode</td>
<td>存储元数据</td>
</tr>
<tr>
<td></td>
<td>SecondaryNameNode</td>
<td>监控namenode 的元数据，每隔一定的时间进行元数据的合并</td>
</tr>
<tr>
<td></td>
<td>DataNode</td>
<td>存储数据的节点，会对数据块进行校验</td>
</tr>
<tr>
<td>yarn</td>
<td>ResourceManager</td>
<td>处理客户端请求、启动&#x2F;监控ApplicationMaster、监控NodeManager、资源分配与调度</td>
</tr>
<tr>
<td></td>
<td>NodeManager</td>
<td>单个节点上的资源管理、处理来自ResourceManager的命令、处理来自ApplicationMaster的命令</td>
</tr>
</tbody></table>
<ul>
<li>准备<br>关闭防火墙（看前面的文章）、静态ip（192.168.157.121）、设置主机名称为bigdata121</li>
</ul>
<h2 id="2-解压方式安装hadoop2-8-4和jdk8并配置环境变量"><a href="#2-解压方式安装hadoop2-8-4和jdk8并配置环境变量" class="headerlink" title="2.解压方式安装hadoop2.8.4和jdk8并配置环境变量"></a>2.解压方式安装hadoop2.8.4和jdk8并配置环境变量</h2><h3 id="①压缩包位置"><a href="#①压缩包位置" class="headerlink" title="①压缩包位置"></a>①压缩包位置</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/1b4c48f0dd62451c43de5a10054eb2ff_1737628161214.png" alt="在这里插入图片描述"></p>
<h3 id="②解压位置"><a href="#②解压位置" class="headerlink" title="②解压位置"></a>②解压位置</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/6e33d24ccb44f21acb4da4fd9022d96c_1737628161214.png" alt="在这里插入图片描述"></p>
<h3 id="③配置环境变量"><a href="#③配置环境变量" class="headerlink" title="③配置环境变量"></a>③配置环境变量</h3><ul>
<li>vi &#x2F;etc&#x2F;profile<br>后面追加下面的代码</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/opt/mod/jdk1.8.0_144</span><br><span class="line">export HADOOP_HOME=/opt/mod/hadoop-2.8.4</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br></pre></td></tr></table></figure>
<ul>
<li>source &#x2F;etc&#x2F;profile</li>
</ul>
<h2 id="3-配置hdfs"><a href="#3-配置hdfs" class="headerlink" title="3.配置hdfs"></a>3.配置hdfs</h2><p>切换到&#x2F;opt&#x2F;mod&#x2F;hadoop-2.8.4&#x2F;etc&#x2F;hadoop目录下<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/557c251b0cdbe28b36d67f15e0a02333_1737628161214.png" alt="在这里插入图片描述"></p>
<h3 id="1-配置core-site-xml"><a href="#1-配置core-site-xml" class="headerlink" title="1.配置core-site.xml"></a>1.配置core-site.xml</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 指定HDFS中NameNode的地址 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">&lt;value&gt;hdfs://bigdata121:9000&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 指定hadoop运行时产生文件的存储目录 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">&lt;value&gt;/opt/mod/hadoop-2.8.4/data&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-配置hdfs-site-xml"><a href="#2-配置hdfs-site-xml" class="headerlink" title="2.配置hdfs-site.xml"></a>2.配置hdfs-site.xml</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--数据冗余数--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line">&lt;value&gt;1&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!--secondary的地址--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span><br><span class="line">&lt;value&gt;bigdata121:50090&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!--关闭权限--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;dfs.permissions&lt;/name&gt;</span><br><span class="line">&lt;value&gt;false&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3-修改hadoop-env-sh"><a href="#3-修改hadoop-env-sh" class="headerlink" title="3.修改hadoop-env.sh"></a>3.修改hadoop-env.sh</h3><p>25行指定自己的java_home</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">24 # The java implementation to use.</span><br><span class="line">25 export JAVA_HOME=/opt/mod/jdk1.8.0_144</span><br></pre></td></tr></table></figure>
<p>至此，hdfs已经部署成功了</p>
<h3 id="4-测试"><a href="#4-测试" class="headerlink" title="4.测试"></a>4.测试</h3><ul>
<li><pre><code>格式化Namenode
</code></pre>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs namenode -format</span><br></pre></td></tr></table></figure>
<ul>
<li>启动hdfs</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start-dfs.sh</span><br></pre></td></tr></table></figure>
<ul>
<li>命令查看hdfs是否启动</li>
<li><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/43377b8752473911ac675672fcca7888_1737628161214.png" alt="在这里插入图片描述"></li>
<li>浏览器打开测试<br><a target="_blank" rel="noopener" href="http://192.168.157.121:50070/">http://192.168.157.121:50070</a><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/d976d10e8ca58de80c3dbc811955a8f3_1737628170132.png" alt="在这里插入图片描述"><br>出现这个页面就成功了。</li>
<li>测试一个上传文件<br>在 &#x2F;opt&#x2F;mod下新建个test文件，内容如下<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/bfdb3971981302cecce7ec5f3f85b02c_1737628170132.png" alt="在这里插入图片描述"></li>
<li>切换到&#x2F;opt&#x2F;mod下，上传到hdfs根目录去</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -put test / </span><br></pre></td></tr></table></figure>
<p>2个地方可以看到<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/08579b17bc590398cb7837f61c3f38fd_1737628170132.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/210f975870346e632c69cb8dd62366f4_1737628170132.png" alt="在这里插入图片描述"></p>
<hr>
<p>自此hdfs配置成功,下面配置yarn。</p>
<h2 id="yarn配置"><a href="#yarn配置" class="headerlink" title="yarn配置"></a>yarn配置</h2><p>切换到&#x2F;opt&#x2F;mod&#x2F;hadoop-2.8.4&#x2F;etc&#x2F;hadoop目录下</p>
<h3 id="1-配置yarn-site-xml"><a href="#1-配置yarn-site-xml" class="headerlink" title="1.配置yarn-site.xml"></a>1.配置yarn-site.xml</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- reducer获取数据的方式 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br><span class="line">&lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 指定YARN的ResourceManager的地址 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</span><br><span class="line">&lt;value&gt;bigdata121&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- 日志聚集功能使能 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;</span><br><span class="line">&lt;value&gt;true&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- 日志保留时间设置7天(秒) --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;</span><br><span class="line">&lt;value&gt;604800&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-配置mapred-site-xml"><a href="#2-配置mapred-site-xml" class="headerlink" title="2.配置mapred-site.xml"></a>2.配置mapred-site.xml</h3><p>因为没有mapred-site.xml，可以使用<br><code>cp mapred-site.xml.template mapred-site.xml</code><br>克隆一份<br>然后修改mapred-site.xml</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;!-- 指定mr运行在yarn上--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br><span class="line">&lt;value&gt;yarn&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!--历史服务器的地址--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;</span><br><span class="line">&lt;value&gt;bigdata121:10020&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!--历史服务器页面的地址--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;</span><br><span class="line">&lt;value&gt;bigdata121:19888&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-修改yarn-env-sh"><a href="#3-修改yarn-env-sh" class="headerlink" title="3.修改yarn-env.sh"></a>3.修改yarn-env.sh</h3><p>明确指定全路径java目录<br>23行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">22 # some Java parameters</span><br><span class="line">23  export JAVA_HOME=/opt/mod/jdk1.8.0_144</span><br></pre></td></tr></table></figure>
<h3 id="4-修改mapred-env-sh"><a href="#4-修改mapred-env-sh" class="headerlink" title="4.修改mapred-env.sh"></a>4.修改mapred-env.sh</h3><p>第16行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">16  export JAVA_HOME=/opt/mod/jdk1.8.0_144</span><br></pre></td></tr></table></figure>

<hr>
<p>自此，yarn已经配置好了</p>
<h3 id="5-测试"><a href="#5-测试" class="headerlink" title="5.测试"></a>5.测试</h3><h4 id="执行start-yarn-sh"><a href="#执行start-yarn-sh" class="headerlink" title="执行start-yarn.sh"></a>执行start-yarn.sh</h4><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/027ebd250093aed6f65107ba65d74d7d_1737628170132.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/796762c913c8354f066e8822885aa076_1737628180753.png" alt="在这里插入图片描述"><br>以上2图都说明yarn也已经启动了。</p>
<hr>
<p>自此，hadoop伪分布部署已经全部部署功能， 补充点概念</p>
<ul>
<li><p>为什么要格式化？<br>NameNode主要被用来管理整个分布式文件系统的命名空间(实际上就是目录和文件)的元数据信息，同时为了保证数据的可靠性，还加入了操作日志，所以，NameNode会持久化这些数据(保存到本地的文件系统中)。对于第一次使用HDFS，在启动NameNode时，需要先执行-format命令，然后才能正常启动NameNode节点的服务。<br>格式化做了哪些事情？<br>在NameNode节点上，有两个最重要的路径，分别被用来存储元数据信息和操作日志，而这两个路径来自于配置文件，它们对应的属性分别是dfs.name.dir和dfs.name.edits.dir，同时，它们默认的路径均是&#x2F;tmp&#x2F;hadoop&#x2F;dfs&#x2F;name。格式化时，NameNode会清空两个目录下的所有文件，之后，会在目录dfs.name.dir下创建文件<br>hadoop.tmp.dir 这个配置，会让dfs.name.dir和dfs.name.edits.dir会让两个目录的文件生成在一个目录里</p>
</li>
<li><p>启动集群得命令：<br>Namenode的主节点：sbin&#x2F;start-dfs.sh<br>Yarn的主节点：sbin&#x2F;stop-yarn.sh</p>
</li>
</ul>
<p>注意：Namenode和ResourceManger如果不是同一台机器，不能在NameNode上启动 yarn，应该在ResouceManager所在的机器上启动yarn。</p>
<hr>
<p>自此，本文大功告成!!</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2019/06/06/hadoop%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2%E5%87%86%E5%A4%87%E4%B9%8B%E5%85%8D%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95%EF%BC%883%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/06/06/hadoop%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2%E5%87%86%E5%A4%87%E4%B9%8B%E5%85%8D%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95%EF%BC%883%EF%BC%89/" class="post-title-link" itemprop="url">hadoop分布式部署准备之免密码登录（3）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-06 23:01:19" itemprop="dateCreated datePublished" datetime="2019-06-06T23:01:19+08:00">2019-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>732</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@<a href="%E7%9B%AE%E5%BD%95">TOC</a></p>
<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>现在有3台centos7虚拟机，分别为bigdata121，bigdata122，bigdata123，用xshell工具这3台虚拟机自己和自己，以及相互之间进行免密登录。</p>
<h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><h3 id="1-在xshell上设置一键控制3个窗口"><a href="#1-在xshell上设置一键控制3个窗口" class="headerlink" title="1.在xshell上设置一键控制3个窗口"></a>1.在xshell上设置一键控制3个窗口</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/1a76731f87868412fa02a86bf6a0071a_1737628180753.png" alt="在这里插入图片描述"><br>在xshell菜单栏依次点击 : 选项卡&gt;排列&gt;水平排列<br>在xshell菜单栏依次点击 : 工具&gt;发送键到所有会话</p>
<h3 id="2-生成公钥和私钥"><a href="#2-生成公钥和私钥" class="headerlink" title="2.生成公钥和私钥"></a>2.生成公钥和私钥</h3><pre><code>ssh-keygen -t rsa
</code></pre>
<p>然后按3次回车，<br>可以看到，在家目录上，有个隐藏的.ssh文件<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/da44372d35186e46c35d41daa493461e_1737628180753.png" alt="在这里插入图片描述"><br>会生成两个文件id_rsa（私钥）、id_rsa.pub（公钥）<img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/155b92c90ea502d91a8a689fb1f51f26_1737628180753.png" alt="在这里插入图片描述"></p>
<h3 id="3-将公钥拷贝到要免密登录的目标机器上"><a href="#3-将公钥拷贝到要免密登录的目标机器上" class="headerlink" title="3.将公钥拷贝到要免密登录的目标机器上"></a>3.将公钥拷贝到要免密登录的目标机器上</h3><h4 id="取消步骤1的一键控制3个面板窗口，"><a href="#取消步骤1的一键控制3个面板窗口，" class="headerlink" title="取消步骤1的一键控制3个面板窗口，"></a>取消步骤1的一键控制3个面板窗口，</h4><h4 id="在bigdata121上分别执行下面的命令"><a href="#在bigdata121上分别执行下面的命令" class="headerlink" title="在bigdata121上分别执行下面的命令"></a>在bigdata121上分别执行下面的命令</h4><p>•	ssh-copy-id bigdata121<br>•	ssh-copy-id  bigdata122<br>•	ssh-copy-id  bigdata123<br>执行完，在命令行分别执行 ssh bigdata121，bigdata122，bigdata123测试，看是否能切换登录上</p>
<h4 id="在bigdata122执行和机器bigdata121一样的3条命令"><a href="#在bigdata122执行和机器bigdata121一样的3条命令" class="headerlink" title="在bigdata122执行和机器bigdata121一样的3条命令"></a>在bigdata122执行和机器bigdata121一样的3条命令</h4><h4 id="在bigdata123执行和机器bigdata121一样的3条命令"><a href="#在bigdata123执行和机器bigdata121一样的3条命令" class="headerlink" title="在bigdata123执行和机器bigdata121一样的3条命令"></a>在bigdata123执行和机器bigdata121一样的3条命令</h4><p>成功的效果:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/c341553eb454bff1399430f7bbc798f2_1737628180753.png" alt="在这里插入图片描述"></p>
<hr>
<p>自此大功告成，按照以往，可以收工了，但是我这里要补充下理论知识,现在在看下.ssh下的文件夹<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/6092f6600ff5a24ff8e4a16fe1d10b72_1737628190949.png" alt="在这里插入图片描述"><br>圈出来的文件就是存储免密的密码的</p>
<h2 id="总结和理论"><a href="#总结和理论" class="headerlink" title="总结和理论"></a>总结和理论</h2><pre><code>.ssh文件夹下的文件功能解释
</code></pre>
<p>1）~&#x2F;.ssh&#x2F;known_hosts ：记录ssh访问过计算机的公钥(public key)<br>2）id_rsa ：生成的私钥<br>3）id_rsa.pub ：生成的公钥<br>4）authorized_keys ：存放授权过得无秘登录服务器公钥</p>
<hr>
<p>自此，真的可以大功告成了！！</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2019/06/06/hadoop%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%87%86%E5%A4%87(2)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/06/06/hadoop%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%87%86%E5%A4%87(2)/" class="post-title-link" itemprop="url">hadoop运行环境搭建准备(2)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-06 22:20:44" itemprop="dateCreated datePublished" datetime="2019-06-06T22:20:44+08:00">2019-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@<a href="%E7%9B%AE%E5%BD%95">TOC</a></p>
<h2 id="1-准备"><a href="#1-准备" class="headerlink" title="1.准备:"></a>1.准备:</h2><ul>
<li>1.准备三台unix虚拟机并安装centos7系统，主机名f分别为:</li>
<li>bigdata121</li>
<li>bigdata122</li>
<li>bigdata123<br>对应的固定ip分别为:</li>
<li>192.168.157.121</li>
<li>192.168.157.122</li>
<li>192.168.157.123</li>
</ul>
<p> 2.jdk-8u144-linux-x64.tar.gz</p>
<p>3.hadoop-2.8.4.tar.gz</p>
<h2 id="2-环境配置"><a href="#2-环境配置" class="headerlink" title="2.环境配置"></a>2.环境配置</h2><h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><ul>
<li>关闭防火墙：systemctl stop firewalld.service</li>
<li>禁用防火墙：systemctl disable firewalld.service</li>
<li>查看防火墙：systemctl status firewalld.service</li>
</ul>
<h3 id="关闭Selinux（可选）"><a href="#关闭Selinux（可选）" class="headerlink" title="关闭Selinux（可选）"></a>关闭Selinux（可选）</h3><p>不了解selinux的可以<a target="_blank" rel="noopener" href="https://blog.csdn.net/Kangshuo2471781030/article/details/79294506">点此了解</a><br>	<br>	vi &#x2F;etc&#x2F;selinux &#x2F;config<br>将SELINUX&#x3D;enforcing改为SELINUX&#x3D;disabled</p>
<h3 id="修改IP"><a href="#修改IP" class="headerlink" title="修改IP"></a>修改IP</h3><h4 id="1-vi-etc-sysconfig-network-scripts-ifcfg-ens33"><a href="#1-vi-etc-sysconfig-network-scripts-ifcfg-ens33" class="headerlink" title="1. vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33"></a>1. vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">BOOTPROTO=static</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=192.168.X.121</span><br><span class="line">GATEWAY=192.168.X.2</span><br><span class="line">DNS1=8.8.8.8</span><br><span class="line">DNS2=8.8.4.4</span><br><span class="line">NETMASK=255.255.255.0</span><br></pre></td></tr></table></figure>
<p>我的vmnet8虚拟机网段为157,自己固定的，所以<br>IPADDR&#x3D;192.168.157.121<br>GATEWAY&#x3D;192.168.157.2<br>不会固定wlan的可以百度下。<br><img src="https://i-blog.csdnimg.cn/blog_migrate/f7428f42c3632019c4fcaa693353d6a0.png" alt="在这里插入图片描述"><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/d30ca207c287c3e9109ff30aba50a496_1737628190949.png" alt="在这里插入图片描述"></p>
<h4 id="2-vi-etc-resolv-conf"><a href="#2-vi-etc-resolv-conf" class="headerlink" title="2. vi &#x2F;etc&#x2F;resolv.conf"></a>2. vi &#x2F;etc&#x2F;resolv.conf</h4><pre><code>nameserver 8.8.8.8
nameserver 8.8.4.4 
</code></pre>
<h4 id="3-重启网卡："><a href="#3-重启网卡：" class="headerlink" title="3.重启网卡："></a>3.重启网卡：</h4><pre><code>servie network restart
</code></pre>
<h4 id="4-修改主机名"><a href="#4-修改主机名" class="headerlink" title="4.修改主机名"></a>4.修改主机名</h4><pre><code>hostnamectl set-hostname 主机名
</code></pre>
<p>我的主机名为 bigdata121</p>
<h4 id="5-IP和主机名关系映射"><a href="#5-IP和主机名关系映射" class="headerlink" title="5.IP和主机名关系映射"></a>5.IP和主机名关系映射</h4><p><code>vi /etc/hosts</code><br>	192.168.1.121 bigdata121<br>	192.168.1.122 bigdata122<br>	192.168.1.123 bigdata123</p>
<h4 id="6-在bigdata121上分别发送这个文件到bigdata122和bigdata123上"><a href="#6-在bigdata121上分别发送这个文件到bigdata122和bigdata123上" class="headerlink" title="6.在bigdata121上分别发送这个文件到bigdata122和bigdata123上"></a>6.在bigdata121上分别发送这个文件到bigdata122和bigdata123上</h4><pre><code>scp /etc/hosts root@bigdata122:/etc/

scp /etc/hosts root@bigdata122:/etc/
</code></pre>
<h4 id="7-在windows上修改hosts（可选）"><a href="#7-在windows上修改hosts（可选）" class="headerlink" title="7.在windows上修改hosts（可选）"></a>7.在windows上修改hosts（可选）</h4><p> 在windows的C:\Windows\System32\drivers\etc路径下找到hosts并添加</p>
<pre><code>192.168.1.121 bigdata121
192.168.1.122 bigdata122
192.168.1.123 bigdata123
</code></pre>
<p>注意:这步也可以暂时忽略，这句的主要作用是在hadoop的客户端页面，下载download的文件使用，不配置这个，下载会报个错误。</p>
<h3 id="3-在opt目录下创建文件"><a href="#3-在opt目录下创建文件" class="headerlink" title="3.	在opt目录下创建文件"></a>3.	在opt目录下创建文件</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/c0440f03894ac191ada0a010737b3fce_1737628190949.png" alt="在这里插入图片描述"><br>创建&#x2F;opt&#x2F;soft 放jdk和hadoop的tar包，例如<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/632caa28655b2c9711e07a4477f1d6f7_1737628190949.png" alt="在这里插入图片描述"><br>创建&#x2F;opt&#x2F;mod 安装软件解压目录，例如<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/277664745d982c7b28094444a7c23d03_1737628190949.png" alt="在这里插入图片描述"></p>
<h3 id="4-创建一个用户-可选"><a href="#4-创建一个用户-可选" class="headerlink" title="4.创建一个用户(可选)"></a>4.创建一个用户(可选)</h3><ul>
<li><p>创建普通用户hfl：</p>
<pre><code>adduser hfl
passwd hfl
</code></pre>
</li>
<li><p>设置hfl用户具有root权限	<br>  vi &#x2F;etc&#x2F;sudoers 92行 找到root ALL&#x3D;(ALL) ALL,<br>  复制一行：hfl ALL&#x3D;(ALL) ALL<br>  <img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/9e65e5af1d9538b7204cf2e26095cf1d_1737628199835.png" alt="在这里插入图片描述"></p>
</li>
</ul>
<h3 id="5-安装jdk"><a href="#5-安装jdk" class="headerlink" title="5. 安装jdk"></a>5. 安装jdk</h3><ul>
<li>   解压jdk到&#x2F;opt&#x2F;module目录下<br>tar -zxvf jdk-8u144-linux-x64.tar.gz -C &#x2F;opt&#x2F;mod&#x2F;</li>
<li>配置jdk环境变量<br>vi &#x2F;etc&#x2F;profile<br>export JAVA_HOME&#x3D;&#x2F;opt&#x2F;mod&#x2F;jdk1.8.0_144<br>export PATH&#x3D;$PATH:$JAVA_HOME&#x2F;bin<br>source &#x2F;etc&#x2F;profile</li>
<li>测试jdk安装成功<br>java -version</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2019/06/06/hadoop%E6%A6%82%E8%AE%BA(1)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/06/06/hadoop%E6%A6%82%E8%AE%BA(1)/" class="post-title-link" itemprop="url">hadoop概论(1)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-06 21:36:06" itemprop="dateCreated datePublished" datetime="2019-06-06T21:36:06+08:00">2019-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@<a href="%E7%9B%AE%E5%BD%95">TOC</a></p>
<h2 id="1-项目起源"><a href="#1-项目起源" class="headerlink" title="1.项目起源"></a>1.项目起源</h2><p>•	Hadoop由 Apache Software Foundation 公司于 2005 年秋天作为Lucene的子项目Nutch的一部分正式引入。它受到最先由 Google Lab 开发的 Map&#x2F;Reduce 和 Google File System(GFS) 的启发</p>
<blockquote>
<p>Google是Hadoop的思想之源（Google在大数据方面的三篇论文）</p>
</blockquote>
<p>•	GFS &#x3D;&#x3D;&#x3D;&#x3D;&gt; HDFS<br>•	Map-Reduce &#x3D;&#x3D;&#x3D;&#x3D;&gt; MR<br>•	BigTable &#x3D;&#x3D;&#x3D;&#x3D;&gt; HBase</p>
<h2 id="2-Hadoop的优势"><a href="#2-Hadoop的优势" class="headerlink" title="2.Hadoop的优势"></a>2.Hadoop的优势</h2><ul>
<li>高可靠性：<br>因为Hadoop假设计算元素和存储会出现故障，因为它维护多个工作数据副本，在出现故障时可以对失败的节点重新分布处理。</li>
<li>   高扩展性：<br>在集群间分配任务数据，可方便的扩展数以千计的节点。</li>
<li>   高效性：<br>在MapReduce的思想下，Hadoop是并行工作的，以加快任务处理速度。</li>
<li>   高容错性：<br>自动保存多份副本数据，并且能够自动将失败的任务重新分配。</li>
</ul>
<h2 id="3-Hadoop组成"><a href="#3-Hadoop组成" class="headerlink" title="3.Hadoop组成"></a>3.Hadoop组成</h2><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/3baf8cfc656e14104698967a586ed102_1737628199835.png" alt="在这里插入图片描述"></p>
<ul>
<li>Hadoop HDFS：<br>   一个高可靠、高吞吐量的分布式文件系统。</li>
<li>   Hadoop MapReduce：<br>   一个分布式的离线并行计算框架。</li>
<li>Hadoop YARN：<br>  作业调度与集群资源管理的框架。</li>
<li>hadoop Common：<br> 支持其他模块的工具模块（Configuration、RPC、序列化机制、日志操作）</li>
</ul>
<h2 id="4-HDFS架构概述"><a href="#4-HDFS架构概述" class="headerlink" title="4.HDFS架构概述"></a>4.HDFS架构概述</h2><ul>
<li>Namenode：存储元数据</li>
<li>Datanode：存储数据的节点，会对数据块进行校验</li>
<li>Secondarynamenode：监控namenode 的元数据，每隔一定的时间进行元数据的合并</li>
</ul>
<h2 id="5-YARN架构概述"><a href="#5-YARN架构概述" class="headerlink" title="5.YARN架构概述"></a>5.YARN架构概述</h2><ul>
<li>ResourceManager(rm)：<br>处理客户端请求、启动&#x2F;监控ApplicationMaster、监控NodeManager、资源分配与调度</li>
<li>NodeManager(nm)：<br>单个节点上的资源管理、处理来自ResourceManager的命令、处理来自ApplicationMaster的命令</li>
<li>ApplicationMaster：<br>数据切分、为应用程序申请资源，并分配给内部任务、任务监控与容错</li>
<li>Container：<br>对任务运行环境的抽象，封装了CPU、内存等多维资源以及环境</li>
</ul>
<h2 id="6-MapReduce架构概述"><a href="#6-MapReduce架构概述" class="headerlink" title="6.MapReduce架构概述"></a>6.MapReduce架构概述</h2><ul>
<li>MapReduce将计算过程分为两个阶段：Map和Reduce</li>
<li>Map阶段并行处理输入数据</li>
<li>Reduce阶段对Map结果进行汇总</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2019/06/06/ionic4%20click%E9%98%B2%E6%8A%96%E6%8C%87%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/06/06/ionic4%20click%E9%98%B2%E6%8A%96%E6%8C%87%E4%BB%A4/" class="post-title-link" itemprop="url">ionic4 click防抖指令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-06 13:52:21" itemprop="dateCreated datePublished" datetime="2019-06-06T13:52:21+08:00">2019-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<blockquote>
<p>案例: 一个登陆页面，连续多次点击登陆按钮，会造成多次触发提交事件，解决方式很多，但是感觉指令方式使用起来更简单，代码更简洁。</p>
</blockquote>
<h1 id="自定义click防抖指令"><a href="#自定义click防抖指令" class="headerlink" title="自定义click防抖指令"></a>自定义click防抖指令</h1><h2 id="1-ionic4-内置指令生成一个空的指令"><a href="#1-ionic4-内置指令生成一个空的指令" class="headerlink" title="1.ionic4 内置指令生成一个空的指令"></a>1.ionic4 内置指令生成一个空的指令</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ionic g directive directives/debounce-click</span><br></pre></td></tr></table></figure>
<p>生成文件如下:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/deee9d1003730b03148f4a99ef850710_1737632270334.png" alt="在这里插入图片描述"></p>
<h2 id="2-书写debounce-click-directive-ts指令"><a href="#2-书写debounce-click-directive-ts指令" class="headerlink" title="2.书写debounce-click.directive.ts指令"></a>2.书写debounce-click.directive.ts指令</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Directive</span>, <span class="title class_">EventEmitter</span>, <span class="title class_">HostListener</span>, <span class="title class_">Input</span>, <span class="title class_">OnInit</span>, <span class="title class_">Output</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Subject</span>, <span class="title class_">Subscription</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;debounceTime&#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs/operators&#x27;</span>;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">Directive</span>(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;[appDebounceClick]&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DebounceClickDirective</span> implements <span class="title class_">OnInit</span> &#123;</span><br><span class="line">    @<span class="title class_">Input</span>() debounceTime = <span class="number">500</span>;</span><br><span class="line">    @<span class="title class_">Output</span>() debounceClick = <span class="keyword">new</span> <span class="title class_">EventEmitter</span>();</span><br><span class="line">    private clicks = <span class="keyword">new</span> <span class="title class_">Subject</span>();</span><br><span class="line">    private <span class="attr">subscription</span>: <span class="title class_">Subscription</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">ngOnInit</span>(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">subscription</span> = <span class="variable language_">this</span>.<span class="property">clicks</span>.<span class="title function_">pipe</span>(</span><br><span class="line">            <span class="title function_">debounceTime</span>(<span class="variable language_">this</span>.<span class="property">debounceTime</span>)</span><br><span class="line">        ).<span class="title function_">subscribe</span>(<span class="function"><span class="params">e</span> =&gt;</span> <span class="variable language_">this</span>.<span class="property">debounceClick</span>.<span class="title function_">emit</span>(e));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">ngOnDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">subscription</span>.<span class="title function_">unsubscribe</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @<span class="title class_">HostListener</span>(<span class="string">&#x27;click&#x27;</span>, [<span class="string">&#x27;$event&#x27;</span>])</span><br><span class="line">    <span class="title function_">clickEvent</span>(<span class="params">event</span>) &#123;</span><br><span class="line">        event.<span class="title function_">preventDefault</span>();</span><br><span class="line">        event.<span class="title function_">stopPropagation</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Click from Host Element!&#x27;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">clicks</span>.<span class="title function_">next</span>(event);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-登录页使用自定义的指令"><a href="#3-登录页使用自定义的指令" class="headerlink" title="3.登录页使用自定义的指令"></a>3.登录页使用自定义的指令</h2><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/4e87ac6e0e72dedae7594c39d46f1fdf_1737632281867.png" alt="在这里插入图片描述"></p>
<ul>
<li>1）在login.module.ts的声明中引入自定义的click指令<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/247bef105b8c10aa8e9cde939b132343_1737632281867.png" alt="在这里插入图片描述"></li>
<li>2）login.html页面中使用<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/0cf41a654e97ef67b17ac3e39871de2a_1737632281867.png" alt="在这里插入图片描述"><br>其中login方法就是实现提交时候写的方法，在login.page.ts中<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/2aaef7c73eb265579032b4caf8d5377f_1737632281867.png" alt="在这里插入图片描述"></li>
<li>3）测试<br>ok，就不截图了</li>
</ul>
<hr>
<p>自此，大工告成！！</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2019/06/06/ionic4%20%E8%87%AA%E5%AE%9A%E4%B9%89pipe/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/06/06/ionic4%20%E8%87%AA%E5%AE%9A%E4%B9%89pipe/" class="post-title-link" itemprop="url">ionic4 自定义pipe</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-06 08:52:26" itemprop="dateCreated datePublished" datetime="2019-06-06T08:52:26+08:00">2019-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>562</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<blockquote>
<p>例子: 有个 需要根据时间转换成周几的需求，我们可以用管道过滤自定义pipe实现</p>
</blockquote>
<h2 id="1-命令"><a href="#1-命令" class="headerlink" title="1.命令"></a>1.命令</h2><pre><code>ionic g pipe pipes/convertWeek
</code></pre>
<p>生成下面的2个文件:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/e125e13864e19493a2c6528a9760f201_1737632281867.png" alt="在这里插入图片描述"></p>
<h2 id="2-书写covert-week-pipe"><a href="#2-书写covert-week-pipe" class="headerlink" title="2.书写covert-week.pipe"></a>2.书写covert-week.pipe</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Pipe</span>, <span class="title class_">PipeTransform</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">Pipe</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;convertWeek&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">ConvertWeekPipe</span> implements <span class="title class_">PipeTransform</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">transform</span>(<span class="attr">value</span>: any, args?: any): any &#123;</span><br><span class="line">        <span class="keyword">if</span>(!value) <span class="keyword">return</span> value;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> value == <span class="string">&#x27;string&#x27;</span>)&#123;</span><br><span class="line">            value = <span class="built_in">parseInt</span>(value);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  <span class="string">&quot;日一二三四五六&quot;</span>.<span class="title function_">charAt</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(value).<span class="title function_">getDay</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-使用"><a href="#3-使用" class="headerlink" title="3. 使用"></a>3. 使用</h2><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/c4ddb4c3b010555eac4e28aa0395530e_1737632292033.png" alt="在这里插入图片描述"></p>
<ul>
<li>在test.moudle.ts中声明中引入自定义pipe<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/0d6a4898f10ce73baf17214dc896704d_1737632292033.png" alt="在这里插入图片描述"></li>
<li>test.page.ts中定义个变量<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/baed581935f7f13d7b80389b14e0f069_1737632292033.png" alt="在这里插入图片描述"></li>
<li>html页面中使用<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/84526fcfb3eb6685cd820a57f5bef215_1737632292033.png" alt="在这里插入图片描述"></li>
<li>页面效果<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/6a3e0e1966b6d502e67c6d3cfb4ee171_1737632292033.png" alt="在这里插入图片描述"></li>
</ul>
<hr>
<p>自此，大功告成！！！</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/48/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/48/">48</a><span class="page-number current">49</span><a class="page-number" href="/page/50/">50</a><span class="space">&hellip;</span><a class="page-number" href="/page/60/">60</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/50/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">胡方雷</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">1.8m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">26:40</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/hufanglei" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
