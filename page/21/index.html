<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"hufanglei.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12,"scrollpercent":true,"onmobile":false},"hljswrap":true,"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
<meta property="og:type" content="blog">
<meta property="og:title" content="个人博客">
<meta property="og:url" content="https://hufanglei.github.io/page/21/index.html">
<meta property="og:site_name" content="个人博客">
<meta property="og:description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="胡方雷">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://hufanglei.github.io/page/21/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/21/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>个人博客</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">个人博客</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">记录生活中的点点滴滴</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">398</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">105</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">594</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="胡方雷"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">胡方雷</p>
  <div class="site-description" itemprop="description">直到这一刻微笑着说话为止，我至少留下了一公升眼泪</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">594</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">105</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">398</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/hufanglei" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hufanglei" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://hufanglei.blog.csdn.net/" title="CSDN → https:&#x2F;&#x2F;hufanglei.blog.csdn.net" rel="noopener me" target="_blank"><i class="crosshairs fa-fw"></i>CSDN</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:690328661@qq.com" title="E-Mail → mailto:690328661@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1518938&auto=1&height=66"></iframe>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title">
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="http://www.alloyteam.com/nav/" title="http:&#x2F;&#x2F;www.alloyteam.com&#x2F;nav&#x2F;" rel="noopener" target="_blank">Web前端导航</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://www.uisdc.com/" title="http:&#x2F;&#x2F;www.uisdc.com&#x2F;" rel="noopener" target="_blank">优设</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://www.zhangxinxu.com/" title="http:&#x2F;&#x2F;www.zhangxinxu.com&#x2F;" rel="noopener" target="_blank">牛人文档</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://ife.baidu.com/" title="http:&#x2F;&#x2F;ife.baidu.com&#x2F;" rel="noopener" target="_blank">百度前端技术学院</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://wf.uisdc.com/cn/" title="http:&#x2F;&#x2F;wf.uisdc.com&#x2F;cn&#x2F;" rel="noopener" target="_blank">google前端开发基础</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2020/07/15/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E7%94%B5%E5%95%86%E5%B0%8F%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98(1)--%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%92%8C%E5%87%86%E5%A4%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/15/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E7%94%B5%E5%95%86%E5%B0%8F%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98(1)--%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%92%8C%E5%87%86%E5%A4%87/" class="post-title-link" itemprop="url">小程序学习电商小项目实战(1)--框架搭建和准备</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-15 06:46:37" itemprop="dateCreated datePublished" datetime="2020-07-15T06:46:37+08:00">2020-07-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" itemprop="url" rel="index"><span itemprop="name">微信小程序</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[toc]</p>
<h2 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h2><p>vscode + 小程序开发工具 + git管理<br>vscode需要装的插件:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/4b6b6ccfcbc96b9c75e756f1b136ccc4_1737629982765.png" alt="在这里插入图片描述"><br>补充: vscode的快捷键:<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/padluo/article/details/105153420">https://blog.csdn.net/padluo/article/details/105153420</a></p>
<h2 id="框架搭建"><a href="#框架搭建" class="headerlink" title="框架搭建"></a>框架搭建</h2><p>1.新建几个文件夹<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/1023724aa74176a2b9b2358019cd3412_1737629982765.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/aa4dd5b85ba31d645aa2effef99a6fd2_1737629982765.png" alt="在这里插入图片描述"><br>2.删除默认的文件<br>如:log页面，默认的app.js. logs等文件夹内容<br>3.新建13个页面<br>vs中的快捷键: wx-app:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/f759d1188c74eaaa69c4617b770e00a7_1737629982765.png" alt="在这里插入图片描述"><br>vs列式编辑：几个快捷键:<br>ctrl + shift + alt + 方向键   ： 进入列式编辑<br>ctrl+左键 ，跳到单词末尾（要选中的话可同时按住shfit）<br>ctrl+home&#x2F;end，跳到行尾或行头(要选中的话可同时按住shfit)<br>技巧:注意用空格先把单词分开，便于处理</p>
<p>4.引入字体图标iconfont<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/edb266728bb194b2fe0e377df9ee8884_1737629982765.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/729797a7482ebc5741a0c4e77ac26b10_1737629992876.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/9b9b4ea613a2f10eb15532c9eabe4d85_1737629992876.png" alt="在这里插入图片描述"><br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/17b5a1f12669">https://www.jianshu.com/p/17b5a1f12669</a><br>5.设置4个tabbar<br>app.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/category/category&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/goods_list/goods_list&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/goods_detail/goods_detail&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/cart/cart&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/collect/collect&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/order/order&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/search/search&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/user/user&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/feedback/feedback&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/login/login&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/auth/auth&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/pay/pay&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;window&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;backgroundTextStyle&quot;</span><span class="punctuation">:</span><span class="string">&quot;light&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#fff&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;电商小项目&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span><span class="string">&quot;black&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#999&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;selectedColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#ff2d4a&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#fafafa&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;borderStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;icons/home.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;icons/home-o.png&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/category/category&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;分类&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;icons/category.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;icons/category-o.png&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/cart/cart&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;购物车&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;icons/cart.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;icons/cart-o.png&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/user/user&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我的&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;icons/my.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;icons/my-o.png&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sitemapLocation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sitemap.json&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>以上的所有操作效果如下:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/a7c3a417607a8c6fbaa294ba88832dcc_1737629992876.png" alt="在这里插入图片描述"><br>git代码地址:<br><a target="_blank" rel="noopener" href="https://github.com/hufanglei/pyg-demo/tree/day01">https://github.com/hufanglei/pyg-demo/tree/day01</a></p>
<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2020/07/14/easyExcel%20%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E4%B8%BA%E7%A9%BA%E7%9A%84%E4%B8%80%E6%AC%A1%E6%8A%A5%E9%94%99%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/14/easyExcel%20%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E4%B8%BA%E7%A9%BA%E7%9A%84%E4%B8%80%E6%AC%A1%E6%8A%A5%E9%94%99%E8%AE%B0%E5%BD%95/" class="post-title-link" itemprop="url">easyExcel 读取数据为空的一次报错记录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-14 10:16:43" itemprop="dateCreated datePublished" datetime="2020-07-14T10:16:43+08:00">2020-07-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java%E5%9F%BA%E7%A1%80-spring%E5%AE%B6%E6%97%8F/" itemprop="url" rel="index"><span itemprop="name">java基础 spring家族</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>64</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[toc]<br>公司不让使用lombok，我感觉没啥，就使用了，结果导致easyExcel解析的数据总是为{}.<br>在网上找到了答案:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/88ee149744fc15d394875cf35742592d_1737629992876.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/cea811d2618150ceb832bd844d59aee2_1737629992876.png" alt="在这里插入图片描述"></p>
<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2020/07/05/mysql5.7%20json%E7%B1%BB%E5%9E%8B%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/05/mysql5.7%20json%E7%B1%BB%E5%9E%8B%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">mysql5.7 json类型操作</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-05 22:47:04" itemprop="dateCreated datePublished" datetime="2020-07-05T22:47:04+08:00">2020-07-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>54</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[toc]<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wshenjin/p/10276678.html">https://www.cnblogs.com/wshenjin/p/10276678.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2020/07/05/mysq%E4%BC%98%E5%8C%96---mysql%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E8%A7%A3%E9%87%8A%E3%80%81%E4%BC%98%E5%8C%96%E6%9F%A5%E8%AF%A2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%93%E6%9E%84%E3%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/05/mysq%E4%BC%98%E5%8C%96---mysql%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E8%A7%A3%E9%87%8A%E3%80%81%E4%BC%98%E5%8C%96%E6%9F%A5%E8%AF%A2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%93%E6%9E%84%E3%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="post-title-link" itemprop="url">mysq优化---mysql执行计划解释、优化查询、数据库结构、服务器</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-05 21:11:47" itemprop="dateCreated datePublished" datetime="2020-07-05T21:11:47+08:00">2020-07-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>380</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[toc]</p>
<h1 id="执行计划解释"><a href="#执行计划解释" class="headerlink" title="执行计划解释"></a>执行计划解释</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN</span><br><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> test</span><br><span class="line"><span class="keyword">where</span>  age<span class="operator">=</span><span class="number">18</span> <span class="keyword">and</span>  <span class="keyword">EXISTS</span></span><br><span class="line">(<span class="keyword">select</span> name <span class="keyword">from</span> test <span class="keyword">where</span> name <span class="operator">=</span><span class="string">&#x27;张三&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/89f5de74f4009d4055b0fa21a66ea7c5_1737630004694.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/8570fa54a08b1f8e6cc801b58d1e80ed_1737630004694.png" alt="在这里插入图片描述"></p>
<h1 id="索引类型"><a href="#索引类型" class="headerlink" title="索引类型"></a>索引类型</h1><h3 id="普通索引"><a href="#普通索引" class="headerlink" title="普通索引"></a>普通索引</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/18cbc409f754ce4a87672882f6c19818_1737630004694.png" alt="在这里插入图片描述"></p>
<h3 id="唯一索引"><a href="#唯一索引" class="headerlink" title="唯一索引"></a>唯一索引</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/312ed49c048ec9d5dc3608e8eacc1391_1737630004694.png" alt="在这里插入图片描述"></p>
<h3 id="单列索引"><a href="#单列索引" class="headerlink" title="单列索引"></a>单列索引</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/d25adbe3a6291c58bf5a779ea971a8a9_1737630004694.png" alt="在这里插入图片描述"></p>
<h3 id="组合索引"><a href="#组合索引" class="headerlink" title="组合索引"></a>组合索引</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/620596c4969611e54123f0fba1024328_1737630018447.png" alt="在这里插入图片描述"><br>注意，只支持，最左索引:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/ad8848103f78ef503bde3731f8e7e38c_1737630018447.png" alt="在这里插入图片描述"></p>
<h3 id="查看索引语句"><a href="#查看索引语句" class="headerlink" title="查看索引语句"></a>查看索引语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> TEST</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/b657f8b7664f3721070b83a0c23bd2e0_1737630018447.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/7a5de1fd11db3990f8e697d9363bc444_1737630018447.png" alt="在这里插入图片描述"></p>
<h1 id="优化查询"><a href="#优化查询" class="headerlink" title="优化查询"></a>优化查询</h1><h2 id="注意哪些情况索引不生效"><a href="#注意哪些情况索引不生效" class="headerlink" title="注意哪些情况索引不生效"></a>注意哪些情况索引不生效</h2><p>我们知道索引可以加快查询，但是有些情况索引不生效:</p>
<ul>
<li>1.like的查询语句</li>
</ul>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/dd647e19ccc4c67977ba3d80673fb01e_1737630018447.png" alt="在这里插入图片描述"></p>
<ul>
<li><p>2.使用多列索引的查询<br><img src="https://i-blog.csdnimg.cn/blog_migrate/c3f95ceeec31a14b31bd3fc185b15f45.png" alt="在这里插入图片描述"><br><img src="https://i-blog.csdnimg.cn/blog_migrate/e4e9b48baf2458cbe89e7d85d9db996e.png" alt="在这里插入图片描述"><br><img src="https://i-blog.csdnimg.cn/blog_migrate/f57739c3a3d028888d3b68ddf474dd47.png" alt="在这里插入图片描述"></p>
</li>
<li><p>3.使用or关键字的查询语句</p>
</li>
</ul>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/db9cfaf383a8f646346f96259c86d7cd.png" alt="在这里插入图片描述"><br><img src="https://i-blog.csdnimg.cn/blog_migrate/78ae7ade23f8cc5a008ae34ba17c27e4.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/0ba89e426902d9ca9100f5d417d27949_1737630058679.png" alt="在这里插入图片描述"></p>
<h2 id="优化子查询"><a href="#优化子查询" class="headerlink" title="优化子查询"></a>优化子查询</h2><p><code>为什么子查询效率低?</code><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/800681c255e5c0a89d5266ea4c3494ba_1737630058679.png" alt="在这里插入图片描述"><br>如何优化子查询:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/03257a943ef096915c40789a27d975c3_1737630058679.png" alt="在这里插入图片描述"></p>
<h2 id="优化数据结构"><a href="#优化数据结构" class="headerlink" title="优化数据结构"></a>优化数据结构</h2><h3 id="将字段很多的表分解成多个表"><a href="#将字段很多的表分解成多个表" class="headerlink" title="将字段很多的表分解成多个表"></a>将字段很多的表分解成多个表</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/3e1a3414887875ce25ae9348f11cf1e3_1737630058679.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/bc5a3d531bb5e6a22fb6b280907c3999_1737630058679.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/cf5a99d7f24db93dcb8a47eafc24a087_1737630072350.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/ad572a7494669fbdbfd5c9acfb2738f9_1737630072350.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/43d63700381d3d8ad95d082d61376949_1737630072350.png" alt="在这里插入图片描述"></p>
<h3 id="增加中间表"><a href="#增加中间表" class="headerlink" title="增加中间表"></a>增加中间表</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/d7437f9bb9f344637a78f06c70a1438d_1737630072350.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/d4afe23c3b38892d721061eab55e84bf_1737630072350.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/86bb661a5f80d474c8a6c547f430d07f_1737630087117.png" alt="在这里插入图片描述"></p>
<h3 id="增加冗余字段"><a href="#增加冗余字段" class="headerlink" title="增加冗余字段"></a>增加冗余字段</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/b0421b69a4db4f8eeb18bf452a4e982d_1737630087117.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/c3e53eb7b3899cf87ec2c9ce349f39ef_1737630087117.png" alt="在这里插入图片描述"></p>
<h3 id="优化插入记录的速度"><a href="#优化插入记录的速度" class="headerlink" title="优化插入记录的速度"></a>优化插入记录的速度</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/d2ce4b9f97db38a92e290d083cf9016c_1737630087117.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/4e909b7f41949daba18ad6a90c796677_1737630087117.png" alt="在这里插入图片描述"></p>
<h3 id="分析表，检查表和优化表"><a href="#分析表，检查表和优化表" class="headerlink" title="分析表，检查表和优化表"></a>分析表，检查表和优化表</h3><h4 id="分析表"><a href="#分析表" class="headerlink" title="分析表"></a>分析表</h4><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/bcd04261acc70ba4e7214188abef8193_1737630103912.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/7f65e0f779888b03f49e04269366e188_1737630103912.png" alt="在这里插入图片描述"></p>
<h4 id="检查表"><a href="#检查表" class="headerlink" title="检查表"></a>检查表</h4><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/55751e5b5dfa4ede5f2fc8014bea0f33_1737630103912.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/6bf6d6b831d3238abbf8f50109e8c27f_1737630103912.png" alt="在这里插入图片描述"></p>
<h4 id="优化表"><a href="#优化表" class="headerlink" title="优化表"></a>优化表</h4><p>主要消除文件碎片<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/c6da3e2be22f217acc914536ccc42cfc_1737630103912.png" alt="在这里插入图片描述"></p>
<h2 id="优化mysql服务器"><a href="#优化mysql服务器" class="headerlink" title="优化mysql服务器"></a>优化mysql服务器</h2><h3 id="优化服务器硬件"><a href="#优化服务器硬件" class="headerlink" title="优化服务器硬件"></a>优化服务器硬件</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/a6ae925fe2eb2d4aef537ef8a9457a6b_1737630125506.png" alt="在这里插入图片描述"></p>
<h3 id="优化mysql参数"><a href="#优化mysql参数" class="headerlink" title="优化mysql参数"></a>优化mysql参数</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/b01090f4c507396bf06f2b3c97a472a7_1737630125506.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/21c67862b6274ef1b29b14c2c5e8ab4c_1737630125506.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/cfdf29dead8759fca9902ab7d3320554_1737630125506.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/e80e33b2cae9114944c373b9acbb2ec4_1737630125506.png" alt="在这里插入图片描述"><br><code>实战案例</code>:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/cc0ca8bf5d56cb2d8464f635cf2eeacd_1737630141378.png" alt="在这里插入图片描述"></p>
<p>参考《MYSQL5.7入门到精通（刘增杰）》</p>
<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2020/07/03/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(8)%20--%20%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/03/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(8)%20--%20%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" class="post-title-link" itemprop="url">小程序学习笔记(8) -- 小程序生命周期</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-03 21:18:32" itemprop="dateCreated datePublished" datetime="2020-07-03T21:18:32+08:00">2020-07-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" itemprop="url" rel="index"><span itemprop="name">微信小程序</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@<a href="%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">TOC</a></p>
<h2 id="应用生命周期"><a href="#应用生命周期" class="headerlink" title="应用生命周期"></a>应用生命周期</h2><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/b709b4f9b1c7035227880d85729d5961_1737630141378.png" alt="在这里插入图片描述"></p>
<p>app.js<br>下面的js中的注释，写了某些位置常用来处理那些业务逻辑。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="title class_">App</span>(&#123;</span><br><span class="line">  <span class="comment">//1 应用第一次启动的时候 就会触发的事件</span></span><br><span class="line">  <span class="attr">onLaunch</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onLaunch&quot;</span>)</span><br><span class="line">    <span class="comment">//js的方式来跳转 不能触发 onPageNotFound</span></span><br><span class="line">    wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/11/22/33&#x27;</span>,   </span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//2 应用 被用户看到</span></span><br><span class="line">  <span class="title function_">onShow</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//常见业务: 对应用的数据或者页面效果 重置</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onShow&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">   <span class="comment">//3 应用 被隐藏</span></span><br><span class="line">   <span class="title function_">onHide</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="comment">//常见业务:暂停或清除定时器</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hide&quot;</span>);</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">//4.应用的代码报错的时候， 就会触发</span></span><br><span class="line">   <span class="title function_">onError</span>(<span class="params">err</span>)&#123;</span><br><span class="line">     <span class="comment">//常见业务: 在应用发生代码报错的时候，收集用户的错误信息，通过异步请求，将错误的信息发送到后台去</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onError&quot;</span>)</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">//5 页面找不到就会触发</span></span><br><span class="line">   <span class="comment">//应用第一次启动的时候，如果找不到第一个入口页面，才会触发</span></span><br><span class="line">   <span class="title function_">onPageNotFound</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="comment">//作用： 如果页面不存在了 通过js的方式来重新来跳转页面， 重新跳到第二个首页</span></span><br><span class="line">     <span class="comment">// 不能跳到tabbar页面， 导航组件类似</span></span><br><span class="line">     <span class="comment">//常见业务:</span></span><br><span class="line">      wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/pages/logs/logs&#x27;</span>,</span><br><span class="line"></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onPageNotFound&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="页面生命周期"><a href="#页面生命周期" class="headerlink" title="页面生命周期"></a>页面生命周期</h2><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/694e5ab3e4145b3a3b1d729d3d43dd41_1737630141378.png" alt="在这里插入图片描述"><br>demo.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo18/demo18.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onLoad&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面显示</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShow</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onShow&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面初次渲染完成</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReady</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onReady&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面隐藏</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onHide</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onHide&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面卸载 也是可以通过点击超链接来演示</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onUnload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onUnload&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面相关事件处理函数--监听用户下拉动作</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onPullDownRefresh</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//进行页面的数据 或者效果 重新刷新</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onPullDownRefresh&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面上拉触底事件的处理函数</span></span><br><span class="line"><span class="comment">   * 需要页面出现滚动才可以</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReachBottom</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onReachBottom&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户点击右上角分享</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShareAppMessage</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onShareAppMessage&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面滚动 就可以触发</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onPageScroll</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onPageScroll&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面尺寸发生变化 触发</span></span><br><span class="line"><span class="comment">   * 小程序发生了 横屏竖屏 切换的时候触发</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onResize</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onResize&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="其他-小程序常用框架"><a href="#其他-小程序常用框架" class="headerlink" title="其他 小程序常用框架"></a>其他 小程序常用框架</h1><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/89453214c50b4fe0215f1840fff1f658_1737630141378.png" alt="在这里插入图片描述"></p>
<p>建议使用原生框架，因为小程序更新比较快。不能确定是封装框架的问题还是小程序的问题，玩遛了，再用框架吧。</p>
<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2020/07/02/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(7)%20--%20%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E6%A1%88%E4%BE%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/02/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(7)%20--%20%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E6%A1%88%E4%BE%8B/" class="post-title-link" itemprop="url">小程序学习笔记(7) -- 自定义组件案例</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-02 23:10:51" itemprop="dateCreated datePublished" datetime="2020-07-02T23:10:51+08:00">2020-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" itemprop="url" rel="index"><span itemprop="name">微信小程序</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@<a href="%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6">TOC</a></p>
<h1 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h1><h2 id="创建⾃定义组件"><a href="#创建⾃定义组件" class="headerlink" title="创建⾃定义组件"></a>创建⾃定义组件</h2><blockquote>
<p>新建个test文件加，点击test文件夹右键创建components<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/f67de44c00c1235b95b0c5922df3b114_1737630141378.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/6a467e16861a0703f3ca8ccec9946fad_1737630156063.png" alt="在这里插入图片描述"><br>自动生成test文件里面的4个文件</p>
</blockquote>
<h2 id="声明组件"><a href="#声明组件" class="headerlink" title="声明组件"></a>声明组件</h2><p>已经帮我们自动填写上了，看下<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/84bd086fa2e4501474404a862bde82f2_1737630156063.png" alt="在这里插入图片描述"></p>
<h2 id="引入自定义组件"><a href="#引入自定义组件" class="headerlink" title="引入自定义组件"></a>引入自定义组件</h2><p>在demo16.json里面引入test组件，key代表组件的别名<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/94fd618a07f24a4f8110b603dd890831_1737630156063.png" alt="在这里插入图片描述"></p>
<h2 id="使用自定义组件"><a href="#使用自定义组件" class="headerlink" title="使用自定义组件"></a>使用自定义组件</h2><p>在demo16. wxml使用test组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/demo16/demo16.wxml--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">test</span>&gt;</span><span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>打开demo16的页面看下效果:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/3117197ffa46ab0fe4d5c3ed20fe2221_1737630156063.png" alt="在这里插入图片描述"><br>已经显示test组件内容</p>
<h1 id="tabs案例了解自定组件的关键知识点"><a href="#tabs案例了解自定组件的关键知识点" class="headerlink" title="tabs案例了解自定组件的关键知识点"></a>tabs案例了解自定组件的关键知识点</h1><p>新建个tabs组件，demo17的页面使用tabs组件<br>完整代码如下:<br>tabs.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">clsss</span>=<span class="string">&quot;tabs&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tabs_title&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;view class=&quot;title_item active&quot;&gt;首页&lt;/view&gt;</span></span><br><span class="line"><span class="comment">        &lt;view class=&quot;title_item&quot;&gt;原创&lt;/view&gt;   </span></span><br><span class="line"><span class="comment">        &lt;view class=&quot;title_item&quot;&gt;分类&lt;/view&gt;   </span></span><br><span class="line"><span class="comment">        &lt;view class=&quot;title_item&quot;&gt;关于&lt;/view&gt;  </span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;tabs&#125;&#125;&quot;</span>  <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;title_item &#123;&#123;item.isActive ? &#x27;active&#x27; : &#x27;&#x27;&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">bindtap</span>=<span class="string">&quot;handleItemTap&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span>  </span><br><span class="line">        &#123;&#123;item.name&#125;&#125;   </span><br><span class="line">         <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span>      </span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tabs_content&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- slot 标签其实就是一个占位符</span></span><br><span class="line"><span class="comment">        等到 父组件调用 子组件的时候  再传递  标签过来 最终 这些被传递的标签</span></span><br><span class="line"><span class="comment">        就会替换slot插件的位置</span></span><br><span class="line"><span class="comment">         --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span>     </span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>tab.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Tabs/tabs.js</span></span><br><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的属性列表</span></span><br><span class="line"><span class="comment">   * 里面存放的是 要从父组件接收的数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">properties</span>: &#123;</span><br><span class="line">    <span class="comment">//要接收的数据的名称</span></span><br><span class="line">    <span class="comment">// aaa:&#123;</span></span><br><span class="line">    <span class="comment">//   //type 要接收的类型</span></span><br><span class="line">    <span class="comment">//   type: String,</span></span><br><span class="line">    <span class="comment">//   value:&quot;&quot;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="attr">tabs</span>:&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Array</span>,</span><br><span class="line">      <span class="attr">value</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">   </span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的方法列表</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="attr">handleItemTap</span>: <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>)</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * 绑定事件，需要在methods中绑定</span></span><br><span class="line"><span class="comment">       * 获取被点击的索引</span></span><br><span class="line"><span class="comment">       * 获取数组循环</span></span><br><span class="line"><span class="comment">       * </span></span><br><span class="line"><span class="comment">       *    除了索引的闲的属性为isActivew为true外，其他的均为false</span></span><br><span class="line"><span class="comment">       *  </span></span><br><span class="line"><span class="comment">       * 5.点击事件触发的时候</span></span><br><span class="line"><span class="comment">       *    触发父组件中的自定义事件  同时传递数据给  父组件</span></span><br><span class="line"><span class="comment">       *    this.triggerEvent(&quot;父组件自定义事件的名称&quot;, 要传递的参数)</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="comment">//获取索引</span></span><br><span class="line">      <span class="keyword">const</span> &#123;index&#125; = e.<span class="property">currentTarget</span>.<span class="property">dataset</span>;</span><br><span class="line">      <span class="comment">//触发父组件中的自定义事件  同时传递数据给  父组件</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&quot;itemChange&quot;</span>, &#123;index&#125;)</span><br><span class="line">      <span class="comment">//获取data中的数组</span></span><br><span class="line">      <span class="comment">//解构 对 复杂类型进行解构的时候，复制了一份 变量的引用而已</span></span><br><span class="line">      <span class="comment">//最严谨的做法，重新拷贝一份 数组， 再对这个数组的备份进行处理</span></span><br><span class="line">      <span class="comment">//let tabs = JSON.parse(JSON.stringify(this.data.tabs))</span></span><br><span class="line">      <span class="comment">//不要直接修改 this.data.数据</span></span><br><span class="line">      <span class="keyword">let</span> &#123;tabs&#125; = <span class="variable language_">this</span>.<span class="property">data</span>;</span><br><span class="line">      <span class="comment">//等于 let tabs = this.data</span></span><br><span class="line">      <span class="comment">//[].forEach 遍历数组，遍历数组的时候， 修改了v，也会导致原数组被修改</span></span><br><span class="line">      <span class="comment">// tabs.forEach((v, i) =&gt; i==index ? v.isActive=true : v.isActive = false);</span></span><br><span class="line">      <span class="comment">// this.setData(&#123;</span></span><br><span class="line">      <span class="comment">//   tabs</span></span><br><span class="line">      <span class="comment">// &#125;)     </span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>tabs.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;component&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>tabs.wxss</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tabs_title</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.title_item</span> &#123;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.active</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">10</span>rpx solid currentColor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用组件的页面 demo17<br>demo17.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/demo17/demo17.wxml--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;text&gt;pages/demo17/demo17.wxml&lt;/text&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    1.父组件(页面)向子组件 传递数据 通过 标签属性的方式来传递 </span></span><br><span class="line"><span class="comment">       1 在子组件上进行接收</span></span><br><span class="line"><span class="comment">       2 把这个数据当成是data中的数据直接用即可</span></span><br><span class="line"><span class="comment">    2 子向父传递数据 通过事件的方式传递</span></span><br><span class="line"><span class="comment">      1.在子组件的标签上加一个 自定义事件</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">tabs</span> <span class="attr">tabs</span>=<span class="string">&quot;&#123;&#123;tabs&#125;&#125;&quot;</span> <span class="attr">binditemChange</span>=<span class="string">&quot;handleItemChange&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;tabs[0].isActive&#125;&#125;&quot;</span>&gt;</span>0<span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123;tabs[1].isActive&#125;&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123;tabs[2].isActive&#125;&#125;&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:else</span>&gt;</span>3<span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tabs</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>demo17.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo17/demo17.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">tabs</span>:[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>:<span class="number">0</span>,</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&quot;首页&quot;</span>,</span><br><span class="line">        <span class="attr">isActive</span>: <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>:<span class="number">1</span>,</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&quot;原创&quot;</span>,</span><br><span class="line">        <span class="attr">isActive</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>:<span class="number">2</span>,</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&quot;分类&quot;</span>,</span><br><span class="line">        <span class="attr">isActive</span>: <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>:<span class="number">3</span>,</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&quot;关于&quot;</span>,</span><br><span class="line">        <span class="attr">isActive</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//自定义事件， 用来接收子组件传递的数据</span></span><br><span class="line">  <span class="attr">handleItemChange</span>: <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">index</span>);</span><br><span class="line">    <span class="keyword">let</span> &#123;tabs&#125; = <span class="variable language_">this</span>.<span class="property">data</span>;</span><br><span class="line">    <span class="comment">//等于 let tabs = this.data</span></span><br><span class="line">    <span class="comment">//[].forEach 遍历数组，遍历数组的时候， 修改了v，也会导致原数组被修改</span></span><br><span class="line">    tabs.<span class="title function_">forEach</span>(<span class="function">(<span class="params">v, i</span>) =&gt;</span> i==e.<span class="property">detail</span>.<span class="property">index</span> ? v.<span class="property">isActive</span>=<span class="literal">true</span> : v.<span class="property">isActive</span> = <span class="literal">false</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      tabs</span><br><span class="line">    &#125;)     </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>demo17.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;tabs&quot;</span><span class="punctuation">:</span>  <span class="string">&quot;../../components/tabs/tabs&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>效果演示:<br>切换tab，点击的tab高亮，并变化不同的内容<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/34c950624d455e86bbe42e6074380345_1737630156063.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/3fc76da2811cd9b433ddfcc76feb1f11_1737630164287.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/751c60d4fef537dd8925afce297d75f6_1737630164287.png" alt="在这里插入图片描述"></p>
<p>注意点:<br>父组件向子组件传值<br>子组件向父组件传值<br> slot的使用</p>
<h1 id="自定义组件的其他属性"><a href="#自定义组件的其他属性" class="headerlink" title="自定义组件的其他属性"></a>自定义组件的其他属性</h1><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/b6258a5c2a5515828504621d95cd4298_1737630164287.png" alt="在这里插入图片描述"><br>注意observers 只有组件中可以使用，页面是不可以使用这个事件的</p>
<p>笔记补充:<br><a target="_blank" rel="noopener" href="https://docs.qq.com/pdf/DTlVnYnFvdnZYUmNn">https://docs.qq.com/pdf/DTlVnYnFvdnZYUmNn</a></p>
<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2020/06/28/mysql%E6%A0%B9%E6%8D%AEjson%E5%AD%97%E6%AE%B5%E5%86%85%E5%AE%B9%E4%BD%9C%E4%B8%BA%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/28/mysql%E6%A0%B9%E6%8D%AEjson%E5%AD%97%E6%AE%B5%E5%86%85%E5%AE%B9%E4%BD%9C%E4%B8%BA%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6/" class="post-title-link" itemprop="url">mysql根据json字段内容作为查询条件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-28 11:05:29" itemprop="dateCreated datePublished" datetime="2020-06-28T11:05:29+08:00">2020-06-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>73</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_21187515/article/details/90760337">https://blog.csdn.net/qq_21187515&#x2F;article&#x2F;details&#x2F;90760337</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2020/06/28/springboot%E4%BD%BF%E7%94%A8Cassandra%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/28/springboot%E4%BD%BF%E7%94%A8Cassandra%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE/" class="post-title-link" itemprop="url">springboot使用Cassandra组合查询数据</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-28 09:26:09" itemprop="dateCreated datePublished" datetime="2020-06-28T09:26:09+08:00">2020-06-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE-spring%E5%AE%B6%E6%97%8F/" itemprop="url" rel="index"><span itemprop="name">大数据 spring家族</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>13k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>12 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@<a href="springboot%E4%BD%BF%E7%94%A8Cassandra%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE">TOC</a></p>
<h2 id="在application-yml中配置cassandra"><a href="#在application-yml中配置cassandra" class="headerlink" title="在application.yml中配置cassandra"></a>在application.yml中配置cassandra</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">cassandra:</span></span><br><span class="line">    <span class="attr">contact-points:</span> <span class="number">192.168</span><span class="number">.0</span><span class="number">.122</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">9042</span>   </span><br><span class="line">    <span class="attr">username:</span> <span class="string">XXX</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">XX</span></span><br><span class="line">    <span class="attr">keyspace-name:</span> <span class="string">XXX</span></span><br></pre></td></tr></table></figure>

<h2 id="pom中引入Cassandra"><a href="#pom中引入Cassandra" class="headerlink" title="pom中引入Cassandra"></a>pom中引入Cassandra</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入cassandra--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-cassandra<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="封装Cassandra的通用类"><a href="#封装Cassandra的通用类" class="headerlink" title="封装Cassandra的通用类"></a>封装Cassandra的通用类</h2><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/4ed1c5ed6c687d79564811ae53a219bc_1737630164287.png" alt="在这里插入图片描述"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wuzheng.vehicle.info.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.data.cassandra.core.query.Query;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>：基础 仓储层</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>：twislyn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>：Created in 2020/05/21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@modified</span> By：</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BaseRepository</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 按主键查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    T <span class="title function_">getById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 按条件查询对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> query</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    T <span class="title function_">getObj</span><span class="params">(Query query)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 按条件查询列表</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> query</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;T&gt; <span class="title function_">listObjs</span><span class="params">(Query query)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    /**</span></span><br><span class="line"><span class="comment">//     * 分页查询</span></span><br><span class="line"><span class="comment">//     * @param pagination</span></span><br><span class="line"><span class="comment">//     * @param query</span></span><br><span class="line"><span class="comment">//     * @return</span></span><br><span class="line"><span class="comment">//     */</span></span><br><span class="line"><span class="comment">//    Slice&lt;T&gt; pageObjs(Pagination pagination, Query query);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实现类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wuzheng.vehicle.info.repository.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.datastax.driver.core.PagingState;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wuzheng.vehicle.info.repository.BaseRepository;</span><br><span class="line"><span class="keyword">import</span> com.wuzheng.vehicle.info.utils.Pagination;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.cassandra.core.CassandraTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.cassandra.core.query.CassandraPageRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.cassandra.core.query.Query;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Slice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.ParameterizedType;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>：基础 仓储实现层</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>：twislyn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>：Created in 2020/05/21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@modified</span> By：</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseRepositoryImpl</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">BaseRepository</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    CassandraTemplate cassandraTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;T&gt; entityClass = currentModelClass();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取泛型类型</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;T&gt; <span class="title function_">currentModelClass</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (Class&lt;T&gt;) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getById</span><span class="params">(Serializable id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cassandraTemplate.selectOneById(id, entityClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getObj</span><span class="params">(Query query)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cassandraTemplate.selectOne(query, entityClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;T&gt; <span class="title function_">listObjs</span><span class="params">(Query query)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cassandraTemplate.select(query, entityClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Override</span></span><br><span class="line"><span class="comment">//    public Slice&lt;T&gt; pageObjs(Pagination pagination, Query query) &#123;</span></span><br><span class="line"><span class="comment">//        if (pagination.getPageSize() &gt; 1) &#123;</span></span><br><span class="line"><span class="comment">//            CassandraPageRequest pageRequest = pagination.getPageRequest();</span></span><br><span class="line"><span class="comment">//            Slice&lt;T&gt; slice = cassandraTemplate.slice(query.pageRequest(pageRequest), entityClass);</span></span><br><span class="line"><span class="comment">//            for (int i = 1, len = pagination.getPageSize(); i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="comment">//                PagingState pagingState = ((CassandraPageRequest) slice.getPageable()).getPagingState();</span></span><br><span class="line"><span class="comment">//                if (pagingState == null) &#123;</span></span><br><span class="line"><span class="comment">//                    return slice;</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//                pageRequest = CassandraPageRequest.of(slice.getPageable(), pagingState);</span></span><br><span class="line"><span class="comment">//                slice = cassandraTemplate.slice(query.pageRequest(pageRequest), entityClass);</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//            return slice;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        return cassandraTemplate.slice(query.pageRequest(pagination.getPageRequest()), entityClass);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="具体使用"><a href="#具体使用" class="headerlink" title="具体使用"></a>具体使用</h2><p>自定义对应Cassandra的数据库的实体</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wuzheng.vehicle.supervise.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.data.cassandra.core.mapping.Column;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.cassandra.core.mapping.PrimaryKey;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.cassandra.core.mapping.Table;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>：燃油车辆实时数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>：twislyn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>：Created in 2020/</span></span><br><span class="line"><span class="comment"> * 05/22</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@modified</span> By：</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Table(&quot;w_iot_fuelvehicle_realtime_base&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IotFuelVehicleRealtimeBase</span> &#123;</span><br><span class="line">    <span class="meta">@PrimaryKey(&quot;rowid&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String rowId;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 进气量</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;airin&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double airIn;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 大气压力</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;atmp&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double atmp;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 标定验证码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;cvn&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String cvn;</span><br><span class="line">    <span class="meta">@Column(&quot;dpf&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double dpf;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发动机冷却液温度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;ect&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer ect;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发动机燃料流量</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;eflow&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double eflow;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发动机转速</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;espeed&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double espeed;</span><br><span class="line">    <span class="meta">@Column(&quot;flist&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> List flist;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 油箱液位</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;flvl&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double flvl;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 故障码数量</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;fnum&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer fnum;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 摩擦扭矩（作为发动机最大基准扭矩的百分比）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;ftorq&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer ftorq;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据采集时间_登入</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;gatime&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String gatime;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * IUPR值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;iupr&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String iupr;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 纬度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;lat&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double lat;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 经度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;lng&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double lng;</span><br><span class="line">    <span class="meta">@Column(&quot;locs&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Double&gt; locs;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定位状态</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;locsts&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String locsts;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * MIL状态</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;milsts&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer milsts;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * OBD诊断协议</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;obddp&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer obddp;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发动机净输出扭矩，或发动机实际扭矩/指示扭矩</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;otorq&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer otorq;</span><br><span class="line">    <span class="meta">@Column(&quot;rdysts&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String rdysts;</span><br><span class="line">    <span class="meta">@Column(&quot;reiss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Boolean reiss;</span><br><span class="line">    <span class="meta">@Column(&quot;remrg&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double remrg;</span><br><span class="line">    <span class="meta">@Column(&quot;rfld&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Map rfld;</span><br><span class="line">    <span class="meta">@Column(&quot;scrdnnox&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double scrdnnox;</span><br><span class="line">    <span class="meta">@Column(&quot;scrint&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double scrint;</span><br><span class="line">    <span class="meta">@Column(&quot;scroutt&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double scroutt;</span><br><span class="line">    <span class="meta">@Column(&quot;scrupnox&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double scrupnox;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 车速</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;speed&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double speed;</span><br><span class="line">    <span class="meta">@Column(&quot;sstr&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sstr;</span><br><span class="line">    <span class="meta">@Column(&quot;supsts&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String supsts;</span><br><span class="line">    <span class="meta">@Column(&quot;swareid&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String swareid;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 累计里程</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;tmiles&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double tmiles;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * vin码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(&quot;vin&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String vin;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRowId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rowId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRowId</span><span class="params">(String rowId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rowId = rowId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getAirIn</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> airIn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAirIn</span><span class="params">(Double airIn)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.airIn = airIn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getAtmp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> atmp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAtmp</span><span class="params">(Double atmp)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.atmp = atmp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCvn</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cvn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCvn</span><span class="params">(String cvn)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cvn = cvn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getDpf</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dpf;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDpf</span><span class="params">(Double dpf)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dpf = dpf;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getEct</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ect;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEct</span><span class="params">(Integer ect)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.ect = ect;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getEflow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> eflow;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEflow</span><span class="params">(Double eflow)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.eflow = eflow;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getEspeed</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> espeed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEspeed</span><span class="params">(Double espeed)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.espeed = espeed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List <span class="title function_">getFlist</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> flist;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFlist</span><span class="params">(List flist)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.flist = flist;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getFlvl</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> flvl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFlvl</span><span class="params">(Double flvl)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.flvl = flvl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getFnum</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fnum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFnum</span><span class="params">(Integer fnum)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fnum = fnum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getFtorq</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ftorq;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFtorq</span><span class="params">(Integer ftorq)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.ftorq = ftorq;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGatime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gatime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGatime</span><span class="params">(String gatime)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gatime = gatime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getIupr</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> iupr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setIupr</span><span class="params">(String iupr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.iupr = iupr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getLat</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLat</span><span class="params">(Double lat)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.lat = lat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getLng</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lng;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLng</span><span class="params">(Double lng)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.lng = lng;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, Double&gt; <span class="title function_">getLocs</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> locs;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLocs</span><span class="params">(Map&lt;String, Double&gt; locs)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.locs = locs;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLocsts</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> locsts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLocsts</span><span class="params">(String locsts)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.locsts = locsts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getMilsts</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> milsts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMilsts</span><span class="params">(Integer milsts)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.milsts = milsts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getObddp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> obddp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setObddp</span><span class="params">(Integer obddp)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.obddp = obddp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getOtorq</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> otorq;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOtorq</span><span class="params">(Integer otorq)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.otorq = otorq;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRdysts</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rdysts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRdysts</span><span class="params">(String rdysts)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rdysts = rdysts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">getReiss</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> reiss;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setReiss</span><span class="params">(Boolean reiss)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.reiss = reiss;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getRemrg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> remrg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRemrg</span><span class="params">(Double remrg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.remrg = remrg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map <span class="title function_">getRfld</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rfld;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRfld</span><span class="params">(Map rfld)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rfld = rfld;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getScrdnnox</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> scrdnnox;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScrdnnox</span><span class="params">(Double scrdnnox)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.scrdnnox = scrdnnox;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getScrint</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> scrint;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScrint</span><span class="params">(Double scrint)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.scrint = scrint;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getScroutt</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> scroutt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScroutt</span><span class="params">(Double scroutt)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.scroutt = scroutt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getScrupnox</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> scrupnox;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScrupnox</span><span class="params">(Double scrupnox)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.scrupnox = scrupnox;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getSpeed</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> speed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSpeed</span><span class="params">(Double speed)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.speed = speed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSstr</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sstr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSstr</span><span class="params">(String sstr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sstr = sstr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSupsts</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> supsts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSupsts</span><span class="params">(String supsts)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.supsts = supsts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSwareid</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> swareid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSwareid</span><span class="params">(String swareid)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.swareid = swareid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getTmiles</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> tmiles;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTmiles</span><span class="params">(Double tmiles)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.tmiles = tmiles;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getVin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> vin;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setVin</span><span class="params">(String vin)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.vin = vin;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="实现通用接口"><a href="#实现通用接口" class="headerlink" title="实现通用接口"></a>实现通用接口</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wuzheng.vehicle.info.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wuzheng.vehicle.info.entity.ForwardExportMsgTask;</span><br><span class="line"><span class="keyword">import</span> com.wuzheng.vehicle.info.dto.excel.WIotElecvehicleRealtimeBase;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 转发报文数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IotElecvehicleRealtimeBaseRepository</span> <span class="keyword">extends</span> <span class="title class_">BaseRepository</span>&lt;WIotElecvehicleRealtimeBase&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据条件查询历史数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryInfo 查询条件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;WIotElecvehicleRealtimeBase&gt; <span class="title function_">list</span><span class="params">(ForwardExportMsgTask queryInfo)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="具体查询逻辑-最重要"><a href="#具体查询逻辑-最重要" class="headerlink" title="具体查询逻辑(最重要)"></a>具体查询逻辑(最重要)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wuzheng.vehicle.info.repository.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wuzheng.vehicle.info.entity.ForwardExportMsgTask;</span><br><span class="line"><span class="keyword">import</span> com.wuzheng.vehicle.info.dto.excel.WIotElecvehicleRealtimeBase;</span><br><span class="line"><span class="keyword">import</span> com.wuzheng.vehicle.info.repository.IotElecvehicleRealtimeBaseRepository;</span><br><span class="line"><span class="keyword">import</span> com.wuzheng.vehicle.info.utils.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.cassandra.core.query.Columns;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.cassandra.core.query.Query;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.data.cassandra.core.query.Criteria.where;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IotElecvehicleRealtimeBaseRepositoryImpl</span> <span class="keyword">extends</span> <span class="title class_">BaseRepositoryImpl</span>&lt;WIotElecvehicleRealtimeBase&gt;</span><br><span class="line">        <span class="keyword">implements</span> <span class="title class_">IotElecvehicleRealtimeBaseRepository</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;WIotElecvehicleRealtimeBase&gt; <span class="title function_">list</span><span class="params">(ForwardExportMsgTask queryInfo)</span> &#123;</span><br><span class="line">        <span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> Query</span><br><span class="line">                .query(where(<span class="string">&quot;idcode&quot;</span>).like(queryInfo.getTaskPlatIdCode()))</span><br><span class="line">                .and(where(<span class="string">&quot;vin&quot;</span>).in(queryInfo.getTaskVin()))</span><br><span class="line">                .and(where(<span class="string">&quot;msgtype&quot;</span>).is(queryInfo.getTaskMsgType() + <span class="string">&quot;&quot;</span>));</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotBlank(queryInfo.getTaskStartTimeStr())) &#123;</span><br><span class="line">            query = query.and(where(<span class="string">&quot;gatime&quot;</span>).gt(queryInfo.getTaskStartTimeStr()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotBlank(queryInfo.getTaskEndTimeStr())) &#123;</span><br><span class="line">            query = query.and(where(<span class="string">&quot;gatime&quot;</span>).lt(queryInfo.getTaskEndTimeStr()));</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        query = query.sort(Sort.by(&quot;vin&quot;).descending()).withAllowFiltering();</span></span><br><span class="line">        query = query.withAllowFiltering();</span><br><span class="line">        query = query.columns(Columns.from(<span class="string">&quot;vin&quot;</span>, <span class="string">&quot;gatime&quot;</span>, <span class="string">&quot;sstr&quot;</span>, <span class="string">&quot;rectime&quot;</span>, <span class="string">&quot;fwdtime&quot;</span>, <span class="string">&quot;ressts&quot;</span>, <span class="string">&quot;restime&quot;</span>, <span class="string">&quot;idcode&quot;</span>, <span class="string">&quot;msgtype&quot;</span>));</span><br><span class="line">        System.out.println(query);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.cassandraTemplate.select(query, WIotElecvehicleRealtimeBase.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/e10202c5947602a3740d743281ce36e9_1737630164287.png" alt="在这里插入图片描述"></p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/2ace556f966f4473f3ab33896bf748ba_1737630174347.png" alt="在这里插入图片描述"></p>
<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2020/06/27/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(6)%20--%20%E6%9C%AC%E5%9C%B0%E7%94%9F%E6%B4%BB%E9%A1%B9%E7%9B%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/27/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(6)%20--%20%E6%9C%AC%E5%9C%B0%E7%94%9F%E6%B4%BB%E9%A1%B9%E7%9B%AE/" class="post-title-link" itemprop="url">微信小程序学习笔记(6) -- 本地生活项目</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-27 23:51:34" itemprop="dateCreated datePublished" datetime="2020-06-27T23:51:34+08:00">2020-06-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" itemprop="url" rel="index"><span itemprop="name">微信小程序</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>17k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>15 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[TOC]</p>
<h1 id="本地生活项目"><a href="#本地生活项目" class="headerlink" title="本地生活项目"></a>本地生活项目</h1><h2 id="项目效果图"><a href="#项目效果图" class="headerlink" title="项目效果图"></a>项目效果图</h2><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/0ed5854bc00498dcfe60a00443b942e7_1737630174347.png" alt="在这里插入图片描述"></p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/94e98fa6bf7e89a13fd195fb82eb414d_1737630174347.png" alt="在这里插入图片描述"></p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/2088a527268d0d5c1ad8f2b9da23bdc3_1737630174347.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/3fba6f5c75bd4a2f1f131c9f4eafbf10_1737630174347.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/4c0ab48dd9970cf08e68d437dee96f72_1737630189978.png" alt="在这里插入图片描述"></p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/64969a040038b6b0a6f69bf7ddf8f275_1737630189978.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/754f8806d682d00e37a2f74a7d05df64_1737630189978.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/0eb6fe4b82a514948581dce545977338_1737630189978.png" alt="在这里插入图片描述"></p>
<h2 id="外观和标签栏的配置"><a href="#外观和标签栏的配置" class="headerlink" title="外观和标签栏的配置"></a>外观和标签栏的配置</h2><h3 id="window"><a href="#window" class="headerlink" title="window"></a>window</h3><p>用于设置小程序的状态栏、导航条、标题、窗口背景色。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>描述</th>
<th>最低版本</th>
</tr>
</thead>
<tbody><tr>
<td>navigationBarBackgroundColor</td>
<td>HexColor</td>
<td>#000000</td>
<td>导航栏背景颜色，如 <code>#000000</code></td>
<td></td>
</tr>
<tr>
<td>navigationBarTextStyle</td>
<td>string</td>
<td>white</td>
<td>导航栏标题颜色，仅支持 <code>black</code> &#x2F; <code>white</code></td>
<td></td>
</tr>
<tr>
<td>navigationBarTitleText</td>
<td>string</td>
<td></td>
<td>导航栏标题文字内容</td>
<td></td>
</tr>
<tr>
<td>navigationStyle</td>
<td>string</td>
<td>default</td>
<td>导航栏样式，仅支持以下值： <code>default</code> 默认样式 <code>custom</code> 自定义导航栏，只保留右上角胶囊按钮。参见注 2。</td>
<td>微信客户端 6.6.0</td>
</tr>
<tr>
<td>backgroundColor</td>
<td>HexColor</td>
<td>#ffffff</td>
<td>窗口的背景色</td>
<td></td>
</tr>
<tr>
<td>backgroundTextStyle</td>
<td>string</td>
<td>dark</td>
<td>下拉 loading 的样式，仅支持 <code>dark</code> &#x2F; <code>light</code></td>
<td></td>
</tr>
<tr>
<td>backgroundColorTop</td>
<td>string</td>
<td>#ffffff</td>
<td>顶部窗口的背景色，仅 iOS 支持</td>
<td>微信客户端 6.5.16</td>
</tr>
<tr>
<td>backgroundColorBottom</td>
<td>string</td>
<td>#ffffff</td>
<td>底部窗口的背景色，仅 iOS 支持</td>
<td>微信客户端 6.5.16</td>
</tr>
<tr>
<td>enablePullDownRefresh</td>
<td>boolean</td>
<td>false</td>
<td>是否开启全局的下拉刷新。 详见 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onpulldownrefresh">Page.onPullDownRefresh</a></td>
<td></td>
</tr>
<tr>
<td>onReachBottomDistance</td>
<td>number</td>
<td>50</td>
<td>页面上拉触底事件触发时距页面底部距离，单位为 px。 详见 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onreachbottom">Page.onReachBottom</a></td>
<td></td>
</tr>
<tr>
<td>pageOrientation</td>
<td>string</td>
<td>portrait</td>
<td>屏幕旋转设置，支持 <code>auto</code> &#x2F; <code>portrait</code> &#x2F; <code>landscape</code> 详见 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/resizable.html">响应显示区域变化</a></td>
<td><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.4.0</a> (auto) &#x2F; <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.5.0</a> (landsca</td>
</tr>
</tbody></table>
<h3 id="tabBar"><a href="#tabBar" class="headerlink" title="tabBar"></a>tabBar</h3><p>如果小程序是一个多 tab 应用（客户端窗口的底部或顶部有 tab 栏可以切换页面），可以通过 tabBar 配置项指定 tab 栏的表现，以及 tab 切换时显示的对应页面。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
<th>描述</th>
<th>最低版本</th>
</tr>
</thead>
<tbody><tr>
<td>color</td>
<td>HexColor</td>
<td>是</td>
<td></td>
<td>tab 上的文字默认颜色，仅支持十六进制颜色</td>
<td></td>
</tr>
<tr>
<td>selectedColor</td>
<td>HexColor</td>
<td>是</td>
<td></td>
<td>tab 上的文字选中时的颜色，仅支持十六进制颜色</td>
<td></td>
</tr>
<tr>
<td>backgroundColor</td>
<td>HexColor</td>
<td>是</td>
<td></td>
<td>tab 的背景色，仅支持十六进制颜色</td>
<td></td>
</tr>
<tr>
<td>borderStyle</td>
<td>string</td>
<td>否</td>
<td>black</td>
<td>tabbar 上边框的颜色， 仅支持 <code>black</code> &#x2F; <code>white</code></td>
<td></td>
</tr>
<tr>
<td>list</td>
<td>Array</td>
<td>是</td>
<td></td>
<td>tab 的列表，详见 <code>list</code> 属性说明，最少 2 个、最多 5 个 tab</td>
<td></td>
</tr>
<tr>
<td>position</td>
<td>string</td>
<td>否</td>
<td>bottom</td>
<td>tabBar 的位置，仅支持 <code>bottom</code> &#x2F; <code>top</code></td>
<td></td>
</tr>
<tr>
<td>custom</td>
<td>boolean</td>
<td>否</td>
<td>false</td>
<td>自定义 tabBar，见<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html">详情</a></td>
<td><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.5.0</a></td>
</tr>
</tbody></table>
<p>其中 list 接受一个数组，<strong>只能配置最少 2 个、最多 5 个 tab</strong>。tab 按数组的顺序排序，每个项都是一个对象，其属性值如下：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>pagePath</td>
<td>string</td>
<td>是</td>
<td>页面路径，必须在 pages 中先定义</td>
</tr>
<tr>
<td>text</td>
<td>string</td>
<td>是</td>
<td>tab 上按钮文字</td>
</tr>
<tr>
<td>iconPath</td>
<td>string</td>
<td>否</td>
<td>图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片。 <strong>当 position 为 top 时，不显示 icon。</strong></td>
</tr>
<tr>
<td>selectedIconPath</td>
<td>string</td>
<td>否</td>
<td>选中时的图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片。 <strong>当 position 为 top 时，不显示 icon。</strong></td>
</tr>
</tbody></table>
<h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><p>建3个tab的tabBar<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/18f869efdbd50154c6c917399fb23569_1737630189978.png" alt="在这里插入图片描述"></p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/fcd2bdbee6a376614dd735e1abaee4e1_1737630203563.png" alt="在这里插入图片描述"></p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/7f1210406250d1f1ed873c21e5a3485e_1737630203563.png" alt="在这里插入图片描述"></p>
<h3 id="具体代码"><a href="#具体代码" class="headerlink" title="具体代码:"></a>具体代码:</h3><p>核心代码:</p>
<p>app.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/message/message&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/profile/profile&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;window&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#3a4891&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span><span class="string">&quot;white&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;本地生活&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#bcc0c9&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundTextStyle&quot;</span><span class="punctuation">:</span><span class="string">&quot;light&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;enablePullDownRefresh&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;assets/home.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span><span class="string">&quot;assets/home-active.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/message/message&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;消息&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;assets/message.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span><span class="string">&quot;assets/message-active.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/profile/profile&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我的&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;assets/profile.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span><span class="string">&quot;assets/profile-active.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;v2&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sitemapLocation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sitemap.json&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--index.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  首页</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/message/message.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>pages/message/message.wxml<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/profile/profile.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>pages/profile/profile.wxml<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="公共样式"><a href="#公共样式" class="headerlink" title="公共样式"></a>公共样式</h2><h3 id="设置tabBar的样式"><a href="#设置tabBar的样式" class="headerlink" title="设置tabBar的样式:"></a>设置tabBar的样式:</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/0e7a5f9bccc5a40cd009c9c022aaa806_1737630203563.png" alt="在这里插入图片描述"></p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/689b21a6ffca7bdd1790b0c6f02ce4bf_1737630203563.png" alt="在这里插入图片描述"></p>
<p>app.json全部代码</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/message/message&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/profile/profile&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;window&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#3a4891&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span><span class="string">&quot;white&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;本地生活&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#bcc0c9&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundTextStyle&quot;</span><span class="punctuation">:</span><span class="string">&quot;light&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;enablePullDownRefresh&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">     <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#999&quot;</span><span class="punctuation">,</span></span><br><span class="line">     <span class="attr">&quot;selectedColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#444&quot;</span><span class="punctuation">,</span></span><br><span class="line">     <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#fff&quot;</span><span class="punctuation">,</span></span><br><span class="line">     <span class="attr">&quot;borderStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;assets/home.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span><span class="string">&quot;assets/home-active.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/message/message&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;消息&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;assets/message.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span><span class="string">&quot;assets/message-active.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/profile/profile&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我的&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;assets/profile.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span><span class="string">&quot;assets/profile-active.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;v2&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sitemapLocation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sitemap.json&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="首页布局"><a href="#首页布局" class="headerlink" title="首页布局"></a>首页布局</h2><h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><h4 id="image"><a href="#image" class="headerlink" title="image"></a>image</h4><blockquote>
<p>基础库 1.0.0 开始支持，低版本需做<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">兼容处理</a>。</p>
</blockquote>
<p>图片。支持 JPG、PNG、SVG、WEBP、GIF 等格式，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.3.0</a> 起支持云文件ID。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
<th>最低版本</th>
</tr>
</thead>
<tbody><tr>
<td>src</td>
<td>string</td>
<td></td>
<td>否</td>
<td>图片资源地址</td>
<td><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>scaleToFill</td>
<td>否</td>
<td>图片裁剪、缩放的模式</td>
<td><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td>webp</td>
<td>boolean</td>
<td>false</td>
<td>否</td>
<td>默认不解析 webP 格式，只支持网络资源</td>
<td><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.9.0</a></td>
</tr>
<tr>
<td>lazy-load</td>
<td>boolean</td>
<td>false</td>
<td>否</td>
<td>图片懒加载，在即将进入一定范围（上下三屏）时才开始加载</td>
<td><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.5.0</a></td>
</tr>
<tr>
<td>show-menu-by-longpress</td>
<td>boolean</td>
<td>false</td>
<td>否</td>
<td>开启长按图片显示识别小程序码菜单</td>
<td><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.7.0</a></td>
</tr>
<tr>
<td>binderror</td>
<td>eventhandle</td>
<td></td>
<td>否</td>
<td>当错误发生时触发，event.detail &#x3D; {errMsg}</td>
<td><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td>bindload</td>
<td>eventhandle</td>
<td></td>
<td>否</td>
<td>当图片载入完毕时触发，event.detail &#x3D; {height, width}</td>
<td><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
</tbody></table>
<p><strong>mode 的合法值</strong></p>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
<th>最低版本</th>
</tr>
</thead>
<tbody><tr>
<td>scaleToFill</td>
<td>缩放模式，不保持纵横比缩放图片，使图片的宽高完全拉伸至填满 image 元素</td>
<td></td>
</tr>
<tr>
<td>aspectFit</td>
<td>缩放模式，保持纵横比缩放图片，使图片的长边能完全显示出来。也就是说，可以完整地将图片显示出来。</td>
<td></td>
</tr>
<tr>
<td>aspectFill</td>
<td>缩放模式，保持纵横比缩放图片，只保证图片的短边能完全显示出来。也就是说，图片通常只在水平或垂直方向是完整的，另一个方向将会发生截取。</td>
<td></td>
</tr>
<tr>
<td>widthFix</td>
<td>缩放模式，宽度不变，高度自动变化，保持原图宽高比不变</td>
<td></td>
</tr>
<tr>
<td>heightFix</td>
<td>缩放模式，高度不变，宽度自动变化，保持原图宽高比不变</td>
<td><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.3</a></td>
</tr>
<tr>
<td>top</td>
<td>裁剪模式，不缩放图片，只显示图片的顶部区域</td>
<td></td>
</tr>
<tr>
<td>bottom</td>
<td>裁剪模式，不缩放图片，只显示图片的底部区域</td>
<td></td>
</tr>
<tr>
<td>center</td>
<td>裁剪模式，不缩放图片，只显示图片的中间区域</td>
<td></td>
</tr>
<tr>
<td>left</td>
<td>裁剪模式，不缩放图片，只显示图片的左边区域</td>
<td></td>
</tr>
<tr>
<td>right</td>
<td>裁剪模式，不缩放图片，只显示图片的右边区域</td>
<td></td>
</tr>
<tr>
<td>top left</td>
<td>裁剪模式，不缩放图片，只显示图片的左上边区域</td>
<td></td>
</tr>
<tr>
<td>top right</td>
<td>裁剪模式，不缩放图片，只显示图片的右上边区域</td>
<td></td>
</tr>
<tr>
<td>bottom left</td>
<td>裁剪模式，不缩放图片，只显示图片的左下边区域</td>
<td></td>
</tr>
<tr>
<td>bottom right</td>
<td>裁剪模式，不缩放图片，只显示图片的右下边区域</td>
<td></td>
</tr>
</tbody></table>
<h3 id="目标-1"><a href="#目标-1" class="headerlink" title="目标"></a>目标</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/1471bda8641aa3c297f46e058882a32c_1737630203563.png" alt="在这里插入图片描述"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--index.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">swiper</span> <span class="attr">class</span>=<span class="string">&quot;slides&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/banner/banner-01.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/banner/banner-02.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;grids&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/grid/grid-01.png&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>美食<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/grid/grid-02.png&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>美食<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/grid/grid-03.png&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>美食<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/grid/grid-04.png&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>美食<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/grid/grid-05.png&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>美食<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/grid/grid-06.png&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>美食<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/grid/grid-07.png&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>美食<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/grid/grid-08.png&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>美食<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/grid/grid-09.png&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>美食<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;links&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/link-01.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/link-02.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**index.wxss**/</span></span><br><span class="line"><span class="selector-class">.slides</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">380</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.slides</span> <span class="selector-tag">image</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.grids</span>&#123;</span><br><span class="line">   <span class="attribute">display</span>: flex;</span><br><span class="line">   <span class="attribute">flex-wrap</span>: wrap;   </span><br><span class="line">   <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">   <span class="attribute">border-left</span>: <span class="number">1</span>rpx solid <span class="number">#eee</span>;</span><br><span class="line">   <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#eee</span>;</span><br><span class="line">   <span class="attribute">color</span>: <span class="number">#888</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.grids</span> <span class="selector-class">.item</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">33.333333%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">250</span>rpx;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">1</span>rpx solid <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1</span>rpx solid <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.grids</span> <span class="selector-class">.item</span> <span class="selector-tag">image</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">70</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">70</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.grids</span> <span class="selector-class">.item</span> <span class="selector-tag">text</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#888</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.links</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.links</span> <span class="selector-tag">image</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果:</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/ca2f364646aba7184e0b73892984fdca_1737630214134.png" alt="在这里插入图片描述"></p>
<h2 id="小程序中发送HTTP请求"><a href="#小程序中发送HTTP请求" class="headerlink" title="小程序中发送HTTP请求"></a>小程序中发送HTTP请求</h2><p>如果是测试环境:</p>
<p>在详情中设置</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/4b87f88d804eaa63265d4a23d360598d_1737630214134.png" alt="在这里插入图片描述"></p>
<p>如果是正式环境</p>
<p>1.请求的地址必须在管理后台添加白名单</p>
<p>2.域名必须备案，服务端必须采用HTTPS</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="comment">//获取应用实例</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">getApp</span>()</span><br><span class="line"></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">      wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="comment">//这里的地址没有跨域的概念</span></span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://api.douban.com/v2/movie/coming_soon&#x27;</span>,</span><br><span class="line">        <span class="attr">header</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;json&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//发送异步请求 不再是 WEB 那套 ajax</span></span><br><span class="line">        <span class="comment">//2.没有跨域</span></span><br><span class="line">        <span class="comment">//3.请求的地址必须在管理后台添加白名单</span></span><br><span class="line">        <span class="comment">//4.域名必须备案，服务端必须采用HTTPS</span></span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面初次渲染完成</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReady</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面显示</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShow</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面隐藏</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onHide</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面卸载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onUnload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面相关事件处理函数--监听用户下拉动作</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onPullDownRefresh</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面上拉触底事件的处理函数</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReachBottom</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户点击右上角分享</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShareAppMessage</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="首页数据加载及数据绑定"><a href="#首页数据加载及数据绑定" class="headerlink" title="首页数据加载及数据绑定"></a>首页数据加载及数据绑定</h2><p>封装http请求:</p>
<p>在utils的文件夹下:新建fetch.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">url, data</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`https://locally.uieee.com/<span class="subst">$&#123;url&#125;</span>`</span>,</span><br><span class="line">      <span class="attr">success</span>: resolve,</span><br><span class="line">      <span class="attr">fail</span>: reject</span><br><span class="line">    &#125;)</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>index.js导入fetch，并使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="comment">//获取应用实例</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">getApp</span>()</span><br><span class="line"><span class="keyword">const</span> fetch = <span class="built_in">require</span>(<span class="string">&#x27;../../utils/fetch&#x27;</span>)</span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">     <span class="attr">slides</span>: [],</span><br><span class="line">     <span class="attr">categories</span>: []</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    </span><br><span class="line">      wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="comment">//这里的地址没有跨域的概念</span></span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://api.douban.com/v2/movie/coming_soon&#x27;</span>,</span><br><span class="line">        <span class="attr">header</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;json&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//发送异步请求 不再是 WEB 那套 ajax</span></span><br><span class="line">        <span class="comment">//2.没有跨域</span></span><br><span class="line">        <span class="comment">//3.请求的地址必须在管理后台添加白名单</span></span><br><span class="line">        <span class="comment">//4.域名必须备案，服务端必须采用HTTPS</span></span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// wx.request(&#123;</span></span><br><span class="line">      <span class="comment">//   url: &#x27;https://locally.uieee.com/slides&#x27;,</span></span><br><span class="line">      <span class="comment">//   success: res =&gt; &#123;</span></span><br><span class="line">      <span class="comment">//     this.setData(&#123;slides: res.data&#125;);</span></span><br><span class="line">      <span class="comment">//   &#125;</span></span><br><span class="line">      <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">      <span class="title function_">fetch</span>(<span class="string">&#x27;slides&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">slides</span>: res.<span class="property">data</span>&#125;)</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// wx.request(&#123;</span></span><br><span class="line">      <span class="comment">//   url: &#x27;https://locally.uieee.com/categories&#x27;,</span></span><br><span class="line">      <span class="comment">//   success: res =&gt; &#123;</span></span><br><span class="line">      <span class="comment">//      this.setData(&#123; categories : res.data &#125;)</span></span><br><span class="line">      <span class="comment">//   &#125;</span></span><br><span class="line">      <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">      </span><br><span class="line">      <span class="title function_">fetch</span>(<span class="string">&#x27;slides&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">categories</span>: res.<span class="property">data</span>&#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面初次渲染完成</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReady</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面显示</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShow</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面隐藏</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onHide</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面卸载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onUnload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面相关事件处理函数--监听用户下拉动作</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onPullDownRefresh</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面上拉触底事件的处理函数</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReachBottom</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户点击右上角分享</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShareAppMessage</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="页面间跳转"><a href="#页面间跳转" class="headerlink" title="页面间跳转"></a>页面间跳转</h2><p>注意点:</p>
<ul>
<li><p>tab页跳转到另一个tab页，需要使用navigator的open-type&#x3D;”switchTab”</p>
<p>例如:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;grids&quot;</span>&gt;</span>  </span><br><span class="line">   <span class="tag">&lt;<span class="name">navigator</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">url</span>=<span class="string">&quot;/pages/message/message&quot;</span> <span class="attr">open-type</span>=<span class="string">&quot;switchTab&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/grid/grid-02.png&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>美食<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/65ab057a879a67cba4ef74fe8e4be3bb_1737630214134.png" alt="在这里插入图片描述"></p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/e55a4a80dd410e5fbf4355414b8a53a5_1737630214134.png" alt="在这里插入图片描述"></p>
<ul>
<li>普通跳转 ，注意修改navigator的高宽百分比，不然会空白</li>
</ul>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/11aaabb2b8f7c8737cf4e94c67eb5c5f_1737630214134.png" alt="在这里插入图片描述"></p>
<p>  添加了navigator</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/7b650194b46468b94f8ed2a54a5d268e_1737630226641.png" alt="在这里插入图片描述"></p>
<h2 id="列表页分类信息加载"><a href="#列表页分类信息加载" class="headerlink" title="列表页分类信息加载"></a>列表页分类信息加载</h2><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/4329de65beed159141f65f3485d7e2ba_1737630226641.png" alt="在这里插入图片描述"></p>
<p>注意点， 设置分类导航栏的名字的顺序，一定在onReady函数执行完之后。</p>
<p>list.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(options)</span><br><span class="line">    <span class="comment">//这里不能确定一定是在 onReady过后执行</span></span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">`categories/<span class="subst">$&#123;options.cat&#125;</span>`</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">       <span class="comment">//设置导航条</span></span><br><span class="line">      <span class="comment">//  wx.setNavigationBarTitle(&#123;</span></span><br><span class="line">      <span class="comment">//    title: res.data.name</span></span><br><span class="line">      <span class="comment">//  &#125;)</span></span><br><span class="line">       <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">category</span>: res.<span class="property">data</span>&#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"><span class="attr">onReady</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">      <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">category</span>.<span class="property">name</span>）&#123;</span><br><span class="line">        wx.<span class="title function_">setNavigationBarTitle</span>(&#123;</span><br><span class="line">          <span class="attr">title</span>: res.<span class="property">data</span>.<span class="property">name</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;     </span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="第一页的商铺信息的加载"><a href="#第一页的商铺信息的加载" class="headerlink" title="第一页的商铺信息的加载"></a>第一页的商铺信息的加载</h2><p>关键代码:</p>
<p>优化封装的fetch.js,让其可以携带参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">url, data</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`https://locally.uieee.com/<span class="subst">$&#123;url&#125;</span>`</span>,</span><br><span class="line">      <span class="attr">data</span>: data,</span><br><span class="line">      <span class="attr">success</span>: resolve,</span><br><span class="line">      <span class="attr">fail</span>: reject</span><br><span class="line">    &#125;)</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>正确使用promise.2个请求，有前后顺序的正确写法:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">onLoad<span class="punctuation">:</span> function (options) <span class="punctuation">&#123;</span></span><br><span class="line">  console.log(<span class="number">2</span>)</span><br><span class="line">  console.log(options)</span><br><span class="line">  <span class="comment">//这里不能确定一定是在 onReady过后执行</span></span><br><span class="line">  fetch(`categories/$<span class="punctuation">&#123;</span>options.cat<span class="punctuation">&#125;</span>`).then(res =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">     console.log(res.data)</span><br><span class="line">     <span class="comment">//设置导航条</span></span><br><span class="line">    <span class="comment">//  wx.setNavigationBarTitle(&#123;</span></span><br><span class="line">    <span class="comment">//    title: res.data.name</span></span><br><span class="line">    <span class="comment">//  &#125;)</span></span><br><span class="line">     this.setData(<span class="punctuation">&#123;</span> category<span class="punctuation">:</span> res.data<span class="punctuation">&#125;</span>)</span><br><span class="line">    </span><br><span class="line">       <span class="comment">//加载完分类信息过后再去加载商铺信息</span></span><br><span class="line">      return  fetch(`categories/$<span class="punctuation">&#123;</span>this.data.category.id<span class="punctuation">&#125;</span>shops`<span class="punctuation">,</span><span class="punctuation">&#123;</span>_page；<span class="number">1</span>，_limit<span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">&#125;</span>) </span><br><span class="line">  <span class="punctuation">&#125;</span>)</span><br><span class="line">  .then(res =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">     this.setData(<span class="punctuation">&#123;</span> shops<span class="punctuation">:</span> res.data <span class="punctuation">&#125;</span>)</span><br><span class="line">  <span class="punctuation">&#125;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="上拉加载更多onReachBottom"><a href="#上拉加载更多onReachBottom" class="headerlink" title="上拉加载更多onReachBottom"></a>上拉加载更多onReachBottom</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html">https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html</a><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/1f103531c81860a38c368c9b63ab8668_1737630226641.png" alt="在这里插入图片描述"></p>
<p>list.json</p>
<p>值越小，越迟钝，看具体需求</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;onReachBottomDistance&quot;</span><span class="punctuation">:</span> <span class="number">20</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/6b5a88c9d2c04a2a47b5e5a839d2354b_1737630226641.png" alt="在这里插入图片描述"><br>list.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/list/list.js</span></span><br><span class="line"><span class="keyword">const</span> fetch = <span class="built_in">require</span>(<span class="string">&#x27;../../utils/fetch&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="comment">//当前加载的分类</span></span><br><span class="line">    <span class="attr">category</span>:&#123;&#125;,</span><br><span class="line">    <span class="comment">//子分类下的全部店铺</span></span><br><span class="line">    <span class="attr">shops</span>: [],</span><br><span class="line">    <span class="attr">pageIndex</span>:<span class="number">0</span>,</span><br><span class="line">    <span class="attr">pageSize</span>:<span class="number">20</span>,</span><br><span class="line">    <span class="attr">hasMore</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">loadMore</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">hasMore</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">//从data中取出 pageIndex 和 pageSize</span></span><br><span class="line">    <span class="keyword">let</span> &#123; pageIndex, pageSize &#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line">    <span class="keyword">const</span> params = &#123;<span class="attr">_page</span>: ++pageIndex, <span class="attr">_limit</span>: pageSize&#125;</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">`categories/<span class="subst">$&#123;<span class="variable language_">this</span>.data.category.id&#125;</span>/shops`</span>, params) </span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> totalCount = <span class="built_in">parseInt</span>(res.<span class="property">header</span>[<span class="string">&#x27;X-Total-Count&#x27;</span>])</span><br><span class="line">      <span class="keyword">const</span> hasMore = pageIndex * pageSize &lt; totalCount</span><br><span class="line">        <span class="keyword">const</span> shops = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">shops</span>.<span class="title function_">concat</span>(res.<span class="property">data</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; shops, pageIndex, hasMore&#125;)</span><br><span class="line">     &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(options)</span><br><span class="line">    <span class="comment">//这里不能确定一定是在 onReady过后执行</span></span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">`categories/<span class="subst">$&#123;options.cat&#125;</span>`</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">       <span class="comment">//设置导航条</span></span><br><span class="line">      <span class="comment">//  wx.setNavigationBarTitle(&#123;</span></span><br><span class="line">      <span class="comment">//    title: res.data.name</span></span><br><span class="line">      <span class="comment">//  &#125;)</span></span><br><span class="line">       <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">category</span>: res.<span class="property">data</span>&#125;)</span><br><span class="line">      </span><br><span class="line">         <span class="comment">//加载完分类信息过后再去加载商铺信息</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">loadMore</span>();</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面初次渲染完成</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReady</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">      <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">category</span>.<span class="property">name</span>）&#123;</span><br><span class="line">        wx.<span class="title function_">setNavigationBarTitle</span>(&#123;</span><br><span class="line">          <span class="attr">title</span>: res.<span class="property">data</span>.<span class="property">name</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;     </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面显示</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShow</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面隐藏</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onHide</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面卸载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onUnload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面相关事件处理函数--监听用户下拉动作</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onPullDownRefresh</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面上拉触底事件的处理函数</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReachBottom</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">       <span class="comment">//需要判断是否正在加载，否则会有多次触发问题</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;到底了，别啦了&#x27;</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">loadMore</span>();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户点击右上角分享</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShareAppMessage</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="下拉刷新"><a href="#下拉刷新" class="headerlink" title="下拉刷新"></a>下拉刷新</h2><p>启动下拉刷新</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/92916fd65142adc7eb9cce13bb6c6609_1737630226641.png" alt="在这里插入图片描述"></p>
<p>list.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;enablePullDownRefresh&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;onReachBottomDistance&quot;</span><span class="punctuation">:</span> <span class="number">20</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>停止下拉刷新</p>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/ui/pull-down-refresh/wx.stopPullDownRefresh.html">https://developers.weixin.qq.com/miniprogram/dev/api/ui/pull-down-refresh/wx.stopPullDownRefresh.html</a></p>
<blockquote>
<p>wx.stopPullDownRefresh(Object object)</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/list/list.js</span></span><br><span class="line"><span class="keyword">const</span> fetch = <span class="built_in">require</span>(<span class="string">&#x27;../../utils/fetch&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="comment">//当前加载的分类</span></span><br><span class="line">    <span class="attr">category</span>:&#123;&#125;,</span><br><span class="line">    <span class="comment">//子分类下的全部店铺</span></span><br><span class="line">    <span class="attr">shops</span>: [],</span><br><span class="line">    <span class="attr">pageIndex</span>:<span class="number">0</span>,</span><br><span class="line">    <span class="attr">pageSize</span>:<span class="number">20</span>,</span><br><span class="line">    <span class="attr">hasMore</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">loadMore</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">hasMore</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">//从data中取出 pageIndex 和 pageSize</span></span><br><span class="line">    <span class="keyword">let</span> &#123; pageIndex, pageSize &#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line">    <span class="keyword">const</span> params = &#123;<span class="attr">_page</span>: ++pageIndex, <span class="attr">_limit</span>: pageSize&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fetch</span>(<span class="string">`categories/<span class="subst">$&#123;<span class="variable language_">this</span>.data.category.id&#125;</span>/shops`</span>, params) </span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> totalCount = <span class="built_in">parseInt</span>(res.<span class="property">header</span>[<span class="string">&#x27;X-Total-Count&#x27;</span>])</span><br><span class="line">      <span class="keyword">const</span> hasMore = pageIndex * pageSize &lt; totalCount</span><br><span class="line">        <span class="keyword">const</span> shops = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">shops</span>.<span class="title function_">concat</span>(res.<span class="property">data</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; shops, pageIndex, hasMore&#125;)</span><br><span class="line">     &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(options)</span><br><span class="line">    <span class="comment">//这里不能确定一定是在 onReady过后执行</span></span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">`categories/<span class="subst">$&#123;options.cat&#125;</span>`</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">       <span class="comment">//设置导航条</span></span><br><span class="line">      <span class="comment">//  wx.setNavigationBarTitle(&#123;</span></span><br><span class="line">      <span class="comment">//    title: res.data.name</span></span><br><span class="line">      <span class="comment">//  &#125;)</span></span><br><span class="line">       <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">category</span>: res.<span class="property">data</span>&#125;)</span><br><span class="line">      </span><br><span class="line">         <span class="comment">//加载完分类信息过后再去加载商铺信息</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">loadMore</span>();</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面初次渲染完成</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReady</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">      <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">category</span>.<span class="property">name</span>）&#123;</span><br><span class="line">        wx.<span class="title function_">setNavigationBarTitle</span>(&#123;</span><br><span class="line">          <span class="attr">title</span>: res.<span class="property">data</span>.<span class="property">name</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;     </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面显示</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShow</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面隐藏</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onHide</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面卸载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onUnload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面相关事件处理函数--监听用户下拉动作</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onPullDownRefresh</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//重新加载</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">shops</span>:[],<span class="attr">pageIndex</span>:<span class="number">0</span>, <span class="attr">hasMore</span>:<span class="literal">false</span>&#125;);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">loadMore</span>()</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面上拉触底事件的处理函数</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReachBottom</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">       <span class="comment">//需要判断是否正在加载，否则会有多次触发问题</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;到底了，别啦了&#x27;</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">loadMore</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> wx.<span class="title function_">stopPullDownRefresh</span>());</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户点击右上角分享</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShareAppMessage</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="详细页"><a href="#详细页" class="headerlink" title="详细页:"></a>详细页:</h2><p>注意点:</p>
<p>使用wxs行内脚本设置过滤器。但是不支持es6</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/f712e5cb3ef954ddb19ad28d45fbda95_1737630240125.png" alt="在这里插入图片描述"><br>预览图片</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/865c1ce205439f7a4ecbaaddc21de78f_1737630240125.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/34ea94d6800ca31dd89d6be17e652e8d_1737630240125.png" alt="在这里插入图片描述"><br>效果:</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/50399de62a6cf065acc4581cb9c5d5df_1737630240125.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-G96kqQ69-1593272623869)(本地生活项目.assets&#x2F;1593266711073.png)]"></p>
<h2 id="源码地址"><a href="#源码地址" class="headerlink" title="源码地址:"></a>源码地址:</h2><p>感谢大神:  <a target="_blank" rel="noopener" href="https://github.com/zce/weapp-locally">https://github.com/zce/weapp-locally</a></p>
<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hufanglei.github.io/2020/06/27/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(5)%20--%20todos%E6%A1%88%E4%BE%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡方雷">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
      <meta itemprop="description" content="直到这一刻微笑着说话为止，我至少留下了一公升眼泪">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 个人博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/27/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(5)%20--%20todos%E6%A1%88%E4%BE%8B/" class="post-title-link" itemprop="url">微信小程序学习笔记(5) -- todos案例</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-27 23:39:24" itemprop="dateCreated datePublished" datetime="2020-06-27T23:39:24+08:00">2020-06-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-24 11:37:59" itemprop="dateModified" datetime="2025-01-24T11:37:59+08:00">2025-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" itemprop="url" rel="index"><span itemprop="name">微信小程序</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>23k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>20 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>

<p>@[TOC]</p>
<h1 id="TODOS案例"><a href="#TODOS案例" class="headerlink" title="TODOS案例:"></a>TODOS案例:</h1><h2 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h2><p><a target="_blank" rel="noopener" href="https://github.com/zce/weapp-todos">https://github.com/zce/weapp-todos</a></p>
<h2 id="样式书写"><a href="#样式书写" class="headerlink" title="样式书写"></a>样式书写</h2><h3 id="导航栏"><a href="#导航栏" class="headerlink" title="导航栏"></a>导航栏</h3><p>效果：</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/aa23907a42350ff45c878f6b01b7d6a1_1737630240125.png" alt="在这里插入图片描述"><br>具体代码:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../images/plus.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Anything here...&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/todos/todos.wxss */</span></span><br><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1</span>rpx solid <span class="number">#E0E0E0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.search</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex; </span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5</span>rpx;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5</span>rpx <span class="number">#E0E0E0</span>;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.search</span> <span class="selector-tag">input</span>&#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40</span>rpx;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.search</span> <span class="selector-tag">image</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="todos"><a href="#todos" class="headerlink" title="todos"></a>todos</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/78c5d0f115cca140183539595f207603_1737630255674.png" alt="在这里插入图片描述"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;todos&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">text</span>&gt;</span>Learning HTML<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;clear&quot;</span> <span class="attr">size</span>=<span class="string">&quot;16&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;circle&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">text</span>&gt;</span>Learning CSS<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;clear&quot;</span> <span class="attr">size</span>=<span class="string">&quot;16&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;circle&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">text</span>&gt;</span>Learning Javascript<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;clear&quot;</span> <span class="attr">size</span>=<span class="string">&quot;16&quot;</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.todos</span>&#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5</span>rpx;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5</span>rpx <span class="number">#E0E0E0</span>;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.todos</span> <span class="selector-class">.item</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#E0E0E0</span>;</span><br><span class="line">  <span class="comment">/* margin-bottom: -1px; */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.todos</span> <span class="selector-class">.item</span><span class="selector-pseudo">:last-child</span>&#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">text</span>&#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#444</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="footer"><a href="#footer" class="headerlink" title="footer"></a>footer</h3><p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/fed51756f7bab2ba6abcef031e1f4cd8_1737630255674.png" alt="在这里插入图片描述"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;footers&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>Toggle All<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>2 items left<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>Clear completed<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.footers</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="comment">/* 内容对其方式 */</span></span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">   <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.footers</span> <span class="selector-tag">text</span>&#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在整体效果已经产生:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/9a972c78d0ed6fb254dd96d707726570_1737630255674.png" alt="在这里插入图片描述"></p>
<h2 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h2><h3 id="抽象数据模型"><a href="#抽象数据模型" class="headerlink" title="抽象数据模型"></a>抽象数据模型</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/todos/todos.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="comment">//文本框数据模型</span></span><br><span class="line">      <span class="attr">search</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="comment">//任务清单数据模型</span></span><br><span class="line">      <span class="attr">todos</span>: [</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning WEAPP&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning JavaScript&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning HTML&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;</span><br><span class="line">      ]</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="界面数据绑定"><a href="#界面数据绑定" class="headerlink" title="界面数据绑定"></a>界面数据绑定</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/todos/todos.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="comment">//文本框数据模型</span></span><br><span class="line">      <span class="attr">search</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="comment">//任务清单数据模型</span></span><br><span class="line">      <span class="attr">todos</span>: [</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning WEAPP&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning JavaScript&#x27;</span>,<span class="attr">completed</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning HTML&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;</span><br><span class="line">      ]</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/todos/todos.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../images/plus.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Anything here...&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;search&#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;todos&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&#123;&#123; item.completed ? &#x27; completed&#x27; : &#x27;&#x27; &#125;&#125;&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; todos&#125;&#125;&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;&#123;&#123;item.completed? &#x27;success&#x27;:&#x27;circle&#x27;&#125;&#125;&quot;</span>  /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;clear&quot;</span> <span class="attr">size</span>=<span class="string">&quot;16&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span>    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;footers&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>Toggle All<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123; todos.length &#125;&#125; items left<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span>&gt;</span>Clear completed<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>页面效果:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/7d15ccfeb4193bab1e092fb5ff52c712_1737630255674.png" alt="在这里插入图片描述"></p>
<h2 id="界面交互操作"><a href="#界面交互操作" class="headerlink" title="界面交互操作"></a>界面交互操作</h2><h3 id="新增"><a href="#新增" class="headerlink" title="新增"></a>新增</h3><p>目标1： 搜索框中添加的数据，加入到列表当中:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/todos/todos.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../images/plus.png&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;addTodoHandle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Anything here...&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;input&#125;&#125;&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;inputChangeHandle&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;todos&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&#123;&#123; item.completed ? &#x27; completed&#x27; : &#x27;&#x27; &#125;&#125;&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; todos&#125;&#125;&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;&#123;&#123;item.completed? &#x27;success&#x27;:&#x27;circle&#x27;&#125;&#125;&quot;</span>  /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;clear&quot;</span> <span class="attr">size</span>=<span class="string">&quot;16&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span>    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;footers&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>Toggle All<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123; todos.length &#125;&#125; items left<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span>&gt;</span>Clear completed<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/todos/todos.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="comment">//文本框数据模型</span></span><br><span class="line">      <span class="attr">input</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="comment">//任务清单数据模型</span></span><br><span class="line">      <span class="attr">todos</span>: [</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning WEAPP&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning JavaScript&#x27;</span>,<span class="attr">completed</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning HTML&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;</span><br><span class="line">      ]</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">inputChangeHandle</span>: <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">//body</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">value</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">input</span>: e.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//1.先让按钮点击时 执行一段代码</span></span><br><span class="line">  <span class="comment">//2. 拿到文本框里面的值</span></span><br><span class="line">  <span class="comment">// 2.1 由于小程序的数据绑定是单向的，</span></span><br><span class="line">  <span class="comment">//       必须要给文本框注册改变事件</span></span><br><span class="line">  <span class="comment">//3. 将这个值添加到列表中</span></span><br><span class="line">  <span class="attr">addTodoHandle</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="comment">//当添加按钮点击事件发生时执行的函数</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>)</span><br><span class="line">     <span class="keyword">var</span> todos =  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>;</span><br><span class="line">     todos.<span class="title function_">push</span>(&#123;       </span><br><span class="line">         <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>,</span><br><span class="line">         <span class="attr">completed</span>: <span class="literal">false</span></span><br><span class="line">      &#125;)  </span><br><span class="line">     <span class="comment">//必须显式的通过setData去改变数据，这样界面才能得到变化</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">todos</span>: todos</span><br><span class="line">     &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>效果:</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/b3bd4969bde432860ee635065dc8db43_1737630255674.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/52f61834defde4cd9d574d696554be69_1737630267017.png" alt="在这里插入图片描述"></p>
<h3 id="新增逻辑优化"><a href="#新增逻辑优化" class="headerlink" title="新增逻辑优化"></a>新增逻辑优化</h3><p>刚才的代码中，如果是input的内容为空，点击+号，还是会添加到todo的列表中:</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/840f3aa0a5feb02dc9223ca1a5cd18f2_1737630267017.png" alt="在这里插入图片描述"></p>
<p>逻辑优化: 只需要一行代码:</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/52e087e998708287d64b172fed52ce60_1737630267017.png" alt="在这里插入图片描述"></p>
<h3 id="切换任务完成状态"><a href="#切换任务完成状态" class="headerlink" title="切换任务完成状态"></a>切换任务完成状态</h3><p>在列表项上添加事件，改变选中项的completed的状态，然后setData赋值即可:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/todos/todos.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../images/plus.png&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;addTodoHandle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Anything here...&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;input&#125;&#125;&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;inputChangeHandle&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;todos&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&#123;&#123; item.completed ? &#x27; completed&#x27; : &#x27;&#x27; &#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; todos&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;toggleTodoHandle&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123; index &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;&#123;&#123;item.completed? &#x27;success&#x27;:&#x27;circle&#x27;&#125;&#125;&quot;</span>  /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;clear&quot;</span> <span class="attr">size</span>=<span class="string">&quot;16&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span>    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;footers&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>Toggle All<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123; todos.length &#125;&#125; items left<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span>&gt;</span>Clear completed<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/todos/todos.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="comment">//文本框数据模型</span></span><br><span class="line">      <span class="attr">input</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="comment">//任务清单数据模型</span></span><br><span class="line">      <span class="attr">todos</span>: [</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning WEAPP&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning JavaScript&#x27;</span>,<span class="attr">completed</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning HTML&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;</span><br><span class="line">      ]</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">inputChangeHandle</span>: <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">//body</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">value</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">input</span>: e.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//1.先让按钮点击时 执行一段代码</span></span><br><span class="line">  <span class="comment">//2. 拿到文本框里面的值</span></span><br><span class="line">  <span class="comment">// 2.1 由于小程序的数据绑定是单向的，</span></span><br><span class="line">  <span class="comment">//       必须要给文本框注册改变事件</span></span><br><span class="line">  <span class="comment">//3. 将这个值添加到列表中</span></span><br><span class="line">  <span class="attr">addTodoHandle</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123; S</span><br><span class="line">     <span class="comment">//当添加按钮点击事件发生时执行的函数</span></span><br><span class="line">     <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>)<span class="keyword">return</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>)     </span><br><span class="line">     <span class="keyword">var</span> todos =  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>;</span><br><span class="line">  </span><br><span class="line">     todos.<span class="title function_">push</span>(&#123;       </span><br><span class="line">         <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>,</span><br><span class="line">         <span class="attr">completed</span>: <span class="literal">false</span></span><br><span class="line">      &#125;)  </span><br><span class="line">     <span class="comment">//必须显式的通过setData去改变数据，这样界面才能得到变化</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">todos</span>: todos</span><br><span class="line">     &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">toggleTodoHandle</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">//切换当前点中的item的完成状态</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">currentTarget</span>);</span><br><span class="line">    <span class="keyword">var</span> item = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>[e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>]</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line">    item.<span class="property">completed</span> = !item.<span class="property">completed</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">       <span class="attr">todos</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>效果：<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/58524ce664c57e4c9c1482bca12829de_1737630267017.png" alt="在这里插入图片描述"></p>
<h3 id="剩余任务数量展示"><a href="#剩余任务数量展示" class="headerlink" title="剩余任务数量展示"></a>剩余任务数量展示</h3><blockquote>
<p>实现目标有3点:</p>
</blockquote>
<p>1.若未选中的item的项数大于1，则 应为items left</p>
<p>2.如果为1，则应为item left</p>
<p>3.若没有可选的项，则不显示任务数量</p>
<p>4.注意动态切换任务数量</p>
<blockquote>
<p>步骤，主要有3点:</p>
</blockquote>
<p>1.定义一个leftCount属性来显示剩余未选项</p>
<p>2.在输入框中的+号点击的时候，添加1</p>
<p>3切换列表的状态时，如果选中的列表项的completed为true则是+1.否则减1</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/todos/todos.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../images/plus.png&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;addTodoHandle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Anything here...&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;input&#125;&#125;&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;inputChangeHandle&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;todos&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&#123;&#123; item.completed ? &#x27; completed&#x27; : &#x27;&#x27; &#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; todos&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;toggleTodoHandle&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123; index &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;&#123;&#123;item.completed? &#x27;success&#x27;:&#x27;circle&#x27;&#125;&#125;&quot;</span>  /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;clear&quot;</span> <span class="attr">size</span>=<span class="string">&quot;16&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span>    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;footers&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>Toggle All<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123; leftCount &#125;&#125;&quot;</span>&gt;</span> &#123;&#123; leftCount &#125;&#125; &#123;&#123;leftCount &gt; 1 ? &#x27;items&#x27; : &#x27;item&#x27; &#125;&#125; left<span class="tag">&lt;/<span class="name">text</span>&gt;</span>  </span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span>&gt;</span>Clear completed<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/todos/todos.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="comment">//文本框数据模型</span></span><br><span class="line">      <span class="attr">input</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="comment">//任务清单数据模型</span></span><br><span class="line">      <span class="attr">todos</span>: [</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning WEAPP&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning JavaScript&#x27;</span>,<span class="attr">completed</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning HTML&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">leftCount</span>: <span class="number">2</span></span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">inputChangeHandle</span>: <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">//body</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">value</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">input</span>: e.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//1.先让按钮点击时 执行一段代码</span></span><br><span class="line">  <span class="comment">//2. 拿到文本框里面的值</span></span><br><span class="line">  <span class="comment">// 2.1 由于小程序的数据绑定是单向的，</span></span><br><span class="line">  <span class="comment">//       必须要给文本框注册改变事件</span></span><br><span class="line">  <span class="comment">//3. 将这个值添加到列表中</span></span><br><span class="line">  <span class="attr">addTodoHandle</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123; </span><br><span class="line">     <span class="comment">//当添加按钮点击事件发生时执行的函数</span></span><br><span class="line">     <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>)<span class="keyword">return</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>)     </span><br><span class="line">     <span class="keyword">var</span> todos =  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>;  </span><br><span class="line">     todos.<span class="title function_">push</span>(&#123;       </span><br><span class="line">         <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>,</span><br><span class="line">         <span class="attr">completed</span>: <span class="literal">false</span></span><br><span class="line">      &#125;)  </span><br><span class="line">     <span class="comment">//必须显式的通过setData去改变数据，这样界面才能得到变化</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">todos</span>: todos,</span><br><span class="line">       <span class="attr">input</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">       <span class="attr">leftCount</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> + <span class="number">1</span>  </span><br><span class="line">     &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">toggleTodoHandle</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">//切换当前点中的item的完成状态</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">currentTarget</span>);</span><br><span class="line">    <span class="keyword">var</span> item = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>[e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>]</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line">    item.<span class="property">completed</span> = !item.<span class="property">completed</span></span><br><span class="line">    <span class="comment">//根据当前任务额完成状态决定增加一个或者减少一个</span></span><br><span class="line">    <span class="keyword">var</span> leftCount = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> + (item.<span class="property">completed</span> ? -<span class="number">1</span> : <span class="number">1</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">       <span class="attr">todos</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>,</span><br><span class="line">       <span class="attr">leftCount</span>: leftCount</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="删除任务逻辑"><a href="#删除任务逻辑" class="headerlink" title="删除任务逻辑"></a>删除任务逻辑</h3><p>注意点：事件冒泡问题，用catchtap事件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/todos/todos.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../images/plus.png&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;addTodoHandle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Anything here...&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;input&#125;&#125;&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;inputChangeHandle&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;todos&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&#123;&#123; item.completed ? &#x27; completed&#x27; : &#x27;&#x27; &#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; todos&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;toggleTodoHandle&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123; index &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;&#123;&#123;item.completed? &#x27;success&#x27;:&#x27;circle&#x27;&#125;&#125;&quot;</span>  /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;clear&quot;</span> <span class="attr">size</span>=<span class="string">&quot;16&quot;</span> <span class="attr">catchtap</span>=<span class="string">&quot;removeToDoHandle&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123; index &#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span>    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;footers&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>Toggle All<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123; leftCount &#125;&#125;&quot;</span>&gt;</span> &#123;&#123; leftCount &#125;&#125; &#123;&#123;leftCount &gt; 1 ? &#x27;items&#x27; : &#x27;item&#x27; &#125;&#125; left<span class="tag">&lt;/<span class="name">text</span>&gt;</span>  </span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span>&gt;</span>Clear completed<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/todos/todos.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="comment">//文本框数据模型</span></span><br><span class="line">      <span class="attr">input</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="comment">//任务清单数据模型</span></span><br><span class="line">      <span class="attr">todos</span>: [</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning WEAPP&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning JavaScript&#x27;</span>,<span class="attr">completed</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning HTML&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">leftCount</span>: <span class="number">2</span></span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">inputChangeHandle</span>: <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">//body</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">value</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">input</span>: e.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//1.先让按钮点击时 执行一段代码</span></span><br><span class="line">  <span class="comment">//2. 拿到文本框里面的值</span></span><br><span class="line">  <span class="comment">// 2.1 由于小程序的数据绑定是单向的，</span></span><br><span class="line">  <span class="comment">//       必须要给文本框注册改变事件</span></span><br><span class="line">  <span class="comment">//3. 将这个值添加到列表中</span></span><br><span class="line">  <span class="attr">addTodoHandle</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123; </span><br><span class="line">     <span class="comment">//当添加按钮点击事件发生时执行的函数</span></span><br><span class="line">     <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>)<span class="keyword">return</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>)     </span><br><span class="line">     <span class="keyword">var</span> todos =  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>;  </span><br><span class="line">     todos.<span class="title function_">push</span>(&#123;       </span><br><span class="line">         <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>,</span><br><span class="line">         <span class="attr">completed</span>: <span class="literal">false</span></span><br><span class="line">      &#125;)  </span><br><span class="line">     <span class="comment">//必须显式的通过setData去改变数据，这样界面才能得到变化</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">todos</span>: todos,</span><br><span class="line">       <span class="attr">input</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">       <span class="attr">leftCount</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> + <span class="number">1</span>  </span><br><span class="line">     &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">toggleTodoHandle</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">//切换当前点中的item的完成状态</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">currentTarget</span>);</span><br><span class="line">    <span class="keyword">var</span> item = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>[e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>]</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line">    item.<span class="property">completed</span> = !item.<span class="property">completed</span></span><br><span class="line">    <span class="comment">//根据当前任务额完成状态决定增加一个或者减少一个</span></span><br><span class="line">    <span class="keyword">var</span> leftCount = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> + (item.<span class="property">completed</span> ? -<span class="number">1</span> : <span class="number">1</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">       <span class="attr">todos</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>,</span><br><span class="line">       <span class="attr">leftCount</span>: leftCount</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">removeToDoHandle</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> item = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>[e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>]</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> =  item.<span class="property">completed</span> ? <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> : (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> - <span class="number">1</span>) ;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>.<span class="title function_">splice</span>(e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">todos</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>,</span><br><span class="line">      <span class="attr">leftCount</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span></span><br><span class="line">   &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>运行效果:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/85c4b0efa394cb30472b081533fc71d9_1737630267017.png" alt="在这里插入图片描述"><br>显示已经删除:</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/1306e7055849253a9a53a21fd674d146_1737630278006.png" alt="在这里插入图片描述"></p>
<h3 id="切换全部任务状态-全选"><a href="#切换全部任务状态-全选" class="headerlink" title="切换全部任务状态(全选)"></a>切换全部任务状态(全选)</h3><p>页面添加一个事件toggleAllHandle</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/todos/todos.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../images/plus.png&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;addTodoHandle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Anything here...&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;input&#125;&#125;&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;inputChangeHandle&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;todos&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&#123;&#123; item.completed ? &#x27; completed&#x27; : &#x27;&#x27; &#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; todos&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;toggleTodoHandle&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123; index &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;&#123;&#123;item.completed? &#x27;success&#x27;:&#x27;circle&#x27;&#125;&#125;&quot;</span>  /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;clear&quot;</span> <span class="attr">size</span>=<span class="string">&quot;16&quot;</span> <span class="attr">catchtap</span>=<span class="string">&quot;removeToDoHandle&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123; index &#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span>    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;footers&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">bindtap</span>=<span class="string">&quot;toggleAllHandle&quot;</span>&gt;</span>Toggle All<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123; leftCount &#125;&#125;&quot;</span>&gt;</span> &#123;&#123; leftCount &#125;&#125; &#123;&#123;leftCount &gt; 1 ? &#x27;items&#x27; : &#x27;item&#x27; &#125;&#125; left<span class="tag">&lt;/<span class="name">text</span>&gt;</span>  </span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span>&gt;</span>Clear completed<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>js书写逻辑:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/todos/todos.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="comment">//文本框数据模型</span></span><br><span class="line">      <span class="attr">input</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="comment">//任务清单数据模型</span></span><br><span class="line">      <span class="attr">todos</span>: [</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning WEAPP&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning JavaScript&#x27;</span>,<span class="attr">completed</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning HTML&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">leftCount</span>: <span class="number">2</span>,</span><br><span class="line">      <span class="attr">allCompleted</span>: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">inputChangeHandle</span>: <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">//body</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">value</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">input</span>: e.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//1.先让按钮点击时 执行一段代码</span></span><br><span class="line">  <span class="comment">//2. 拿到文本框里面的值</span></span><br><span class="line">  <span class="comment">// 2.1 由于小程序的数据绑定是单向的，</span></span><br><span class="line">  <span class="comment">//       必须要给文本框注册改变事件</span></span><br><span class="line">  <span class="comment">//3. 将这个值添加到列表中</span></span><br><span class="line">  <span class="attr">addTodoHandle</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123; </span><br><span class="line">     <span class="comment">//当添加按钮点击事件发生时执行的函数</span></span><br><span class="line">     <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>)<span class="keyword">return</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>)     </span><br><span class="line">     <span class="keyword">var</span> todos =  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>;  </span><br><span class="line">     todos.<span class="title function_">push</span>(&#123;       </span><br><span class="line">         <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>,</span><br><span class="line">         <span class="attr">completed</span>: <span class="literal">false</span></span><br><span class="line">      &#125;)  </span><br><span class="line">     <span class="comment">//必须显式的通过setData去改变数据，这样界面才能得到变化</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">todos</span>: todos,</span><br><span class="line">       <span class="attr">input</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">       <span class="attr">leftCount</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> + <span class="number">1</span>  </span><br><span class="line">     &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">toggleTodoHandle</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">//切换当前点中的item的完成状态</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">currentTarget</span>);</span><br><span class="line">    <span class="keyword">var</span> item = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>[e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>]</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line">    item.<span class="property">completed</span> = !item.<span class="property">completed</span></span><br><span class="line">    <span class="comment">//根据当前任务额完成状态决定增加一个或者减少一个</span></span><br><span class="line">    <span class="keyword">var</span> leftCount = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> + (item.<span class="property">completed</span> ? -<span class="number">1</span> : <span class="number">1</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">       <span class="attr">todos</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>,</span><br><span class="line">       <span class="attr">leftCount</span>: leftCount</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">removeToDoHandle</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> item = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>[e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>]</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> =  item.<span class="property">completed</span> ? <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> : (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> - <span class="number">1</span>) ;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>.<span class="title function_">splice</span>(e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">todos</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>,</span><br><span class="line">      <span class="attr">leftCount</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span></span><br><span class="line">   &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">toggleAllHandle</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//this在这里永远指向的是当前页面对象</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">11</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">allCompleted</span> = !<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">allCompleted</span>     </span><br><span class="line">    <span class="keyword">var</span> todos = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>  </span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span></span><br><span class="line">    todos.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item</span>)&#123;</span><br><span class="line">      item.<span class="property">completed</span> = that.<span class="property">data</span>.<span class="property">allCompleted</span> </span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">todos</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>,</span><br><span class="line">      <span class="attr">leftCount</span>:  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">allCompleted</span>? <span class="number">0</span> : todos.<span class="property">length</span> </span><br><span class="line">   &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/9d3f8fb1b431996d6c6cacb98796a831_1737630278006.png" alt="在这里插入图片描述"><br>全选：</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/bb622fc01b1d57a2ccd2bd2bd27ec092_1737630278006.png" alt="在这里插入图片描述"><br>全不选:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/e551688cc04c997552adda7410266f92_1737630278006.png" alt="在这里插入图片描述"></p>
<h3 id="清空已完成任务"><a href="#清空已完成任务" class="headerlink" title="清空已完成任务"></a>清空已完成任务</h3><p>在页面定义个clearHandle方法:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/todos/todos.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../images/plus.png&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;addTodoHandle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Anything here...&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;input&#125;&#125;&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;inputChangeHandle&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;todos&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&#123;&#123; item.completed ? &#x27; completed&#x27; : &#x27;&#x27; &#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; todos&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;toggleTodoHandle&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123; index &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;&#123;&#123;item.completed? &#x27;success&#x27;:&#x27;circle&#x27;&#125;&#125;&quot;</span>  /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;clear&quot;</span> <span class="attr">size</span>=<span class="string">&quot;16&quot;</span> <span class="attr">catchtap</span>=<span class="string">&quot;removeToDoHandle&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123; index &#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span>    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;footers&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">bindtap</span>=<span class="string">&quot;toggleAllHandle&quot;</span>&gt;</span>Toggle All<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123; leftCount &#125;&#125;&quot;</span>&gt;</span> &#123;&#123; leftCount &#125;&#125; &#123;&#123;leftCount &gt; 1 ? &#x27;items&#x27; : &#x27;item&#x27; &#125;&#125; left<span class="tag">&lt;/<span class="name">text</span>&gt;</span>  </span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span> <span class="attr">bindtap</span>=<span class="string">&quot;clearHandle&quot;</span>&gt;</span>Clear completed<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/todos/todos.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="comment">//文本框数据模型</span></span><br><span class="line">      <span class="attr">input</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="comment">//任务清单数据模型</span></span><br><span class="line">      <span class="attr">todos</span>: [</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning WEAPP&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning JavaScript&#x27;</span>,<span class="attr">completed</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&#x27;Learning HTML&#x27;</span>,<span class="attr">completed</span>: <span class="literal">false</span>&#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">leftCount</span>: <span class="number">2</span>,</span><br><span class="line">      <span class="attr">allCompleted</span>: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">inputChangeHandle</span>: <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">//body</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">value</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">input</span>: e.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//1.先让按钮点击时 执行一段代码</span></span><br><span class="line">  <span class="comment">//2. 拿到文本框里面的值</span></span><br><span class="line">  <span class="comment">// 2.1 由于小程序的数据绑定是单向的，</span></span><br><span class="line">  <span class="comment">//       必须要给文本框注册改变事件</span></span><br><span class="line">  <span class="comment">//3. 将这个值添加到列表中</span></span><br><span class="line">  <span class="attr">addTodoHandle</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123; </span><br><span class="line">     <span class="comment">//当添加按钮点击事件发生时执行的函数</span></span><br><span class="line">     <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>)<span class="keyword">return</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>)     </span><br><span class="line">     <span class="keyword">var</span> todos =  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>;  </span><br><span class="line">     todos.<span class="title function_">push</span>(&#123;       </span><br><span class="line">         <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">input</span>,</span><br><span class="line">         <span class="attr">completed</span>: <span class="literal">false</span></span><br><span class="line">      &#125;)  </span><br><span class="line">     <span class="comment">//必须显式的通过setData去改变数据，这样界面才能得到变化</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">todos</span>: todos,</span><br><span class="line">       <span class="attr">input</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">       <span class="attr">leftCount</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> + <span class="number">1</span>  </span><br><span class="line">     &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">toggleTodoHandle</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">//切换当前点中的item的完成状态</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">currentTarget</span>);</span><br><span class="line">    <span class="keyword">var</span> item = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>[e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>]</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line">    item.<span class="property">completed</span> = !item.<span class="property">completed</span></span><br><span class="line">    <span class="comment">//根据当前任务额完成状态决定增加一个或者减少一个</span></span><br><span class="line">    <span class="keyword">var</span> leftCount = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> + (item.<span class="property">completed</span> ? -<span class="number">1</span> : <span class="number">1</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">       <span class="attr">todos</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>,</span><br><span class="line">       <span class="attr">leftCount</span>: leftCount</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">removeToDoHandle</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> item = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>[e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>]</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> =  item.<span class="property">completed</span> ? <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> : (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span> - <span class="number">1</span>) ;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>.<span class="title function_">splice</span>(e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">todos</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>,</span><br><span class="line">      <span class="attr">leftCount</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">leftCount</span></span><br><span class="line">   &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">toggleAllHandle</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//this在这里永远指向的是当前页面对象</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">11</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">allCompleted</span> = !<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">allCompleted</span>     </span><br><span class="line">    <span class="keyword">var</span> todos = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>  </span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span></span><br><span class="line">    todos.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item</span>)&#123;</span><br><span class="line">      item.<span class="property">completed</span> = that.<span class="property">data</span>.<span class="property">allCompleted</span> </span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">todos</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>,</span><br><span class="line">      <span class="attr">leftCount</span>:  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">allCompleted</span>? <span class="number">0</span> : todos.<span class="property">length</span> </span><br><span class="line">   &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">clearHandle</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123; </span><br><span class="line">    <span class="keyword">var</span> todos = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todos</span>.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">item</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> !item.<span class="property">completed</span></span><br><span class="line">    &#125;)</span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">todos</span>: todos&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>效果:</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/dcc997dea49d0150fb6b16a6fbe390eb_1737630278006.png" alt="在这里插入图片描述"></p>
<p>点击clear Completed，只显示未完成的 任务:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/a1154d0c32e02696422b73b238675a86_1737630287894.png" alt="在这里插入图片描述"></p>
<h3 id="细节优化和总结"><a href="#细节优化和总结" class="headerlink" title="细节优化和总结"></a>细节优化和总结</h3><p>1：输入框中输入完成后，点击回车，就会添加</p>
<p>2：所有任务被清空后，不应该呈现列表和按钮</p>
<h4 id="bindconfirm事件"><a href="#bindconfirm事件" class="headerlink" title="bindconfirm事件"></a>bindconfirm事件</h4><p>第一个问题的处理: bindconfirm事件</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/e15be558710355c656d762357289d494_1737630287894.png" alt="在这里插入图片描述"></p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/85ca996260c62c16673ca970d062a622_1737630287894.png" alt="在这里插入图片描述"></p>
<h4 id="呈现问题–block"><a href="#呈现问题–block" class="headerlink" title="呈现问题–block"></a>呈现问题–block</h4><p>根据todos有没有数据，有数据就呈现todo列表和footer，没有就不显示<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/9679ee1a2d0889ff5fa00c98aed5227d_1737630287894.png" alt="在这里插入图片描述"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/todos/todos.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../images/plus.png&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;addTodoHandle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Anything here...&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;input&#125;&#125;&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;inputChangeHandle&quot;</span> <span class="attr">bindconfirm</span>=<span class="string">&quot;addTodoHandle&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123; todos.length &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;todos&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&#123;&#123; item.completed ? &#x27; completed&#x27; : &#x27;&#x27; &#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; todos&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;&#123;&#123; index &#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;toggleTodoHandle&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123; index &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;&#123;&#123;item.completed? &#x27;success&#x27;:&#x27;circle&#x27;&#125;&#125;&quot;</span>  /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;clear&quot;</span> <span class="attr">size</span>=<span class="string">&quot;16&quot;</span> <span class="attr">catchtap</span>=<span class="string">&quot;removeToDoHandle&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123; index &#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span>    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;footers&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">bindtap</span>=<span class="string">&quot;toggleAllHandle&quot;</span>&gt;</span>Toggle All<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123; leftCount &#125;&#125;&quot;</span>&gt;</span> &#123;&#123; leftCount &#125;&#125; &#123;&#123;leftCount &gt; 1 ? &#x27;items&#x27; : &#x27;item&#x27; &#125;&#125; left<span class="tag">&lt;/<span class="name">text</span>&gt;</span>  </span><br><span class="line">     <span class="tag">&lt;<span class="name">text</span> <span class="attr">bindtap</span>=<span class="string">&quot;clearHandle&quot;</span>&gt;</span>Clear completed<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>null<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>看下效果:</p>
<p><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/57bbe44501b2dddd79c35af74f704a51_1737630287894.png" alt="在这里插入图片描述"></p>
<p>会发现内容不见了，显示null，大功告成!<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/df275669f15524ac2ee70e889dd5c175_1737630298619.png" alt="在这里插入图片描述"></p>
<h2 id="真机演示"><a href="#真机演示" class="headerlink" title="真机演示"></a>真机演示</h2><p>点击预览:<br><img src="https://raw.githubusercontent.com/hufanglei/img-csdn/main/img/2025-1-13/0ee9c251191c0fd61f90fa2018b43d16_1737630298619.png" alt="在这里插入图片描述"></p>
<p>出现个二维码，扫码就可在手机上看到效果.</p>
<hr>
<p>完</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/20/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><span class="page-number current">21</span><a class="page-number" href="/page/22/">22</a><span class="space">&hellip;</span><a class="page-number" href="/page/60/">60</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/22/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">胡方雷</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">1.8m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">26:40</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/hufanglei" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
